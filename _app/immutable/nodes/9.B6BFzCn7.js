import"../chunks/DsnmJJEf.js";import"../chunks/Dreri0Nc.js";import{c as xt,o as ot}from"../chunks/sDIuGG-g.js";import{f as m,c as v,s as n,r as c,t as ae,p as Le,b as Be,u as O,g as e,l as ve,a as St,d as r,m as p,n as te}from"../chunks/BA9zlQXs.js";import{c as oe,a as d,f as T,t as ie}from"../chunks/D2T3iFuq.js";import{i as st}from"../chunks/5idYV8Eq.js";import{b as It}from"../chunks/5GlpX0Z2.js";import{i as Me}from"../chunks/DVSe7J_H.js";import{f as Vt}from"../chunks/DIg2_NEP.js";import{a as $e,n as bt,L as Pt,B as ar}from"../chunks/DFIjbTXV.js";import{e as it}from"../chunks/DEKlhpFx.js";import{s as lr,r as nr,b as or}from"../chunks/CN9_JMpm.js";import{p as ee}from"../chunks/Bfv6g7Rn.js";import{s as M}from"../chunks/CxGsrVHP.js";import{e as ue,i as sr}from"../chunks/DHhalKro.js";import{C as u,P as nt,u as pe}from"../chunks/Xw1Er8YH.js";import{B as ir}from"../chunks/dm43JwH2.js";import{s as ur}from"../chunks/BTDnJLXo.js";var dr=T('<div class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center"><div class="bg-white rounded-xl w-[90vw] h-[90vh] flex flex-col"><div class="flex items-center justify-between px-4 py-3 border-b"><h2 class="font-semibold">Preview Surat Jalan</h2> <button class="text-gray-500 hover:text-black">✕</button></div> <div class="flex-1"><iframe class="w-full h-full border-none"></iframe></div></div></div>');function cr(se,_){let z=ee(_,"show",8,!1),N=ee(_,"pdfUrl",8,""),y=ee(_,"onClose",8,()=>{});var R=oe(),re=m(R);{var g=D=>{var w=dr(),q=v(w),$=v(q),L=n(v($),2);c($);var b=n($,2),J=v(b);c(b),c(q),c(w),ae(()=>lr(J,"src",N())),it("click",L,function(...C){y()?.apply(this,C)}),d(D,w)};st(re,D=>{z()&&D(g)})}d(se,R)}var vr=T('<tr><td><button class="text-blue-600 hover:underline font-medium">Klik untuk lihat</button></td><td> </td><td> </td><td> </td><td> </td><td> </td><td><div> </div> <div> </div></td><td><div> </div> <div> </div></td></tr>'),pr=T('<table class="table caption-bottom"><thead><tr><th>Surat Jalan</th><th>Vacuum Truck</th><th>Tanggal</th><th>Nomor</th><th>Rute</th><th>Supervisor</th><th>Driver</th><th>Helper</th></tr></thead><tbody class="[&amp;>tr:hover:preset-tonal-primary]"></tbody></table>');function gr(se,_){Le(_,!1);let z=ee(_,"surjals",24,()=>[]),N=ee(_,"onPreview",8,()=>{});Me();var y=pr(),R=n(v(y));ue(R,5,z,sr,(re,g)=>{var D=vr(),w=v(D),q=v(w);c(w);var $=n(w),L=v($);c($);var b=n($),J=v(b,!0);c(b);var C=n(b),B=v(C,!0);c(C);var k=n(C),W=v(k,!0);c(k);var f=n(k),F=v(f,!0);c(f);var U=n(f),A=v(U),de=v(A,!0);c(A);var be=n(A,2),ye=v(be,!0);c(be),c(U);var h=n(U),x=v(h),E=v(x,!0);c(x);var K=n(x,2),he=v(K,!0);c(K),c(h),c(D),ae((S,j,H,Y)=>{M(L,`${e(g),O(()=>e(g).vt.no_vt)??""} - ${e(g),O(()=>e(g).vt.plat)??""}`),M(J,(e(g),O(()=>e(g).date))),M(B,(e(g),O(()=>e(g).no_surat_jalan))),M(W,(e(g),O(()=>e(g).rute.nama_rute))),M(F,(e(g),O(()=>e(g).supervisor.nama))),M(de,S),M(ye,j),M(E,H),M(he,Y)},[()=>(e(g),O(()=>e(g).personel_surat_jalan.find(S=>S.role==="driver1")?.personel.nama_personel)),()=>(e(g),O(()=>e(g).personel_surat_jalan.find(S=>S.role==="driver2")?.personel.nama_personel)),()=>(e(g),O(()=>e(g).personel_surat_jalan.find(S=>S.role==="helper1")?.personel.nama_personel)),()=>(e(g),O(()=>e(g).personel_surat_jalan.find(S=>S.role==="helper2")?.personel.nama_personel))]),it("click",q,()=>N()(e(g).surat_jalan_id)),d(re,D)}),c(R),c(y),d(se,y),Be()}var fr=T("<!> <!>",1),hr=T("<!> <!>",1),_r=T("<!> <!>",1),mr=T("<!> <!>",1),$r=T('<div class="flex items-end gap-1"><!> <div class="text-lg pb-1">:</div> <!></div>');function Ct(se,_){Le(_,!1);const z=p(),N=p();let y=ee(_,"value",12,"06:00"),R=ee(_,"minuteStep",8,5);const re=xt(),g=h=>String(h).padStart(2,"0"),D=Array.from({length:24},(h,x)=>({value:g(x),label:g(x)})),w=h=>Array.from({length:Math.floor(60/h)},(x,E)=>{const K=g(E*h);return{value:K,label:K}});let q=p([]),$=p([]),L=p([]),b=p([]),J=p(""),C=p("");const B=()=>{const h=e(L)?.[0]??"00",x=e(b)?.[0]??"00";y(`${h}:${x}`),re("change",y())};ot(()=>{const[h,x]=y().split(":");r(L,[h||"06"]),r(b,[x||"00"]),r(J,e(L)[0]),r(C,e(b)[0]),r(q,D),r($,w(R())),B()});const k=()=>{r(q,D)},W=()=>{r($,w(R()))},f=h=>{r(L,h.value),r(J,e(L)[0]),B()},F=h=>{r(b,h.value),r(C,e(b)[0]),B()},U=h=>{r(J,h.inputValue??"");const x=e(J).toLowerCase();if(!x||x===e(L)?.[0]){r(q,D);return}r(q,D.filter(E=>E.label.includes(x)))},A=h=>{r(C,h.inputValue??"");const x=e(C).toLowerCase(),E=w(R());if(!x||x===e(b)?.[0]){r($,E);return}r($,E.filter(K=>K.label.includes(x)))};ve(()=>e(q),()=>{r(z,pe({items:e(q),itemToString:h=>h.label,itemToValue:h=>h.value}))}),ve(()=>e($),()=>{r(N,pe({items:e($),itemToString:h=>h.label,itemToValue:h=>h.value}))}),St(),Me();var de=$r(),be=v(de);u(be,{class:"w-20",placeholder:"HH",get collection(){return e(z)},get value(){return e(L)},get inputValue(){return e(J)},onOpenChange:k,onInputValueChange:U,onValueChange:f,multiple:!1,selectionBehavior:"replace",children:(h,x)=>{var E=hr(),K=m(E);u.Control(K,{children:(S,j)=>{var H=fr(),Y=m(H);u.Input(Y,{});var G=n(Y,2);u.Trigger(G,{}),d(S,H)},$$slots:{default:!0}});var he=n(K,2);nt(he,{children:(S,j)=>{u.Positioner(S,{children:(H,Y)=>{u.Content(H,{class:`bg-white border shadow\r
                        max-h-40 overflow-y-auto overscroll-contain`,children:(G,Pe)=>{var le=oe(),ce=m(le);ue(ce,1,()=>e(q),ge=>ge.value,(ge,fe)=>{u.Item(ge,{get item(){return e(fe)},children:(De,Je)=>{u.ItemText(De,{children:(ke,Fe)=>{te();var ne=ie();ae(()=>M(ne,(e(fe),O(()=>e(fe).label)))),d(ke,ne)},$$slots:{default:!0}})},$$slots:{default:!0}})}),d(G,le)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),d(h,E)},$$slots:{default:!0}});var ye=n(be,4);u(ye,{class:"w-20",placeholder:"MM",get collection(){return e(N)},get value(){return e(b)},get inputValue(){return e(C)},onOpenChange:W,onInputValueChange:A,onValueChange:F,multiple:!1,selectionBehavior:"replace",children:(h,x)=>{var E=mr(),K=m(E);u.Control(K,{children:(S,j)=>{var H=_r(),Y=m(H);u.Input(Y,{});var G=n(Y,2);u.Trigger(G,{}),d(S,H)},$$slots:{default:!0}});var he=n(K,2);nt(he,{children:(S,j)=>{u.Positioner(S,{children:(H,Y)=>{u.Content(H,{class:`bg-white border shadow\r
                        max-h-40 overflow-y-auto overscroll-contain`,children:(G,Pe)=>{var le=oe(),ce=m(le);ue(ce,1,()=>e($),ge=>ge.value,(ge,fe)=>{u.Item(ge,{get item(){return e(fe)},children:(De,Je)=>{u.ItemText(De,{children:(ke,Fe)=>{te();var ne=ie();ae(()=>M(ne,(e(fe),O(()=>e(fe).label)))),d(ke,ne)},$$slots:{default:!0}})},$$slots:{default:!0}})}),d(G,le)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),d(h,E)},$$slots:{default:!0}}),c(de),d(se,de),Be()}var br=T("<!> <!>",1),Cr=T("<!> <!>",1);function me(se,_){Le(_,!1);let z=ee(_,"collection",8),N=ee(_,"value",24,()=>[]),y=ee(_,"placeholder",8,""),R=ee(_,"onOpenChange",8,()=>{}),re=ee(_,"onInputValueChange",8,()=>{}),g=ee(_,"onValueChange",8,()=>{}),D=ee(_,"contentClass",8,"bg-white border border-gray-300 shadow-lg max-h-64 overflow-y-auto"),w=ee(_,"className",8,"w-72");Me(),u(se,{get class(){return w()},get placeholder(){return y()},get collection(){return z()},get onOpenChange(){return R()},get onInputValueChange(){return re()},get onValueChange(){return g()},get value(){return N()},multiple:!1,inputBehavior:"autohighlight",openOnClick:!0,children:(q,$)=>{var L=Cr(),b=m(L);u.Control(b,{$$events:{click:()=>z()?.open?.()},children:(C,B)=>{var k=br(),W=m(k);u.Input(W,{});var f=n(W,2);u.Trigger(f,{}),d(C,k)},$$slots:{default:!0}});var J=n(b,2);nt(J,{children:(C,B)=>{u.Positioner(C,{children:(k,W)=>{u.Content(k,{get class(){return D()},children:(f,F)=>{var U=oe(),A=m(U);ur(A,_,"default",{}),d(f,U)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),d(q,L)},$$slots:{default:!0}}),Be()}var xr=T("<!> <!>",1),Sr=T("<!> <!>",1),Ir=T("<!> <!>",1),Vr=T("<!> <!>",1),Pr=T("<!> <!>",1),wr=T("<!> <!>",1),Tr=T("<!> <!>",1),yr=T("<!> <!>",1),Dr=T('<div class="fixed inset-0 bg-white/70 flex items-center justify-center z-50"><!></div>'),kr=T(`<div class="flex flex-col gap-2 mb-8"><div class="flex gap-4"><div class="flex flex-col gap-1"><label for="">Pilih Tanggal:</label> <div class="relative inline-block w-72"><input class="input w-full pr-10 cursor-pointer" placeholder="Pilih tanggal" readonly=""/> <svg class="absolute right-3 top-1/2 -translate-y-1/2
                        w-5 h-5 text-black pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></div> <div class="flex flex-col gap-1"><label for="">Pilih VT:</label> <!></div></div> <div class="flex gap-4"><div class="flex flex-col gap-1"><label for="">Pilih Rute:</label> <!></div> <div class="flex flex-col gap-1"><label for="">Pilih Supervisor:</label> <!></div></div> <div class="flex gap-4"><div class="flex flex-col gap-1"><label for="">Pilih Driver Shift Pagi:</label> <!></div> <div class="flex flex-col gap-1"><label for="">Pilih Helper Shift Pagi:</label> <!></div></div> <div class="flex gap-4"><div class="flex flex-col gap-1"><label for="">Pilih Driver Shift Malam:</label> <!></div> <div class="flex flex-col gap-1"><label for="">Pilih Helper Shift Malam:</label> <!></div></div> <div class="flex gap-4"><div class="flex flex-col gap-1"><label for="">Kapasitas BBM:</label> <div class="relative w-72"><input type="text" inputmode="numeric" pattern="[0-9]*" class="input w-full pr-10" placeholder="0"/> <span class="absolute right-3 top-1/2 -translate-y-1/2
                        text-sm opacity-70 pointer-events-none">L</span></div></div> <div class="flex flex-col gap-1"><label for="">Pilih Waktu Keluar VT:</label> <!></div> <div class="flex flex-col gap-1"><label for="">Pilih Waktu Kembali VT:</label> <!></div></div> <div class="flex gap-4 items-end"><div class="flex flex-col gap-1"><label for="">Pilih Dispatcher:</label> <!></div> <!></div> <!></div>`);function Hr(se,_){Le(_,!1);const z=p(),N=p(),y=p(),R=p(),re=p(),g=p(),D=p();let w=p(!1);const q=xt();let $=p("");const L=t=>{const a=t.target.value;if(a===""){r($,"");return}/^\d+$/.test(a)&&r($,a)};let b=p("07:00"),J=p("06:00"),C=[],B=p([]),k=p([]),W=p([]),f=p([]);const F=t=>t?.[0]??null,U=(t="")=>{const a=F(e(f)),l=C.filter(i=>{const o=i.nama_personel.toLowerCase().includes(t),s=a&&String(i.personel_id)===String(a);return o&&!s});return ct(l)},A=(t="")=>{const a=F(e(W)),l=C.filter(i=>{const o=i.nama_personel.toLowerCase().includes(t),s=a&&String(i.personel_id)===String(a);return o&&!s});return ct(l)},de=t=>{const a=(t.inputValue??"").toLowerCase();r(B,U(a))},be=t=>{const a=(t.inputValue??"").toLowerCase();r(k,A(a))},ye=t=>{r(W,t.value),r(k,A("")),K(e(W)?.[0],1)},h=t=>{r(f,t.value),r(B,U("")),K(e(f)?.[0],2)},x=()=>{r(B,U(""))},E=()=>{r(k,A(""))},K=(t,a=1)=>{if(!t)return;const l=C.find(s=>String(s.personel_id)===String(t));if(!l)return;const i=l.def_helper;if(!i){a===1&&r(Y,[]),a===2&&r(G,[]);return}S.find(s=>String(s.personel_id)===String(i))&&(a===1&&(r(Y,[String(i)]),r(j,le("")),r(H,ce(""))),a===2&&(r(G,[String(i)]),r(H,ce("")),r(j,le(""))))},he=(t,a)=>{if(!a||t.some(o=>String(o.personel_id)===String(a)))return t;const i=S.find(o=>String(o.personel_id)===String(a));return i?[i,...t]:t};let S=[],j=p([]),H=p([]),Y=p([]),G=p([]);const Pe=t=>t?.[0]??null,le=(t="")=>{const a=Pe(e(G));let l=S.filter(i=>{const o=i.nama_personel.toLowerCase().includes(t),s=a&&String(i.personel_id)===String(a);return o&&!s});return he(l,Pe(e(Y)))},ce=(t="")=>{const a=Pe(e(Y));let l=S.filter(i=>{const o=i.nama_personel.toLowerCase().includes(t),s=a&&String(i.personel_id)===String(a);return o&&!s});return he(l,Pe(e(G)))},ge=t=>{const a=(t.inputValue??"").toLowerCase();r(j,le(a))},fe=t=>{const a=(t.inputValue??"").toLowerCase();r(H,ce(a))},De=t=>{r(Y,t.value),r(H,ce(""))},Je=t=>{r(G,t.value),r(j,le(""))},ke=()=>{r(j,le(""))},Fe=()=>{r(H,ce(""))};let ne=[],_e=p([]),He=p([]),ut=!1;const wt=t=>{const a=(t.inputValue??"").toLowerCase();r(_e,ne.filter(l=>(l.nama??"").toLowerCase().includes(a)))},Tt=t=>{ut=!0,r(He,t.value),r(_e,ne)},yt=()=>{r(_e,ne)};let Re=[],we=p([]),Ue=p([]);const Dt=t=>{const a=(t.inputValue??"").toLowerCase();r(we,Re.filter(l=>l.nama.toLowerCase().includes(a)))},kt=t=>{r(Ue,t.value)},Ht=()=>{r(we,Re)};let Te=[],Ce=p([]),qe=p([]);const Ot=t=>{const a=(t.inputValue??"").toLowerCase();r(Ce,Te.filter(l=>(l.nama_rute??"").toLowerCase().includes(a)))},Lt=t=>{r(qe,t.value),r(Ce,Te);const a=e(qe)?.[0];if(!a)return;const l=Te.find(o=>String(o.rute_id)===String(a));if(!l)return;const i=l.user_id;i&&((!ut||!e(He)?.length)&&r(He,[String(i)]),r(_e,ne))},Bt=()=>{r(Ce,Te)};let xe=[],Se=p([]),Oe=p([]),dt=p();const Mt=()=>{r(Se,xe)},Rt=()=>{const t=e(Oe)?.[0];return t?xe.find(a=>String(a.vt_id)===String(t))??null:null},qt=t=>{const a=(t.inputValue??"").toLowerCase().trim(),l=Rt();if(!a){r(Se,xe);return}let i=xe.filter(o=>`${o.no_vt??""} - ${o.plat??""} ${o.vt_id??""}`.toLowerCase().includes(a));l&&!i.some(o=>String(o.vt_id)===String(l.vt_id))&&(i=[l,...i]),r(Se,i)},Jt=t=>{r(Oe,t.value),r(B,U("")),r(k,A(""))},Ft=()=>{const t=e(Oe)?.[0];if(!t)return[];const a=xe.find(l=>String(l.vt_id)===String(t));return a?(a.personels??[]).filter(l=>l.is_driver).map(l=>String(l.personel_id)):[]},ct=t=>{const a=Ft();return[...t].sort((l,i)=>{const o=a.includes(String(l.personel_id)),s=a.includes(String(i.personel_id));return o&&!s?-1:!o&&s?1:l.nama_personel.localeCompare(i.nama_personel)})};let Ae=p(),Ye="";const Ut=async()=>{xe=(await $e.getVT()).vts??[],r(Se,xe),Te=(await $e.getRute()).rutes,r(Ce,Te),ne=(await $e.getSupervisor()).users,r(_e,ne),Re=(await $e.getDispatcher()).users,r(we,Re),C=(await $e.getDrivers()).drivers??[],r(B,U("")),r(k,A("")),S=(await $e.getHelpers()).helpers??[],r(j,le("")),r(H,ce(""))},At=async()=>{r(w,!0);const t={date:Ye,vt_id:e(Oe)[0],rute_id:e(qe)[0],supervisor_id:e(He)[0],dispatcher_id:e(Ue)[0],driver1:e(W)[0],helper1:e(Y)[0],driver2:e(f)[0],helper2:e(G)[0],time_out:e(b),time_back:e(J),bbm:e($)};try{const a=await $e.createSJ(t);q("refresh"),bt?.success("Surat Jalan berhasil dibuat")}catch(a){console.error(a),bt?.error(a.message||"Gagal membuat Surat Jalan")}r(w,!1)};ot(()=>{const t=new Date;Vt(e(Ae),{mode:"single",dateFormat:"Y-m-d",altInput:!0,altFormat:"d-m-Y",defaultDate:t,onChange:([a])=>{a&&(Ye=vt(a))}}),Ye=vt(t),Ut()});const vt=t=>t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0");ve(()=>e(B),()=>{r(z,pe({items:e(B),itemToString:t=>t.nama_personel,itemToValue:t=>String(t.personel_id)}))}),ve(()=>e(k),()=>{r(N,pe({items:e(k),itemToString:t=>t.nama_personel,itemToValue:t=>String(t.personel_id)}))}),ve(()=>e(j),()=>{r(y,pe({items:e(j),itemToString:t=>t.nama_personel,itemToValue:t=>String(t.personel_id)}))}),ve(()=>e(H),()=>{r(R,pe({items:e(H),itemToString:t=>t.nama_personel,itemToValue:t=>String(t.personel_id)}))}),ve(()=>e(_e),()=>{r(re,pe({items:e(_e),itemToString:t=>t.nama,itemToValue:t=>String(t.user_id)}))}),ve(()=>e(we),()=>{r(g,pe({items:e(we),itemToString:t=>t.nama,itemToValue:t=>String(t.user_id)}))}),ve(()=>e(Ce),()=>{r(D,pe({items:e(Ce),itemToString:t=>t.nama_rute,itemToValue:t=>String(t.rute_id)}))}),ve(()=>e(Se),()=>{r(dt,pe({items:e(Se),itemToString:t=>`${t.no_vt} - ${t.plat}`,itemToValue:t=>String(t.vt_id)}))}),St(),Me();var ze=kr(),Ee=v(ze),Ke=v(Ee),pt=n(v(Ke),2),Yt=v(pt);It(Yt,t=>r(Ae,t),()=>e(Ae)),te(2),c(pt),c(Ke);var gt=n(Ke,2),zt=n(v(gt),2);me(zt,{placeholder:"Cari VT...",get collection(){return e(dt)},onOpenChange:Mt,onInputValueChange:qt,get value(){return e(Oe)},onValueChange:Jt,children:(t,a)=>{var l=oe(),i=m(l);ue(i,1,()=>e(Se),o=>o.vt_id,(o,s)=>{u.Item(o,{get item(){return e(s)},children:(Q,Ie)=>{var I=xr(),V=m(I);u.ItemText(V,{children:(Z,Ve)=>{te();var P=ie();ae(()=>M(P,`${e(s),O(()=>e(s).no_vt)??""} — ${e(s),O(()=>e(s).plat)??""}`)),d(Z,P)},$$slots:{default:!0}});var X=n(V,2);u.ItemIndicator(X,{}),d(Q,I)},$$slots:{default:!0}})}),d(t,l)},$$slots:{default:!0}}),c(gt),c(Ee);var Ne=n(Ee,2),We=v(Ne),Et=n(v(We),2);me(Et,{placeholder:"Cari Rute...",get collection(){return e(D)},onInputValueChange:Ot,onValueChange:Lt,onOpenChange:Bt,get value(){return e(qe)},children:(t,a)=>{var l=oe(),i=m(l);ue(i,1,()=>e(Ce),o=>o.rute_id,(o,s)=>{u.Item(o,{get item(){return e(s)},children:(Q,Ie)=>{var I=Sr(),V=m(I);u.ItemText(V,{children:(Z,Ve)=>{te();var P=ie();ae(()=>M(P,(e(s),O(()=>e(s).nama_rute)))),d(Z,P)},$$slots:{default:!0}});var X=n(V,2);u.ItemIndicator(X,{}),d(Q,I)},$$slots:{default:!0}})}),d(t,l)},$$slots:{default:!0}}),c(We);var ft=n(We,2),Kt=n(v(ft),2);me(Kt,{placeholder:"Cari Supervisor...",get collection(){return e(re)},onOpenChange:yt,onInputValueChange:wt,onValueChange:Tt,get value(){return e(He)},children:(t,a)=>{var l=oe(),i=m(l);ue(i,1,()=>e(_e),o=>o.user_id,(o,s)=>{u.Item(o,{get item(){return e(s)},children:(Q,Ie)=>{var I=Ir(),V=m(I);u.ItemText(V,{children:(Z,Ve)=>{te();var P=ie();ae(()=>M(P,(e(s),O(()=>e(s).nama)))),d(Z,P)},$$slots:{default:!0}});var X=n(V,2);u.ItemIndicator(X,{}),d(Q,I)},$$slots:{default:!0}})}),d(t,l)},$$slots:{default:!0}}),c(ft),c(Ne);var je=n(Ne,2),Ge=v(je),Nt=n(v(Ge),2);me(Nt,{placeholder:"Cari Driver...",get collection(){return e(z)},onOpenChange:x,onInputValueChange:de,onValueChange:ye,get value(){return e(W)},children:(t,a)=>{var l=oe(),i=m(l);ue(i,1,()=>e(B),o=>o.personel_id,(o,s)=>{u.Item(o,{get item(){return e(s)},children:(Q,Ie)=>{var I=Vr(),V=m(I);u.ItemText(V,{children:(Z,Ve)=>{te();var P=ie();ae(()=>M(P,(e(s),O(()=>e(s).nama_personel)))),d(Z,P)},$$slots:{default:!0}});var X=n(V,2);u.ItemIndicator(X,{}),d(Q,I)},$$slots:{default:!0}})}),d(t,l)},$$slots:{default:!0}}),c(Ge);var ht=n(Ge,2),Wt=n(v(ht),2);me(Wt,{placeholder:"Cari Helper...",get collection(){return e(y)},onOpenChange:ke,onInputValueChange:ge,onValueChange:De,get value(){return e(Y)},children:(t,a)=>{var l=oe(),i=m(l);ue(i,1,()=>e(j),o=>o.personel_id,(o,s)=>{u.Item(o,{get item(){return e(s)},children:(Q,Ie)=>{var I=Pr(),V=m(I);u.ItemText(V,{children:(Z,Ve)=>{te();var P=ie();ae(()=>M(P,(e(s),O(()=>e(s).nama_personel)))),d(Z,P)},$$slots:{default:!0}});var X=n(V,2);u.ItemIndicator(X,{}),d(Q,I)},$$slots:{default:!0}})}),d(t,l)},$$slots:{default:!0}}),c(ht),c(je);var Qe=n(je,2),Xe=v(Qe),jt=n(v(Xe),2);me(jt,{placeholder:"Cari Driver...",get collection(){return e(N)},onOpenChange:E,onInputValueChange:be,onValueChange:h,get value(){return e(f)},children:(t,a)=>{var l=oe(),i=m(l);ue(i,1,()=>e(k),o=>o.personel_id,(o,s)=>{u.Item(o,{get item(){return e(s)},children:(Q,Ie)=>{var I=wr(),V=m(I);u.ItemText(V,{children:(Z,Ve)=>{te();var P=ie();ae(()=>M(P,(e(s),O(()=>e(s).nama_personel)))),d(Z,P)},$$slots:{default:!0}});var X=n(V,2);u.ItemIndicator(X,{}),d(Q,I)},$$slots:{default:!0}})}),d(t,l)},$$slots:{default:!0}}),c(Xe);var _t=n(Xe,2),Gt=n(v(_t),2);me(Gt,{placeholder:"Cari Helper...",get collection(){return e(R)},onOpenChange:Fe,onInputValueChange:fe,onValueChange:Je,get value(){return e(G)},children:(t,a)=>{var l=oe(),i=m(l);ue(i,1,()=>e(H),o=>o.personel_id,(o,s)=>{u.Item(o,{get item(){return e(s)},children:(Q,Ie)=>{var I=Tr(),V=m(I);u.ItemText(V,{children:(Z,Ve)=>{te();var P=ie();ae(()=>M(P,(e(s),O(()=>e(s).nama_personel)))),d(Z,P)},$$slots:{default:!0}});var X=n(V,2);u.ItemIndicator(X,{}),d(Q,I)},$$slots:{default:!0}})}),d(t,l)},$$slots:{default:!0}}),c(_t),c(Qe);var Ze=n(Qe,2),et=v(Ze),mt=n(v(et),2),tt=v(mt);nr(tt),te(2),c(mt),c(et);var rt=n(et,2),Qt=n(v(rt),2);Ct(Qt,{get value(){return e(b)},set value(t){r(b,t)},$$legacy:!0}),c(rt);var $t=n(rt,2),Xt=n(v($t),2);Ct(Xt,{get value(){return e(J)},set value(t){r(J,t)},$$legacy:!0}),c($t),c(Ze);var at=n(Ze,2),lt=v(at),Zt=n(v(lt),2);me(Zt,{placeholder:"Cari Dispatcher...",get collection(){return e(g)},onOpenChange:Ht,onInputValueChange:Dt,onValueChange:kt,get value(){return e(Ue)},children:(t,a)=>{var l=oe(),i=m(l);ue(i,1,()=>e(we),o=>o.user_id,(o,s)=>{u.Item(o,{get item(){return e(s)},children:(Q,Ie)=>{var I=yr(),V=m(I);u.ItemText(V,{children:(Z,Ve)=>{te();var P=ie();ae(()=>M(P,(e(s),O(()=>e(s).nama)))),d(Z,P)},$$slots:{default:!0}});var X=n(V,2);u.ItemIndicator(X,{}),d(Q,I)},$$slots:{default:!0}})}),d(t,l)},$$slots:{default:!0}}),c(lt);var er=n(lt,2);ir(er,{severity:"success",$$events:{click:At},children:(t,a)=>{te();var l=ie("Simpan");d(t,l)},$$slots:{default:!0}}),c(at);var tr=n(at,2);{var rr=t=>{var a=Dr(),l=v(a);Pt(l,{}),c(a),d(t,a)};st(tr,t=>{e(w)&&t(rr)})}c(ze),ae(()=>or(tt,e($))),it("input",tt,L),d(se,ze),Be()}var Or=T('<div class="fixed inset-0 bg-white/70 flex items-center justify-center z-50"><!></div>'),Lr=T(`<div><h1 class="text-2xl font-semibold mb-3">Surat Jalan</h1> <label for="" class="text-sm text-gray-600">Pilih Tanggal:</label> <div class="relative ml-2 mt-2 inline-block w-72"><input class="input w-full pr-10 cursor-pointer" placeholder="Pilih range tanggal" readonly=""/> <svg class="absolute right-3 top-1/2 -translate-y-1/2
                w-5 h-5 text-black pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div> <!> <h1 class="text-xl font-semibold mb-3 mt-8">Buat Surat Jalan</h1> <!> <!> <!></div>`);function Zr(se,_){Le(_,!1);let z=p(!1),N=p(),y=[],R=p(!1),re=p(""),g=p([]);const D=async()=>{r(z,!0);try{const f=await $e.getSJByDates({dates:y});r(g,f.surat_jalans)}catch(f){console.error(f)}r(z,!1)},w=f=>f.getFullYear()+"-"+String(f.getMonth()+1).padStart(2,"0")+"-"+String(f.getDate()).padStart(2,"0"),q=f=>{r(re,`${ar}/uploads/sj/${f}.pdf`),r(R,!0)};ot(()=>{const f=new Date;Vt(e(N),{mode:"range",dateFormat:"Y-m-d",altInput:!0,altFormat:"d-m-Y",locale:{rangeSeparator:" sampai "},defaultDate:[f,f],onChange:(F,U)=>{if(F.length===1)y=[w(F[0])];else if(F.length===2){const A=w(F[0]),de=w(F[1]);A===de?y=[A]:y=[A,de],D()}console.log("dateArray:",y)}}),y=[w(f)],D()}),Me();var $=Lr(),L=n(v($),4),b=v(L);It(b,f=>r(N,f),()=>e(N)),te(2),c(L);var J=n(L,2);gr(J,{get surjals(){return e(g)},onPreview:q});var C=n(J,4);Hr(C,{$$events:{refresh:D}});var B=n(C,2);cr(B,{get show(){return e(R)},get pdfUrl(){return e(re)},onClose:()=>r(R,!1)});var k=n(B,2);{var W=f=>{var F=Or(),U=v(F);Pt(U,{}),c(F),d(f,F)};st(k,f=>{e(z)&&f(W)})}c($),d(se,$),Be()}export{Zr as component};
