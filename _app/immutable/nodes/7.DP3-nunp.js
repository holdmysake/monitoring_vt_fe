import"../chunks/DsnmJJEf.js";import"../chunks/Dreri0Nc.js";import{p as wr,l as me,a as Pr,t as A,b as Mr,g as e,c as t,d as o,m as k,s as a,r,n as P,u as p,f as Y,w as pr,e as mt,h as L}from"../chunks/BA9zlQXs.js";import{f as y,a as n,c as ur,t as V,b as $t}from"../chunks/D2T3iFuq.js";import{o as Cr}from"../chunks/sDIuGG-g.js";import{s as M}from"../chunks/CxGsrVHP.js";import{i as H}from"../chunks/5idYV8Eq.js";import{e as Ft,i as Ir}from"../chunks/DHhalKro.js";import{a as xt}from"../chunks/BN_T7pPR.js";import{r as ve,a as hr,s as At}from"../chunks/CN9_JMpm.js";import{e as E}from"../chunks/DEKlhpFx.js";import{b as ce}from"../chunks/j0kaSfka.js";import{s as Sr,b as Vr}from"../chunks/C-ltNOpG.js";import{i as Hr}from"../chunks/DVSe7J_H.js";import{a as xe,L as Br,n as Te,B as Lr}from"../chunks/D4MCqZJT.js";import{c as Dr}from"../chunks/BvDYI0fq.js";import{f as Tr}from"../chunks/DIg2_NEP.js";import{B}from"../chunks/dm43JwH2.js";import{S as jr,T as Er}from"../chunks/CS2betOZ.js";import{u as kr,C as w,P as _r}from"../chunks/Xw1Er8YH.js";var zr=y("<!> <!>",1),Or=y("<!> <!>",1),Kr=y("<!> <!>",1),Gr=y("<!> <!>",1),Yr=y("<!> <!>",1),qr=y("<!> <!>",1),Rr=$t('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"></path><path d="M8 6V4h8v2"></path><path d="M19 6l-1 14H6L5 6"></path></svg>'),Jr=$t('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"></path><path d="M8 6V4h8v2"></path><path d="M19 6l-1 14H6L5 6"></path></svg>'),Wr=$t('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"></path><path d="M8 6V4h8v2"></path><path d="M19 6l-1 14H6L5 6"></path></svg>'),Ur=$t('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"></path><path d="M8 6V4h8v2"></path><path d="M19 6l-1 14H6L5 6"></path></svg>'),Qr=y(`<td><input class="input w-full"/></td> <td><input class="input w-full"/></td> <td><!></td> <td><!></td> <td><div class="flex flex-col items-center gap-1 mb-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                    border rounded-lg cursor-pointer
                                    text-sm text-gray-600 hover:bg-gray-100"><span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label> <!></div></td> <td><div class="flex flex-col items-center gap-1 mb-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                    border rounded-lg cursor-pointer
                                    text-sm text-gray-600 hover:bg-gray-100"><span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label> <!></div></td> <td><div class="flex flex-col items-center gap-1"><div class="flex items-center gap-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                        border rounded-lg cursor-pointer
                                        text-sm text-gray-600 hover:bg-gray-100"><span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label> <!></div> <div class="relative"><input type="text" class="input w-36 cursor-pointer" readonly=""/> <svg class="absolute right-2 top-1/2 -translate-y-1/2 w-5 h-5 text-black cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></div></td> <td><div class="flex flex-col items-center gap-1"><div class="flex items-center gap-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                        border rounded-lg cursor-pointer
                                        text-sm text-gray-600 hover:bg-gray-100"><span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label> <!></div> <div class="relative"><input type="text" class="input w-36 cursor-pointer" readonly=""/> <svg class="absolute right-2 top-1/2 -translate-y-1/2 w-5 h-5 text-black cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></div></td> <td class="space-x-2 whitespace-nowrap"><!> <!></td>`,1),Xr=y("<span>-</span>"),Zr=y("<span> </span>"),ea=y("<span>-</span>"),ta=y("<span> </span>"),ra=y('<td> </td> <td> </td> <td> </td> <td> </td> <td><!></td> <td><!></td> <td><div class="flex flex-col gap-1"><!> <!></div></td> <td><div class="flex flex-col gap-1"><!> <!></div></td> <td class="space-x-2"><!> <!></td>',1),aa=y("<tr><!></tr>"),sa=y("<!> <!>",1),la=y("<!> <!>",1),oa=y("<!> <!>",1),na=y("<!> <!>",1),ia=y("<!> <!>",1),da=y("<!> <!>",1),va=y(`<tr><td><input class="input w-full"/></td><td><input class="input w-full"/></td><td><!></td><td><!></td><td><div class="flex flex-col items-center gap-1 mb-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                border rounded-lg cursor-pointer
                                text-sm text-gray-600 hover:bg-gray-100"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M12 12v9M8 12l4-4 4 4"></path></svg> <span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label></div></td><td><div class="flex flex-col items-center gap-1 mb-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                border rounded-lg cursor-pointer
                                text-sm text-gray-600 hover:bg-gray-100"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M12 12v9M8 12l4-4 4 4"></path></svg> <span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label></div></td><td><div class="flex flex-col items-center gap-1"><div class="flex items-center gap-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                    border rounded-lg cursor-pointer
                                    text-sm text-gray-600 hover:bg-gray-100"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M12 12v9M8 12l4-4 4 4"></path></svg> <span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label></div> <div class="relative"><input type="text" class="input w-36 cursor-pointer" readonly=""/> <svg class="absolute right-2 top-1/2 -translate-y-1/2 w-5 h-5 text-black cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></div></td><td><div class="flex flex-col items-center gap-1"><div class="flex items-center gap-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                    border rounded-lg cursor-pointer
                                    text-sm text-gray-600 hover:bg-gray-100"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M12 12v9M8 12l4-4 4 4"></path></svg> <span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label></div> <div class="relative"><input type="text" class="input w-36 cursor-pointer" readonly=""/> <svg class="absolute right-2 top-1/2 -translate-y-1/2 w-5 h-5 text-black cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></div></td><td class="space-x-2 whitespace-nowrap"><!> <!></td></tr>`),ca=y('<tr><td colspan="7"><!></td></tr>'),pa=y('<iframe class="w-full h-full rounded-xl border"></iframe>'),ua=y('<img class="max-w-full max-h-full object-contain rounded-xl"/>'),_a=y('<div class="fixed inset-0 bg-black/60 flex items-center justify-center z-50"><div class="bg-white rounded-2xl w-[70vw] h-[70vh] p-4 flex flex-col"><div class="flex justify-between items-center mb-3"><h2 class="font-semibold text-lg"> </h2> <button class="text-xl hover:opacity-70">✕</button></div> <div class="flex-1 overflow-auto flex items-center justify-center"><!></div></div></div>'),ha=y('<div class="fixed inset-0 bg-white/70 flex items-center justify-center z-50"><!></div>'),fa=y('<div class="table-wrap"><p class="text-2xl font-semibold mb-4">Driver</p> <div class="flex items-center justify-between gap-3 mb-3"><!></div> <table class="table caption-bottom"><thead><tr><th class="cursor-pointer select-none">Nama <span class="ml-1 text-xs opacity-60"> </span></th><th>No. Handphone</th><th>Helper</th><th>Vacuum Truck</th><th>Foto</th><th>KTP</th><th>SIM</th><th>SIML</th><th>Action</th></tr></thead><tbody class="[&amp;>tr:hover:preset-tonal-primary]"><!><!></tbody></table> <!> <!> <!></div>');function ga(zt,rt){wr(rt,!1);const We=k(),at=k(),je=k(),yt=k(),Ot=k(),Z=k();let ee=k(!1),bt=k("asc");const fr=()=>{o(bt,e(bt)==="asc"?"desc":"asc")},pt=(s,l="asc")=>[...s].sort((u,S)=>{const I=(u?.nama_personel??"").toLowerCase(),J=(S?.nama_personel??"").toLowerCase();return I<J?l==="asc"?-1:1:I>J?l==="asc"?1:-1:0});let Ie=k(""),Se=k(1),q=k(10),te=k([]),Ue=k(!1),Ee=k(""),Ht=k(""),st=[],Qe=k([]),ut=[],_t=k();const Kt=()=>{o(Qe,st)},Bt=()=>{const s=ut?.[0];if(!s)return"";const l=st.find(u=>String(u.vt_id)===String(s));return l?`${l.no_vt??""} - ${l.plat??""}`:""},Ne=s=>{const l=(s.inputValue??"").toLowerCase().trim(),u=Bt().toLowerCase();if(!l||l===u){o(Qe,st);return}const S=st.filter(I=>`${I.no_vt??""} - ${I.plat??""} ${I.vt_id??""}`.toLowerCase().includes(l));o(Qe,S.length?S:st)},kt=s=>{L(i,e(i).def_vt=s.value?.[0]??""),ut=s.value,console.log("selectedVT:",ut)};let d=[],ie=k([]),lr=[];const or=s=>s?.[0]??null,Gt=()=>{const s=or(lr);return s?d.find(u=>String(u.personel_id)===String(s))?.nama_personel??"":""},Yt=()=>{o(ie,d)},nr=s=>{const l=(s.inputValue??"").toLowerCase(),u=Gt().toLowerCase();if(!l||l===u){o(ie,d);return}o(ie,d.filter(S=>(S.nama_personel??"").toLowerCase().includes(l)))},Fe=s=>{L(i,e(i).def_helper=or(s.value)),lr=s.value??[],o(ie,d)},qt=async()=>{try{d=(await xe.getAvailableHelpers()).helpers,o(ie,d)}catch(s){console.error("Error fetching helpers:",s)}},Lt=async()=>{o(ee,!0);try{const s=await xe.getDrivers();o(te,s.drivers),console.log("drivers:",e(te)),st=(await xe.getVT()).vts??[],o(Qe,st),qt()}catch(s){console.error("Error fetching drivers:",s)}o(ee,!1)},Rt=async()=>{o(ee,!0);try{const s=await xe.getLastDriver();o(te,[...e(te),s.driver])}catch(s){console.error("Error fetching last driver:",s)}o(ee,!1)},Jt=async s=>{o(ee,!0);try{const l=await xe.getDriverByID({personel_id:s});qt(),o(te,e(te).map(u=>u.personel_id===s?l.driver:u))}catch(l){console.error("Error fetching driver by ID:",l)}o(ee,!1)};function Dt(s,l){o(Ee,`${Lr}/${s}`),o(Ht,l),o(Ue,!0)}function Tt(){o(Ue,!1),o(Ee,""),o(Ht,"")}function jt(s){if(!s)return null;const l=new Date(s),u=String(l.getDate()).padStart(2,"0"),S=String(l.getMonth()+1).padStart(2,"0"),I=l.getFullYear();return`${u}-${S}-${I}`}function wt(s){if(!s)return null;const l=new Date(s),u=new Date;return u.setHours(0,0,0,0),l>=u?{text:`Aktif sampai ${jt(s)}`,class:"text-green-600"}:{text:`Nonaktif sejak ${jt(s)}`,class:"text-red-600"}}let Ve=k(null),Pt=k(null),i=k({nama_personel:"",no_hp:"",foto:"",ktp:"",sim:"",siml:"",sim_expired_at:"",siml_expired_at:"",is_driver:1,def_helper:"",def_vt:""});function Wt(){o(i,{nama_personel:"",no_hp:"",foto:"",ktp:"",sim:"",siml:"",sim_expired_at:"",siml_expired_at:"",is_driver:1,def_helper:"",def_vt:""})}function ir(){Wt(),o(Ve,"add")}function gr(s){o(Ve,"edit"),o(Pt,s.personel_id),o(i,{...s});const l=e(te).find(u=>String(u.personel_id)===String(s.personel_id));l?.helper&&(e(ie).some(S=>String(S.personel_id)===String(l.helper.personel_id))||o(ie,[l.helper,...e(ie)])),console.log("helperItems:",e(ie))}function Ut(){o(Ve,null),o(Pt,null),Wt()}async function dr(){if(o(ee,!0),e(Ve)==="add")try{console.log(e(i)),await xe.createPersonel(e(i)),await Rt()}catch(s){console.error("Error creating personel:",s),Te?.error("Gagal menambahkan driver")}finally{Te?.success("Driver berhasil ditambahkan")}if(e(Ve)==="edit")try{const s={...e(i)};console.log(JSON.stringify(s,null,2));const l=await xe.updatePersonel(s);await Jt(e(i).personel_id)}catch(s){console.error("Error updating personel:",s),Te?.error("Gagal memperbarui driver")}finally{Te?.success("Driver berhasil diperbarui")}qt(),Ut(),o(ee,!1)}async function vr(s){if(await Dr("Hapus data ini?")){o(ee,!0);try{await xe.deletePersonel({personel_id:s}),o(te,e(te).filter(u=>u.personel_id!==s))}catch(u){console.error("Error deleting personel:",u),Te?.error("Gagal menghapus driver")}finally{Te?.success("Driver berhasil dihapus")}o(ee,!1)}}function Ae(s,l){const u=s.target.files[0];u&&L(i,e(i)[l]=u)}function mr(s){return s?s.toLowerCase().endsWith(".pdf"):!1}function Et(s,l={}){const u=Tr(s,{dateFormat:"Y-m-d",altInput:!0,altFormat:"d-m-Y",allowInput:!1,...l});return{destroy(){u.destroy()}}}Cr(()=>{Lt()}),me(()=>(e(te),e(Ie)),()=>{o(We,e(te).filter(s=>(s?.nama_personel??"").toLowerCase().includes((e(Ie)??"").toLowerCase())))}),me(()=>(e(We),e(bt)),()=>{o(at,pt(e(We),e(bt)))}),me(()=>e(Ie),()=>{e(Ie)!==void 0&&o(Se,1)}),me(()=>(e(Se),e(q)),()=>{o(je,(e(Se)-1)*e(q))}),me(()=>(e(je),e(q)),()=>{o(yt,e(je)+e(q))}),me(()=>(e(at),e(je),e(yt)),()=>{o(Ot,e(at).slice(e(je),e(yt)))}),me(()=>e(Qe),()=>{o(_t,kr({items:e(Qe),itemToString:s=>`${s.no_vt} - ${s.plat}`,itemToValue:s=>String(s.vt_id)}))}),me(()=>e(ie),()=>{o(Z,kr({items:e(ie),itemToString:s=>s.nama_personel,itemToValue:s=>String(s.personel_id)}))}),Pr(),Hr();var Qt=fa(),c=a(t(Qt),2),v=t(c);jr(v,{placeholder:"Cari nama driver...",get value(){return e(Ie)},set value(s){o(Ie,s)},$$legacy:!0}),r(c);var b=a(c,2),U=t(b),R=t(U),ge=t(R),re=a(t(ge)),$e=t(re,!0);r(re),r(ge),P(8),r(R),r(U);var pe=a(U),ye=t(pe);Ft(ye,1,()=>e(Ot),Ir,(s,l)=>{var u=aa(),S=t(u);{var I=K=>{var se=Qr(),z=Y(se),Q=t(z);ve(Q),r(z);var N=a(z,2),D=t(N);ve(D),r(N);var T=a(N,2),le=t(T);{let h=pr(()=>(e(i),p(()=>e(i).def_helper?[String(e(i).def_helper)]:[])));w(le,{class:"w-48",placeholder:"Pilih Helper",get collection(){return e(Z)},onOpenChange:Yt,onInputValueChange:nr,onValueChange:Fe,get value(){return e(h)},multiple:!1,inputBehavior:"autohighlight",openOnClick:!0,children:(F,Me)=>{var fe=Kr(),qe=Y(fe);w.Control(qe,{$$events:{click:()=>e(Z)?.open?.()},children:(Re,It)=>{var Je=zr(),Ce=Y(Je);w.Input(Ce,{});var St=a(Ce,2);w.Trigger(St,{}),n(Re,Je)},$$slots:{default:!0}});var vt=a(qe,2);_r(vt,{children:(Re,It)=>{w.Positioner(Re,{children:(Je,Ce)=>{w.Content(Je,{class:"bg-white border border-gray-300 shadow-lg max-h-40 overflow-y-auto",children:(St,Nr)=>{var tr=ur(),xr=Y(tr);Ft(xr,1,()=>e(ie),Vt=>Vt.personel_id,(Vt,ct)=>{w.Item(Vt,{get item(){return e(ct)},children:($r,Fr)=>{var rr=Or(),ar=Y(rr);w.ItemText(ar,{children:(br,Ar)=>{P();var sr=V();A(()=>M(sr,(e(ct),p(()=>e(ct).nama_personel)))),n(br,sr)},$$slots:{default:!0}});var yr=a(ar,2);w.ItemIndicator(yr,{}),n($r,rr)},$$slots:{default:!0}})}),n(St,tr)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),n(F,fe)},$$slots:{default:!0}})}r(T);var oe=a(T,2),Ke=t(oe);{let h=pr(()=>(e(i),p(()=>e(i).def_vt?[String(e(i).def_vt)]:[])));w(Ke,{class:"w-48",placeholder:"Pilih VT",get collection(){return e(_t)},onOpenChange:Kt,onInputValueChange:Ne,onValueChange:kt,get value(){return e(h)},multiple:!1,inputBehavior:"autohighlight",openOnClick:!0,children:(F,Me)=>{var fe=qr(),qe=Y(fe);w.Control(qe,{$$events:{click:()=>e(_t)?.open?.()},children:(Re,It)=>{var Je=Gr(),Ce=Y(Je);w.Input(Ce,{});var St=a(Ce,2);w.Trigger(St,{}),n(Re,Je)},$$slots:{default:!0}});var vt=a(qe,2);_r(vt,{children:(Re,It)=>{w.Positioner(Re,{children:(Je,Ce)=>{w.Content(Je,{class:"bg-white border border-gray-300 shadow-lg max-h-40 overflow-y-auto",children:(St,Nr)=>{var tr=ur(),xr=Y(tr);Ft(xr,1,()=>e(Qe),Vt=>Vt.vt_id,(Vt,ct)=>{w.Item(Vt,{get item(){return e(ct)},children:($r,Fr)=>{var rr=Yr(),ar=Y(rr);w.ItemText(ar,{children:(br,Ar)=>{P();var sr=V();A(()=>M(sr,`${e(ct),p(()=>e(ct).no_vt)??""} - ${e(ct),p(()=>e(ct).plat)??""}`)),n(br,sr)},$$slots:{default:!0}});var yr=a(ar,2);w.ItemIndicator(yr,{}),n($r,rr)},$$slots:{default:!0}})}),n(St,tr)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),n(F,fe)},$$slots:{default:!0}})}r(oe);var W=a(oe,2),de=t(W),ue=t(de),_=t(ue),$=t(_,!0);r(_);var g=a(_,2);r(ue);var j=a(ue,2);{var X=h=>{B(h,{severity:"danger",$$events:{click:()=>L(i,e(i).foto=null)},children:(F,Me)=>{var fe=Rr();n(F,fe)},$$slots:{default:!0}})};H(j,h=>{e(i),p(()=>e(i).foto!=null)&&h(X)})}r(de),r(W);var _e=a(W,2),He=t(_e),Be=t(He),ot=t(Be),Ct=t(ot,!0);r(ot);var ht=a(ot,2);r(Be);var Ze=a(Be,2);{var ke=h=>{B(h,{severity:"danger",$$events:{click:()=>L(i,e(i).ktp=null)},children:(F,Me)=>{var fe=Jr();n(F,fe)},$$slots:{default:!0}})};H(Ze,h=>{e(i),p(()=>e(i).ktp!=null)&&h(ke)})}r(He),r(_e);var Le=a(_e,2),De=t(Le),et=t(De),f=t(et),ne=t(f),we=t(ne,!0);r(ne);var he=a(ne,2);r(f);var ft=a(f,2);{var Nt=h=>{B(h,{severity:"danger",$$events:{click:()=>L(i,e(i).sim=null)},children:(F,Me)=>{var fe=Wr();n(F,fe)},$$slots:{default:!0}})};H(ft,h=>{e(i),p(()=>e(i).sim!=null)&&h(Nt)})}r(et);var m=a(et,2),C=t(m);ve(C),mt(()=>ce(C,()=>e(i).sim_expired_at,h=>L(i,e(i).sim_expired_at=h))),xt(C,h=>Et?.(h)),P(2),r(m),r(De),r(Le);var x=a(Le,2),G=t(x),Pe=t(G),nt=t(Pe),it=t(nt),Xt=t(it,!0);r(it);var dt=a(it,2);r(nt);var Zt=a(nt,2);{var Ge=h=>{B(h,{severity:"danger",$$events:{click:()=>L(i,e(i).siml=null)},children:(F,Me)=>{var fe=Ur();n(F,fe)},$$slots:{default:!0}})};H(Zt,h=>{e(i),p(()=>e(i).siml!=null)&&h(Ge)})}r(Pe);var tt=a(Pe,2),Ye=t(tt);ve(Ye),mt(()=>ce(Ye,()=>e(i).siml_expired_at,h=>L(i,e(i).siml_expired_at=h))),xt(Ye,h=>Et?.(h)),P(2),r(tt),r(G),r(x);var cr=a(x,2),gt=t(cr);B(gt,{severity:"success",$$events:{click:dr},children:(h,F)=>{P();var Me=V("Simpan");n(h,Me)},$$slots:{default:!0}});var er=a(gt,2);B(er,{severity:"danger",$$events:{click:Ut},children:(h,F)=>{P();var Me=V("Batal");n(h,Me)},$$slots:{default:!0}}),r(cr),A(()=>{M($,(e(i),p(()=>e(i).foto??"Pilih Foto"))),M(Ct,(e(i),p(()=>e(i).ktp??"Pilih KTP"))),M(we,(e(i),p(()=>e(i).sim??"Pilih SIM"))),M(Xt,(e(i),p(()=>e(i).siml??"Pilih SIML")))}),ce(Q,()=>e(i).nama_personel,h=>L(i,e(i).nama_personel=h)),ce(D,()=>e(i).no_hp,h=>L(i,e(i).no_hp=h)),E("change",g,h=>Ae(h,"foto")),E("change",ht,h=>Ae(h,"ktp")),E("change",he,h=>Ae(h,"sim")),E("change",dt,h=>Ae(h,"siml")),n(K,se)},J=K=>{var se=ra(),z=Y(se),Q=t(z,!0);r(z);var N=a(z,2),D=t(N,!0);r(N);var T=a(N,2),le=t(T,!0);r(T);var oe=a(T,2),Ke=t(oe);r(oe);var W=a(oe,2),de=t(W);{var ue=m=>{B(m,{className:"w-16",severity:"primary",$$events:{click:()=>Dt(e(l).foto,"Foto")},children:(C,x)=>{P();var G=V("Show");n(C,G)},$$slots:{default:!0}})},_=m=>{var C=V("-");n(m,C)};H(de,m=>{e(l),p(()=>e(l).foto)?m(ue):m(_,!1)})}r(W);var $=a(W,2),g=t($);{var j=m=>{B(m,{className:"w-16",severity:"primary",$$events:{click:()=>Dt(e(l).ktp,"KTP")},children:(C,x)=>{P();var G=V("Show");n(C,G)},$$slots:{default:!0}})},X=m=>{var C=V("-");n(m,C)};H(g,m=>{e(l),p(()=>e(l).ktp)?m(j):m(X,!1)})}r($);var _e=a($,2),He=t(_e),Be=t(He);{var ot=m=>{B(m,{className:"w-16",severity:"primary",$$events:{click:()=>Dt(e(l).sim,"SIM")},children:(C,x)=>{P();var G=V("Show");n(C,G)},$$slots:{default:!0}})},Ct=m=>{var C=Xr();n(m,C)};H(Be,m=>{e(l),p(()=>e(l).sim)?m(ot):m(Ct,!1)})}var ht=a(Be,2);{var Ze=m=>{var C=Zr(),x=t(C,!0);r(C),A((G,Pe)=>{hr(C,1,`text-xs ${G??""}`),M(x,Pe)},[()=>(e(l),p(()=>wt(e(l).sim_expired_at).class)),()=>(e(l),p(()=>wt(e(l).sim_expired_at).text))]),n(m,C)};H(ht,m=>{e(l),p(()=>e(l).sim_expired_at)&&m(Ze)})}r(He),r(_e);var ke=a(_e,2),Le=t(ke),De=t(Le);{var et=m=>{B(m,{className:"w-16",severity:"primary",$$events:{click:()=>Dt(e(l).siml,"SIML")},children:(C,x)=>{P();var G=V("Show");n(C,G)},$$slots:{default:!0}})},f=m=>{var C=ea();n(m,C)};H(De,m=>{e(l),p(()=>e(l).siml)?m(et):m(f,!1)})}var ne=a(De,2);{var we=m=>{var C=ta(),x=t(C,!0);r(C),A((G,Pe)=>{hr(C,1,`text-xs ${G??""}`),M(x,Pe)},[()=>(e(l),p(()=>wt(e(l).siml_expired_at).class)),()=>(e(l),p(()=>wt(e(l).siml_expired_at).text))]),n(m,C)};H(ne,m=>{e(l),p(()=>e(l).siml_expired_at)&&m(we)})}r(Le),r(ke);var he=a(ke,2),ft=t(he);B(ft,{severity:"success",$$events:{click:()=>gr(e(l))},children:(m,C)=>{P();var x=V("Edit");n(m,x)},$$slots:{default:!0}});var Nt=a(ft,2);B(Nt,{severity:"danger",$$events:{click:()=>vr(e(l).personel_id)},children:(m,C)=>{P();var x=V("Hapus");n(m,x)},$$slots:{default:!0}}),r(he),A(()=>{M(Q,(e(l),p(()=>e(l).nama_personel))),M(D,(e(l),p(()=>e(l).no_hp))),M(le,(e(l),p(()=>e(l).helper?.nama_personel||"-"))),M(Ke,`${e(l),p(()=>e(l).vt?.no_vt)??""} - ${e(l),p(()=>e(l).vt?.plat)??""}`)}),n(K,se)};H(S,K=>{e(Ve),e(Pt),e(l),p(()=>e(Ve)==="edit"&&e(Pt)===e(l).personel_id)?K(I):K(J,!1)})}r(u),n(s,u)});var be=a(ye);{var ae=s=>{var l=va(),u=t(l),S=t(u);ve(S),r(u);var I=a(u),J=t(I);ve(J),r(I);var K=a(I),se=t(K);{let x=pr(()=>(e(i),p(()=>e(i).def_helper?[String(e(i).def_helper)]:[])));w(se,{class:"w-48",placeholder:"Pilih Helper",get collection(){return e(Z)},onOpenChange:Yt,onInputValueChange:nr,onValueChange:Fe,get value(){return e(x)},multiple:!1,inputBehavior:"autohighlight",openOnClick:!0,children:(G,Pe)=>{var nt=oa(),it=Y(nt);w.Control(it,{$$events:{click:()=>e(Z)?.open?.()},children:(dt,Zt)=>{var Ge=sa(),tt=Y(Ge);w.Input(tt,{});var Ye=a(tt,2);w.Trigger(Ye,{}),n(dt,Ge)},$$slots:{default:!0}});var Xt=a(it,2);_r(Xt,{children:(dt,Zt)=>{w.Positioner(dt,{children:(Ge,tt)=>{w.Content(Ge,{class:"bg-white border border-gray-300 shadow-lg max-h-40 overflow-y-auto",children:(Ye,cr)=>{var gt=ur(),er=Y(gt);Ft(er,1,()=>e(ie),h=>h.personel_id,(h,F)=>{w.Item(h,{get item(){return e(F)},children:(Me,fe)=>{var qe=la(),vt=Y(qe);w.ItemText(vt,{children:(It,Je)=>{P();var Ce=V();A(()=>M(Ce,(e(F),p(()=>e(F).nama_personel)))),n(It,Ce)},$$slots:{default:!0}});var Re=a(vt,2);w.ItemIndicator(Re,{}),n(Me,qe)},$$slots:{default:!0}})}),n(Ye,gt)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),n(G,nt)},$$slots:{default:!0}})}r(K);var z=a(K),Q=t(z);{let x=pr(()=>(e(i),p(()=>e(i).def_vt?[String(e(i).def_vt)]:[])));w(Q,{class:"w-48",placeholder:"Pilih VT",get collection(){return e(_t)},onOpenChange:Kt,onInputValueChange:Ne,onValueChange:kt,get value(){return e(x)},multiple:!1,inputBehavior:"autohighlight",openOnClick:!0,children:(G,Pe)=>{var nt=da(),it=Y(nt);w.Control(it,{$$events:{click:()=>e(_t)?.open?.()},children:(dt,Zt)=>{var Ge=na(),tt=Y(Ge);w.Input(tt,{});var Ye=a(tt,2);w.Trigger(Ye,{}),n(dt,Ge)},$$slots:{default:!0}});var Xt=a(it,2);_r(Xt,{children:(dt,Zt)=>{w.Positioner(dt,{children:(Ge,tt)=>{w.Content(Ge,{class:"bg-white border border-gray-300 shadow-lg max-h-40 overflow-y-auto",children:(Ye,cr)=>{var gt=ur(),er=Y(gt);Ft(er,1,()=>e(Qe),h=>h.vt_id,(h,F)=>{w.Item(h,{get item(){return e(F)},children:(Me,fe)=>{var qe=ia(),vt=Y(qe);w.ItemText(vt,{children:(It,Je)=>{P();var Ce=V();A(()=>M(Ce,`${e(F),p(()=>e(F).no_vt)??""} - ${e(F),p(()=>e(F).plat)??""}`)),n(It,Ce)},$$slots:{default:!0}});var Re=a(vt,2);w.ItemIndicator(Re,{}),n(Me,qe)},$$slots:{default:!0}})}),n(Ye,gt)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),n(G,nt)},$$slots:{default:!0}})}r(z);var N=a(z),D=t(N),T=t(D),le=a(t(T),2),oe=t(le,!0);r(le);var Ke=a(le,2);r(T),r(D),r(N);var W=a(N),de=t(W),ue=t(de),_=a(t(ue),2),$=t(_,!0);r(_);var g=a(_,2);r(ue),r(de),r(W);var j=a(W),X=t(j),_e=t(X),He=t(_e),Be=a(t(He),2),ot=t(Be,!0);r(Be);var Ct=a(Be,2);r(He),r(_e);var ht=a(_e,2),Ze=t(ht);ve(Ze),mt(()=>ce(Ze,()=>e(i).sim_expired_at,x=>L(i,e(i).sim_expired_at=x))),xt(Ze,x=>Et?.(x)),P(2),r(ht),r(X),r(j);var ke=a(j),Le=t(ke),De=t(Le),et=t(De),f=a(t(et),2),ne=t(f,!0);r(f);var we=a(f,2);r(et),r(De);var he=a(De,2),ft=t(he);ve(ft),mt(()=>ce(ft,()=>e(i).siml_expired_at,x=>L(i,e(i).siml_expired_at=x))),xt(ft,x=>Et?.(x)),P(2),r(he),r(Le),r(ke);var Nt=a(ke),m=t(Nt);B(m,{severity:"success",$$events:{click:dr},children:(x,G)=>{P();var Pe=V("Simpan");n(x,Pe)},$$slots:{default:!0}});var C=a(m,2);B(C,{severity:"danger",$$events:{click:Ut},children:(x,G)=>{P();var Pe=V("Batal");n(x,Pe)},$$slots:{default:!0}}),r(Nt),r(l),A(()=>{M(oe,(e(i),p(()=>e(i).foto?.name??"Pilih Foto"))),M($,(e(i),p(()=>e(i).ktp?.name??"Pilih KTP"))),M(ot,(e(i),p(()=>e(i).sim?.name??"Pilih SIM"))),M(ne,(e(i),p(()=>e(i).siml?.name??"Pilih SIML")))}),ce(S,()=>e(i).nama_personel,x=>L(i,e(i).nama_personel=x)),ce(J,()=>e(i).no_hp,x=>L(i,e(i).no_hp=x)),E("change",Ke,x=>Ae(x,"foto")),E("change",g,x=>Ae(x,"ktp")),E("change",Ct,x=>Ae(x,"sim")),E("change",we,x=>Ae(x,"siml")),n(s,l)},O=s=>{var l=ca(),u=t(l),S=t(u);B(S,{severity:"success",$$events:{click:ir},children:(I,J)=>{P();var K=V("+ Tambah");n(I,K)},$$slots:{default:!0}}),r(u),r(l),n(s,l)};H(be,s=>{e(Ve)==="add"?s(ae):s(O,!1)})}r(pe),r(b);var Xe=a(b,2);Er(Xe,{get totalItems(){return e(te),p(()=>e(te).length)},get page(){return e(Se)},set page(s){o(Se,s)},get perPage(){return e(q)},set perPage(s){o(q,s)},$$legacy:!0});var ze=a(Xe,2);{var Oe=s=>{var l=_a(),u=t(l),S=t(u),I=t(S),J=t(I,!0);r(I);var K=a(I,2);r(S);var se=a(S,2),z=t(se);{var Q=D=>{var T=pa();A(()=>At(T,"src",e(Ee))),n(D,T)},N=D=>{var T=ua();A(()=>{At(T,"src",e(Ee)),At(T,"alt",e(Ht))}),n(D,T)};H(z,D=>{e(Ee),p(()=>mr(e(Ee)))?D(Q):D(N,!1)})}r(se),r(u),r(l),A(()=>M(J,e(Ht))),E("click",K,Tt),E("click",u,Sr(function(D){Vr.call(this,rt,D)})),E("click",l,Tt),n(s,l)};H(ze,s=>{e(Ue)&&s(Oe)})}var lt=a(ze,2);{var Mt=s=>{var l=ha(),u=t(l);Br(u,{}),r(l),n(s,l)};H(lt,s=>{e(ee)&&s(Mt)})}r(Qt),A(()=>M($e,e(bt)==="asc"?"▲":"▼")),E("click",ge,fr),n(zt,Qt),Mr()}var ma=$t('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"></path><path d="M8 6V4h8v2"></path><path d="M19 6l-1 14H6L5 6"></path></svg>'),xa=$t('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"></path><path d="M8 6V4h8v2"></path><path d="M19 6l-1 14H6L5 6"></path></svg>'),$a=$t('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"></path><path d="M8 6V4h8v2"></path><path d="M19 6l-1 14H6L5 6"></path></svg>'),ya=$t('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"></path><path d="M8 6V4h8v2"></path><path d="M19 6l-1 14H6L5 6"></path></svg>'),ba=y(`<td><input class="input w-full"/></td> <td><input class="input w-full"/></td> <td><div class="flex flex-col items-center gap-1 mb-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                    border rounded-lg cursor-pointer
                                    text-sm text-gray-600 hover:bg-gray-100"><span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label> <!></div></td> <td><div class="flex flex-col items-center gap-1 mb-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                    border rounded-lg cursor-pointer
                                    text-sm text-gray-600 hover:bg-gray-100"><span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label> <!></div></td> <td><div class="flex flex-col items-center gap-1"><div class="flex items-center gap-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                        border rounded-lg cursor-pointer
                                        text-sm text-gray-600 hover:bg-gray-100"><span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label> <!></div> <div class="relative"><input type="text" class="input w-36 cursor-pointer" readonly=""/> <svg class="absolute right-2 top-1/2 -translate-y-1/2 w-5 h-5 text-black cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></div></td> <td><div class="flex flex-col items-center gap-1"><div class="flex items-center gap-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                        border rounded-lg cursor-pointer
                                        text-sm text-gray-600 hover:bg-gray-100"><span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label> <!></div> <div class="relative"><input type="text" class="input w-36 cursor-pointer" readonly=""/> <svg class="absolute right-2 top-1/2 -translate-y-1/2 w-5 h-5 text-black cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></div></td> <td class="space-x-2 whitespace-nowrap"><!> <!></td>`,1),ka=y("<span>-</span>"),wa=y("<span> </span>"),Pa=y("<span>-</span>"),Ma=y("<span> </span>"),Ca=y('<td> </td> <td> </td> <td><!></td> <td><!></td> <td><div class="flex flex-col gap-1"><!> <!></div></td> <td><div class="flex flex-col gap-1"><!> <!></div></td> <td class="space-x-2"><!> <!></td>',1),Ia=y("<tr><!></tr>"),Sa=y(`<tr><td><input class="input w-full"/></td><td><input class="input w-full"/></td><td><div class="flex flex-col items-center gap-1 mb-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                border rounded-lg cursor-pointer
                                text-sm text-gray-600 hover:bg-gray-100"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M12 12v9M8 12l4-4 4 4"></path></svg> <span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label></div></td><td><div class="flex flex-col items-center gap-1 mb-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                border rounded-lg cursor-pointer
                                text-sm text-gray-600 hover:bg-gray-100"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M12 12v9M8 12l4-4 4 4"></path></svg> <span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label></div></td><td><div class="flex flex-col items-center gap-1"><div class="flex items-center gap-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                    border rounded-lg cursor-pointer
                                    text-sm text-gray-600 hover:bg-gray-100"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M12 12v9M8 12l4-4 4 4"></path></svg> <span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label></div> <div class="relative"><input type="text" class="input w-36 cursor-pointer" readonly=""/> <svg class="absolute right-2 top-1/2 -translate-y-1/2 w-5 h-5 text-black cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></div></td><td><div class="flex flex-col items-center gap-1"><div class="flex items-center gap-1"><label class="inline-flex items-center gap-2 px-3 py-1.5 w-32
                                    border rounded-lg cursor-pointer
                                    text-sm text-gray-600 hover:bg-gray-100"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M12 12v9M8 12l4-4 4 4"></path></svg> <span class="flex-1 truncate"> </span> <input type="file" accept="image/*" class="hidden"/></label></div> <div class="relative"><input type="text" class="input w-36 cursor-pointer" readonly=""/> <svg class="absolute right-2 top-1/2 -translate-y-1/2 w-5 h-5 text-black cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></div></td><td class="space-x-2 whitespace-nowrap"><!> <!></td></tr>`),Va=y('<tr><td colspan="7"><!></td></tr>'),Ha=y('<iframe class="w-full h-full rounded-xl border"></iframe>'),Ba=y('<img class="max-w-full max-h-full object-contain rounded-xl"/>'),La=y('<div class="fixed inset-0 bg-black/60 flex items-center justify-center z-50"><div class="bg-white rounded-2xl w-[70vw] h-[70vh] p-4 flex flex-col"><div class="flex justify-between items-center mb-3"><h2 class="font-semibold text-lg"> </h2> <button class="text-xl hover:opacity-70">✕</button></div> <div class="flex-1 overflow-auto flex items-center justify-center"><!></div></div></div>'),Da=y('<div class="fixed inset-0 bg-white/70 flex items-center justify-center z-50"><!></div>'),Ta=y('<div class="table-wrap mb-4"><p class="text-2xl font-semibold mb-4">Helper</p> <div class="flex items-center justify-between gap-3 mb-3"><!></div> <table class="table caption-bottom"><thead><tr><th class="cursor-pointer select-none">Nama <span class="ml-1 text-xs opacity-60"> </span></th><th>No. Handphone</th><th>Foto</th><th>KTP</th><th>SIM</th><th>SIML</th><th>Action</th></tr></thead><tbody class="[&amp;>tr:hover:preset-tonal-primary]"><!><!></tbody></table> <!> <!> <!></div>');function ja(zt,rt){wr(rt,!1);const We=k(),at=k(),je=k(),yt=k(),Ot=k();let Z=k(!1),ee=k("asc");const bt=()=>{o(ee,e(ee)==="asc"?"desc":"asc")},fr=(c,v="asc")=>[...c].sort((b,U)=>{const R=(b?.nama_personel??"").toLowerCase(),ge=(U?.nama_personel??"").toLowerCase();return R<ge?v==="asc"?-1:1:R>ge?v==="asc"?1:-1:0});let pt=k(""),Ie=k(1),Se=k(10),q=k([]),te=k(!1),Ue=k(""),Ee=k("");const Ht=async()=>{o(Z,!0);try{const c=await xe.getHelpers();o(q,c.helpers),console.log("helpers:",e(q))}catch(c){console.error("Error fetching helpers:",c)}o(Z,!1)},st=async()=>{o(Z,!0);try{const c=await xe.getLastHelper();o(q,[...e(q),c.helper])}catch(c){console.error("Error fetching last helper:",c)}o(Z,!1)},Qe=async c=>{o(Z,!0);try{const v=await xe.getHelperByID({personel_id:c});o(q,e(q).map(b=>b.personel_id===c?v.helper:b))}catch(v){console.error("Error fetching helper by ID:",v)}o(Z,!1)};function ut(c,v){o(Ue,`${Lr}/${c}`),o(Ee,v),o(te,!0)}function _t(){o(te,!1),o(Ue,""),o(Ee,"")}function Kt(c){if(!c)return null;const v=new Date(c),b=String(v.getDate()).padStart(2,"0"),U=String(v.getMonth()+1).padStart(2,"0"),R=v.getFullYear();return`${b}-${U}-${R}`}function Bt(c){if(!c)return null;const v=new Date(c),b=new Date;return b.setHours(0,0,0,0),v>=b?{text:`Aktif sampai ${Kt(c)}`,class:"text-green-600"}:{text:`Nonaktif sejak ${Kt(c)}`,class:"text-red-600"}}let Ne=k(null),kt=k(null),d=k({nama_personel:"",no_hp:"",foto:"",ktp:"",sim:"",siml:"",sim_expired_at:"",siml_expired_at:"",is_driver:0});function ie(){o(d,{nama_personel:"",no_hp:"",foto:"",ktp:"",sim:"",siml:"",sim_expired_at:"",siml_expired_at:"",is_driver:0})}function lr(){ie(),o(Ne,"add")}function or(c){o(Ne,"edit"),o(kt,c.personel_id),o(d,{...c})}function Gt(){o(Ne,null),o(kt,null),ie()}async function Yt(){if(o(Z,!0),e(Ne)==="add")try{console.log(e(d)),await xe.createPersonel(e(d)),await st()}catch(c){console.error("Error creating personel:",c),Te?.error("Gagal menambahkan helper")}finally{Te?.success("Helper berhasil ditambahkan")}if(e(Ne)==="edit")try{const c={...e(d)};console.log(JSON.stringify(c,null,2));const v=await xe.updatePersonel(c);await Qe(e(d).personel_id)}catch(c){console.error("Error updating personel:",c),Te?.error("Gagal memperbarui helper")}finally{Te?.success("Helper berhasil diperbarui")}Gt(),o(Z,!1)}async function nr(c){if(await Dr("Hapus data ini?")){o(Z,!0);try{await xe.deletePersonel({personel_id:c}),o(q,e(q).filter(b=>b.personel_id!==c))}catch(b){console.error("Error deleting personel:",b),Te?.error("Gagal menghapus helper")}finally{Te?.success("Helper berhasil dihapus")}o(Z,!1)}}function Fe(c,v){const b=c.target.files[0];b&&L(d,e(d)[v]=b)}function qt(c){return c?c.toLowerCase().endsWith(".pdf"):!1}function Lt(c,v={}){const b=Tr(c,{dateFormat:"Y-m-d",altInput:!0,altFormat:"d-m-Y",allowInput:!1,...v});return{destroy(){b.destroy()}}}Cr(()=>{Ht()}),me(()=>(e(q),e(pt)),()=>{o(We,e(q).filter(c=>(c?.nama_personel??"").toLowerCase().includes((e(pt)??"").toLowerCase())))}),me(()=>(e(We),e(ee)),()=>{o(at,fr(e(We),e(ee)))}),me(()=>e(pt),()=>{e(pt)!==void 0&&o(Ie,1)}),me(()=>(e(Ie),e(Se)),()=>{o(je,(e(Ie)-1)*e(Se))}),me(()=>(e(je),e(Se)),()=>{o(yt,e(je)+e(Se))}),me(()=>(e(at),e(je),e(yt)),()=>{o(Ot,e(at).slice(e(je),e(yt)))}),Pr(),Hr();var Rt=Ta(),Jt=a(t(Rt),2),Dt=t(Jt);jr(Dt,{placeholder:"Cari nama helper...",get value(){return e(pt)},set value(c){o(pt,c)},$$legacy:!0}),r(Jt);var Tt=a(Jt,2),jt=t(Tt),wt=t(jt),Ve=t(wt),Pt=a(t(Ve)),i=t(Pt,!0);r(Pt),r(Ve),P(6),r(wt),r(jt);var Wt=a(jt),ir=t(Wt);Ft(ir,1,()=>e(Ot),Ir,(c,v)=>{var b=Ia(),U=t(b);{var R=re=>{var $e=ba(),pe=Y($e),ye=t(pe);ve(ye),r(pe);var be=a(pe,2),ae=t(be);ve(ae),r(be);var O=a(be,2),Xe=t(O),ze=t(Xe),Oe=t(ze),lt=t(Oe,!0);r(Oe);var Mt=a(Oe,2);r(ze);var s=a(ze,2);{var l=f=>{B(f,{severity:"danger",$$events:{click:()=>L(d,e(d).foto=null)},children:(ne,we)=>{var he=ma();n(ne,he)},$$slots:{default:!0}})};H(s,f=>{e(d),p(()=>e(d).foto!=null)&&f(l)})}r(Xe),r(O);var u=a(O,2),S=t(u),I=t(S),J=t(I),K=t(J,!0);r(J);var se=a(J,2);r(I);var z=a(I,2);{var Q=f=>{B(f,{severity:"danger",$$events:{click:()=>L(d,e(d).ktp=null)},children:(ne,we)=>{var he=xa();n(ne,he)},$$slots:{default:!0}})};H(z,f=>{e(d),p(()=>e(d).ktp!=null)&&f(Q)})}r(S),r(u);var N=a(u,2),D=t(N),T=t(D),le=t(T),oe=t(le),Ke=t(oe,!0);r(oe);var W=a(oe,2);r(le);var de=a(le,2);{var ue=f=>{B(f,{severity:"danger",$$events:{click:()=>L(d,e(d).sim=null)},children:(ne,we)=>{var he=$a();n(ne,he)},$$slots:{default:!0}})};H(de,f=>{e(d),p(()=>e(d).sim!=null)&&f(ue)})}r(T);var _=a(T,2),$=t(_);ve($),mt(()=>ce($,()=>e(d).sim_expired_at,f=>L(d,e(d).sim_expired_at=f))),xt($,f=>Lt?.(f)),P(2),r(_),r(D),r(N);var g=a(N,2),j=t(g),X=t(j),_e=t(X),He=t(_e),Be=t(He,!0);r(He);var ot=a(He,2);r(_e);var Ct=a(_e,2);{var ht=f=>{B(f,{severity:"danger",$$events:{click:()=>L(d,e(d).siml=null)},children:(ne,we)=>{var he=ya();n(ne,he)},$$slots:{default:!0}})};H(Ct,f=>{e(d),p(()=>e(d).siml!=null)&&f(ht)})}r(X);var Ze=a(X,2),ke=t(Ze);ve(ke),mt(()=>ce(ke,()=>e(d).siml_expired_at,f=>L(d,e(d).siml_expired_at=f))),xt(ke,f=>Lt?.(f)),P(2),r(Ze),r(j),r(g);var Le=a(g,2),De=t(Le);B(De,{severity:"success",$$events:{click:Yt},children:(f,ne)=>{P();var we=V("Simpan");n(f,we)},$$slots:{default:!0}});var et=a(De,2);B(et,{severity:"danger",$$events:{click:Gt},children:(f,ne)=>{P();var we=V("Batal");n(f,we)},$$slots:{default:!0}}),r(Le),A(()=>{M(lt,(e(d),p(()=>e(d).foto??"Pilih Foto"))),M(K,(e(d),p(()=>e(d).ktp??"Pilih KTP"))),M(Ke,(e(d),p(()=>e(d).sim??"Pilih SIM"))),M(Be,(e(d),p(()=>e(d).siml??"Pilih SIML")))}),ce(ye,()=>e(d).nama_personel,f=>L(d,e(d).nama_personel=f)),ce(ae,()=>e(d).no_hp,f=>L(d,e(d).no_hp=f)),E("change",Mt,f=>Fe(f,"foto")),E("change",se,f=>Fe(f,"ktp")),E("change",W,f=>Fe(f,"sim")),E("change",ot,f=>Fe(f,"siml")),n(re,$e)},ge=re=>{var $e=Ca(),pe=Y($e),ye=t(pe,!0);r(pe);var be=a(pe,2),ae=t(be,!0);r(be);var O=a(be,2),Xe=t(O);{var ze=_=>{B(_,{className:"w-16",severity:"primary",$$events:{click:()=>ut(e(v).foto,"Foto")},children:($,g)=>{P();var j=V("Show");n($,j)},$$slots:{default:!0}})},Oe=_=>{var $=V("-");n(_,$)};H(Xe,_=>{e(v),p(()=>e(v).foto)?_(ze):_(Oe,!1)})}r(O);var lt=a(O,2),Mt=t(lt);{var s=_=>{B(_,{className:"w-16",severity:"primary",$$events:{click:()=>ut(e(v).ktp,"KTP")},children:($,g)=>{P();var j=V("Show");n($,j)},$$slots:{default:!0}})},l=_=>{var $=V("-");n(_,$)};H(Mt,_=>{e(v),p(()=>e(v).ktp)?_(s):_(l,!1)})}r(lt);var u=a(lt,2),S=t(u),I=t(S);{var J=_=>{B(_,{className:"w-16",severity:"primary",$$events:{click:()=>ut(e(v).sim,"SIM")},children:($,g)=>{P();var j=V("Show");n($,j)},$$slots:{default:!0}})},K=_=>{var $=ka();n(_,$)};H(I,_=>{e(v),p(()=>e(v).sim)?_(J):_(K,!1)})}var se=a(I,2);{var z=_=>{var $=wa(),g=t($,!0);r($),A((j,X)=>{hr($,1,`text-xs ${j??""}`),M(g,X)},[()=>(e(v),p(()=>Bt(e(v).sim_expired_at).class)),()=>(e(v),p(()=>Bt(e(v).sim_expired_at).text))]),n(_,$)};H(se,_=>{e(v),p(()=>e(v).sim_expired_at)&&_(z)})}r(S),r(u);var Q=a(u,2),N=t(Q),D=t(N);{var T=_=>{B(_,{className:"w-16",severity:"primary",$$events:{click:()=>ut(e(v).siml,"SIML")},children:($,g)=>{P();var j=V("Show");n($,j)},$$slots:{default:!0}})},le=_=>{var $=Pa();n(_,$)};H(D,_=>{e(v),p(()=>e(v).siml)?_(T):_(le,!1)})}var oe=a(D,2);{var Ke=_=>{var $=Ma(),g=t($,!0);r($),A((j,X)=>{hr($,1,`text-xs ${j??""}`),M(g,X)},[()=>(e(v),p(()=>Bt(e(v).siml_expired_at).class)),()=>(e(v),p(()=>Bt(e(v).siml_expired_at).text))]),n(_,$)};H(oe,_=>{e(v),p(()=>e(v).siml_expired_at)&&_(Ke)})}r(N),r(Q);var W=a(Q,2),de=t(W);B(de,{severity:"success",$$events:{click:()=>or(e(v))},children:(_,$)=>{P();var g=V("Edit");n(_,g)},$$slots:{default:!0}});var ue=a(de,2);B(ue,{severity:"danger",$$events:{click:()=>nr(e(v).personel_id)},children:(_,$)=>{P();var g=V("Hapus");n(_,g)},$$slots:{default:!0}}),r(W),A(()=>{M(ye,(e(v),p(()=>e(v).nama_personel))),M(ae,(e(v),p(()=>e(v).no_hp)))}),n(re,$e)};H(U,re=>{e(Ne),e(kt),e(v),p(()=>e(Ne)==="edit"&&e(kt)===e(v).personel_id)?re(R):re(ge,!1)})}r(b),n(c,b)});var gr=a(ir);{var Ut=c=>{var v=Sa(),b=t(v),U=t(b);ve(U),r(b);var R=a(b),ge=t(R);ve(ge),r(R);var re=a(R),$e=t(re),pe=t($e),ye=a(t(pe),2),be=t(ye,!0);r(ye);var ae=a(ye,2);r(pe),r($e),r(re);var O=a(re),Xe=t(O),ze=t(Xe),Oe=a(t(ze),2),lt=t(Oe,!0);r(Oe);var Mt=a(Oe,2);r(ze),r(Xe),r(O);var s=a(O),l=t(s),u=t(l),S=t(u),I=a(t(S),2),J=t(I,!0);r(I);var K=a(I,2);r(S),r(u);var se=a(u,2),z=t(se);ve(z),mt(()=>ce(z,()=>e(d).sim_expired_at,g=>L(d,e(d).sim_expired_at=g))),xt(z,g=>Lt?.(g)),P(2),r(se),r(l),r(s);var Q=a(s),N=t(Q),D=t(N),T=t(D),le=a(t(T),2),oe=t(le,!0);r(le);var Ke=a(le,2);r(T),r(D);var W=a(D,2),de=t(W);ve(de),mt(()=>ce(de,()=>e(d).siml_expired_at,g=>L(d,e(d).siml_expired_at=g))),xt(de,g=>Lt?.(g)),P(2),r(W),r(N),r(Q);var ue=a(Q),_=t(ue);B(_,{severity:"success",$$events:{click:Yt},children:(g,j)=>{P();var X=V("Simpan");n(g,X)},$$slots:{default:!0}});var $=a(_,2);B($,{severity:"danger",$$events:{click:Gt},children:(g,j)=>{P();var X=V("Batal");n(g,X)},$$slots:{default:!0}}),r(ue),r(v),A(()=>{M(be,(e(d),p(()=>e(d).foto?.name??"Pilih Foto"))),M(lt,(e(d),p(()=>e(d).ktp?.name??"Pilih KTP"))),M(J,(e(d),p(()=>e(d).sim?.name??"Pilih SIM"))),M(oe,(e(d),p(()=>e(d).siml?.name??"Pilih SIML")))}),ce(U,()=>e(d).nama_personel,g=>L(d,e(d).nama_personel=g)),ce(ge,()=>e(d).no_hp,g=>L(d,e(d).no_hp=g)),E("change",ae,g=>Fe(g,"foto")),E("change",Mt,g=>Fe(g,"ktp")),E("change",K,g=>Fe(g,"sim")),E("change",Ke,g=>Fe(g,"siml")),n(c,v)},dr=c=>{var v=Va(),b=t(v),U=t(b);B(U,{severity:"success",$$events:{click:lr},children:(R,ge)=>{P();var re=V("+ Tambah");n(R,re)},$$slots:{default:!0}}),r(b),r(v),n(c,v)};H(gr,c=>{e(Ne)==="add"?c(Ut):c(dr,!1)})}r(Wt),r(Tt);var vr=a(Tt,2);Er(vr,{get totalItems(){return e(q),p(()=>e(q).length)},get page(){return e(Ie)},set page(c){o(Ie,c)},get perPage(){return e(Se)},set perPage(c){o(Se,c)},$$legacy:!0});var Ae=a(vr,2);{var mr=c=>{var v=La(),b=t(v),U=t(b),R=t(U),ge=t(R,!0);r(R);var re=a(R,2);r(U);var $e=a(U,2),pe=t($e);{var ye=ae=>{var O=Ha();A(()=>At(O,"src",e(Ue))),n(ae,O)},be=ae=>{var O=Ba();A(()=>{At(O,"src",e(Ue)),At(O,"alt",e(Ee))}),n(ae,O)};H(pe,ae=>{e(Ue),p(()=>qt(e(Ue)))?ae(ye):ae(be,!1)})}r($e),r(b),r(v),A(()=>M(ge,e(Ee))),E("click",re,_t),E("click",b,Sr(function(ae){Vr.call(this,rt,ae)})),E("click",v,_t),n(c,v)};H(Ae,c=>{e(te)&&c(mr)})}var Et=a(Ae,2);{var Qt=c=>{var v=Da(),b=t(v);Br(b,{}),r(v),n(c,v)};H(Et,c=>{e(Z)&&c(Qt)})}r(Rt),A(()=>M(i,e(ee)==="asc"?"▲":"▼")),E("click",Ve,bt),n(zt,Rt),Mr()}var Ea=y('<div class="flex flex-col gap-8"><!> <!></div>');function ss(zt){var rt=Ea(),We=t(rt);ga(We,{});var at=a(We,2);ja(at,{}),r(rt),n(zt,rt)}export{ss as component};
