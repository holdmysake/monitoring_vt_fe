import"../chunks/DsnmJJEf.js";import"../chunks/B-aUsau7.js";import{c as yr,o as _r}from"../chunks/D6pxDlqU.js";import{p as ht,f as _,b as ft,aW as Vr,c as o,s,r,t as N,j as br,u as p,g as e,m,d as a,l as Be,a as kr,n as ee}from"../chunks/DZj3V7hs.js";import{c as ge,a as c,f as b,t as De,b as $r}from"../chunks/Cmeh_zQv.js";import{i as ze}from"../chunks/C_Z-GkL4.js";import{b as or}from"../chunks/BAXbHwTh.js";import{i as xt}from"../chunks/B2kuW2zI.js";import{f as sr}from"../chunks/DIg2_NEP.js";import{s as nr,r as Sr,c as Ir,a as Qe,n as Te,L as Cr,B as Mr}from"../chunks/BwiHho8M.js";import{e as mt}from"../chunks/H2sK6pkz.js";import{p as ae}from"../chunks/CUQbSg7J.js";import{s as x}from"../chunks/6nlo_wlY.js";import{e as fe,i as fr}from"../chunks/DUh4gHIz.js";import{s as Pr}from"../chunks/zgFPYRNL.js";import{C as g,P as xr,u as He}from"../chunks/kH_UQqMM.js";import{B as Tr}from"../chunks/BjJbZ4yg.js";import{s as Br}from"../chunks/BujHi0dY.js";var Dr=b('<div class="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200 svelte-1vv2w51" role="dialog" aria-modal="true" aria-labelledby="pdf-preview-title"><div class="bg-white rounded-2xl w-full max-w-6xl h-[90vh] flex flex-col shadow-2xl animate-in zoom-in-95 duration-200 svelte-1vv2w51"><div class="flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-linear-to-r from-blue-50 to-indigo-50"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-xl bg-linear-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 id="pdf-preview-title" class="text-lg font-bold text-gray-900">Preview Surat Jalan</h2> <p class="text-sm text-gray-500">Dokumen PDF</p></div></div> <div class="flex items-center gap-2"><a download="" class="p-2 rounded-lg hover:bg-white/50 transition-colors group" title="Download PDF"><svg class="w-5 h-5 text-gray-600 group-hover:text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg></a> <a target="_blank" rel="noopener noreferrer" class="p-2 rounded-lg hover:bg-white/50 transition-colors group" title="Buka di tab baru"><svg class="w-5 h-5 text-gray-600 group-hover:text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg></a> <button class="p-2 rounded-lg hover:bg-red-50 transition-colors group" title="Tutup"><svg class="w-5 h-5 text-gray-600 group-hover:text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <div class="flex-1 overflow-hidden bg-gray-100"><iframe class="w-full h-full border-none" title="PDF Preview"></iframe></div></div></div>');function Hr(ke,k){ht(k,!1);let j=ae(k,"show",8,!1),W=ae(k,"pdfUrl",8,""),w=ae(k,"onClose",8,()=>{});const te=I=>{I.key==="Escape"&&j()&&w()()},oe=I=>{I.target===I.currentTarget&&w()()};xt();var G=ge();mt("keydown",Vr,te);var F=_(G);{var H=I=>{var $=Dr(),A=o($),C=o(A),z=s(o(C),2),J=o(z),V=s(J,2),R=s(V,2);r(z),r(C);var M=s(C,2),E=o(M);r(M),r(A),r($),N(()=>{nr(J,"href",W()),nr(V,"href",W()),nr(E,"src",W())}),mt("click",R,function(...ue){w()?.apply(this,ue)}),mt("click",$,oe),c(I,$)};ze(F,I=>{j()&&I(H)})}c(ke,G),ft()}var zr=b('<div class="border-t border-gray-200 pt-3"><div class="text-xs text-gray-500 mb-2 font-medium">Shift 2</div> <div class="grid grid-cols-2 gap-2"><div class="text-sm text-gray-700"><span class="text-gray-500">Driver:</span> </div> <div class="text-sm text-gray-700"><span class="text-gray-500">Helper:</span> </div></div></div>'),Lr=b('<div class="flex items-center gap-2 text-xs"><span class="inline-flex items-center px-2 py-0.5 rounded font-medium bg-blue-100 text-blue-800 min-w-12"> </span> <span class="text-gray-900"> </span></div>'),Or=b('<div class="mt-2 pt-2 border-t border-gray-100"><div class="text-xs text-gray-500 mb-1">Personel Trip:</div> <div class="space-y-1"></div></div>'),jr=b('<div class="border border-gray-200 rounded-lg p-3 hover:bg-gray-50 transition-colors"><div class="flex items-center justify-between mb-2"><div class="text-xs font-semibold text-gray-900"></div> <div class="text-xs text-gray-500"> </div></div> <div class="grid grid-cols-2 gap-2 text-xs"><div><span class="text-gray-500">Loading:</span> <span class="font-medium text-gray-900"> </span></div> <div><span class="text-gray-500">Unloading:</span> <span class="font-medium text-gray-900"> </span></div> <div><span class="text-gray-500">Jam Loading:</span> <span class="font-medium text-gray-900"> </span></div> <div><span class="text-gray-500">Jam Unloading:</span> <span class="font-medium text-gray-900"> </span></div> <div class="col-span-2"><span class="text-gray-500">No. Segel:</span> <span class="font-medium text-gray-900"> </span></div></div> <!></div>'),Fr=b('<div class="space-y-3 max-h-64 overflow-y-auto pr-2"></div>'),Ar=b('<div class="text-center py-8 text-gray-500"><svg class="w-12 h-12 mx-auto mb-2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg> <p class="text-sm">Belum ada data trip</p></div>'),Rr=b('<tr class="bg-gray-50"><td colspan="7" class="px-6 py-4"><div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="space-y-4"><div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200"><h4 class="text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2"><svg class="w-4 h-4 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Waktu Operasional</h4> <div class="grid grid-cols-2 gap-3"><div><div class="text-xs text-gray-500 mb-1">Keluar VT</div> <div class="text-sm font-medium text-gray-900"> </div></div> <div><div class="text-xs text-gray-500 mb-1">Kembali VT</div> <div class="text-sm font-medium text-gray-900"> </div></div></div></div> <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200"><h4 class="text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2"><svg class="w-4 h-4 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> Personel</h4> <div class="space-y-3"><div class="grid grid-cols-2 gap-3"><div><div class="text-xs text-gray-500 mb-1">Supervisor</div> <div class="text-sm font-medium text-gray-900"> </div></div> <div><div class="text-xs text-gray-500 mb-1">BBM</div> <div class="text-sm font-medium text-gray-900"> </div></div></div> <div class="border-t border-gray-200 pt-3"><div class="text-xs text-gray-500 mb-2 font-medium">Shift 1</div> <div class="grid grid-cols-2 gap-2"><div class="text-sm text-gray-700"><span class="text-gray-500">Driver:</span> </div> <div class="text-sm text-gray-700"><span class="text-gray-500">Helper:</span> </div></div></div> <!></div></div></div> <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200"><h4 class="text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2"><svg class="w-4 h-4 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg> </h4> <!></div></div></td></tr>'),Ur=b('<tr class="hover:bg-blue-50/50 transition-colors"><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center gap-2"><button class="p-1 hover:bg-gray-100 rounded transition-colors"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button> <div><div class="text-sm font-semibold text-gray-900"> </div> <div class="text-xs text-gray-500"> </div></div></div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center gap-2"><div class="w-8 h-8 rounded-lg bg-emerald-100 flex items-center justify-center"><svg class="w-5 h-5 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></div> <div><div class="text-sm font-medium text-gray-900"> </div> <div class="text-xs text-gray-500"> </div></div></div></td><td class="px-6 py-4"><div class="text-sm text-gray-900"> </div> <div class="text-xs text-gray-500"> </div></td><td class="px-6 py-4 text-center"><span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"> </span></td><td class="px-6 py-4 text-center"><button class="inline-flex items-center gap-1 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors" title="Preview PDF"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> PDF</button></td></tr> <!>',1),Jr=b('<div class="text-center py-12"><svg class="w-16 h-16 mx-auto mb-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-gray-500 text-lg font-medium mb-2">Tidak ada data surat jalan</p> <p class="text-gray-400 text-sm">Pilih range tanggal untuk melihat data</p></div>'),Yr=b('<div class="bg-white rounded-xl shadow-sm overflow-hidden"><div class="px-6 py-4 border-b border-gray-200 bg-linear-to-r from-blue-50 to-indigo-50"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-xl bg-linear-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div> <div><h2 class="text-lg font-bold text-gray-900">Daftar Surat Jalan</h2> <p class="text-sm text-gray-500"> </p></div></div></div> <div class="overflow-x-auto"><table class="w-full"><thead class="bg-gray-50 border-b border-gray-200"><tr><th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">No. Surat Jalan</th><th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Tanggal</th><th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Vacuum Truck</th><th class="px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider">Rute</th><th class="px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider">Trip</th><th class="px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider">Aksi</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table> <!></div></div>');function qr(ke,k){ht(k,!1);let j=ae(k,"surjals",24,()=>[]),W=ae(k,"onPreview",8,()=>{}),w=m(new Set);const te=h=>{e(w).has(h)?e(w).delete(h):e(w).add(h),a(w,e(w))},oe=h=>{const n=new Date(h),U=String(n.getUTCDate()).padStart(2,"0"),Q=String(n.getUTCMonth()+1).padStart(2,"0"),f=n.getUTCFullYear();return`${U}-${Q}-${f}`},G=h=>{const n=new Date(h),U=String(n.getUTCHours()).padStart(2,"0"),Q=String(n.getUTCMinutes()).padStart(2,"0");return`${U}:${Q}`},F=(h,n)=>h.find(U=>U.role===n)?.personel?.nama_personel||"-",H=h=>[...h].sort((n,U)=>{const Q={driver:1,helper:2,op_loading:3,op_unloading:4};return(Q[n.role]||99)-(Q[U.role]||99)}),I=h=>({driver:"Driver",helper:"Helper",op_loading:"Operator Loading",op_unloading:"Operator Unloading"})[h]||h;xt();var $=Yr(),A=o($),C=o(A),z=s(o(C),2),J=s(o(z),2),V=o(J);r(J),r(z),r(C),r(A);var R=s(A,2),M=o(R),E=s(o(M));fe(E,5,j,fr,(h,n)=>{var U=Ur(),Q=_(U),f=o(Q),L=o(f),Y=o(L),se=o(Y);r(Y);var Le=s(Y,2),X=o(Le),re=o(X,!0);r(X);var P=s(X,2),K=o(P,!0);r(P),r(Le),r(L),r(f);var q=s(f),Oe=o(q),ne=o(Oe,!0);r(Oe),r(q);var le=s(q),xe=o(le),_e=s(o(xe),2),je=o(_e),_t=o(je,!0);r(je);var Se=s(je,2),Fe=o(Se,!0);r(Se),r(_e),r(xe),r(le);var ie=s(le),Z=o(ie),$e=o(Z,!0);r(Z);var be=s(Z,2),lr=o(be);r(be),r(ie);var bt=s(ie),At=o(bt),Xe=o(At);r(At),r(bt);var Ie=s(bt),Ze=o(Ie);r(Ie),r(Q);var ir=s(Q,2);{var dr=et=>{var me=Rr(),he=o(me),Ae=o(he),wt=o(Ae),yt=o(wt),Rt=s(o(yt),2),we=o(Rt),Ce=s(o(we),2),Re=o(Ce);r(Ce),r(we);var kt=s(we,2),Ut=s(o(kt),2),vr=o(Ut);r(Ut),r(kt),r(Rt),r(yt);var Jt=s(yt,2),Yt=s(o(Jt),2),$t=o(Yt),it=o($t),Ye=s(o(it),2),tt=o(Ye,!0);r(Ye),r(it);var qe=s(it,2),Ee=s(o(qe),2),dt=o(Ee);r(Ee),r(qe),r($t);var Ke=s($t,2),qt=s(o(Ke),2),Ct=o(qt),cr=s(o(Ct));r(Ct);var ye=s(Ct,2),Et=s(o(ye));r(ye),r(qt),r(Ke);var Vt=s(Ke,2);{var Kt=pe=>{var de=zr(),Me=s(o(de),2),S=o(Me),Ne=s(o(S));r(S);var Pe=s(S,2),Ue=s(o(Pe));r(Pe),r(Me),r(de),N((at,We)=>{x(Ne,` ${at??""}`),x(Ue,` ${We??""}`)},[()=>(e(n),p(()=>F(e(n).personel_surat_jalan,"driver2"))),()=>(e(n),p(()=>F(e(n).personel_surat_jalan,"helper2")))]),c(pe,de)};ze(Vt,pe=>{e(n),p(()=>F(e(n).personel_surat_jalan,"driver2")!=="-")&&pe(Kt)})}r(Yt),r(Jt),r(wt);var St=s(wt,2),rt=o(St),It=s(o(rt));r(rt);var Nt=s(rt,2);{var ur=pe=>{var de=Fr();fe(de,5,()=>(e(n),p(()=>e(n).trip_surat_jalan)),fr,(Me,S,Ne)=>{var Pe=jr(),Ue=o(Pe),at=o(Ue);at.textContent=`Trip #${Ne+1}`;var We=s(at,2),pr=o(We,!0);r(We),r(Ue);var vt=s(Ue,2),Mt=o(vt),ct=s(o(Mt),2),Gt=o(ct);r(ct),r(Mt);var ot=s(Mt,2),Qt=s(o(ot),2),Xt=o(Qt);r(Qt),r(ot);var Pt=s(ot,2),ut=s(o(Pt),2),Zt=o(ut,!0);r(ut),r(Pt);var st=s(Pt,2),Tt=s(o(st),2),Bt=o(Tt,!0);r(Tt),r(st);var Dt=s(st,2),er=s(o(Dt),2),Ht=o(er,!0);r(er),r(Dt),r(vt);var tr=s(vt,2);{var zt=pt=>{var nt=Or(),rr=s(o(nt),2);fe(rr,5,()=>(e(S),p(()=>H(e(S).personel_trip))),fr,(gr,Je)=>{var Lt=ge(),Ot=_(Lt);{var mr=jt=>{var gt=Lr(),Ft=o(gt),hr=o(Ft,!0);r(Ft);var ar=s(Ft,2),t=o(ar,!0);r(ar),r(gt),N(l=>{x(hr,l),x(t,(e(Je),p(()=>e(Je).personel.nama_personel)))},[()=>(e(Je),p(()=>I(e(Je).role)))]),c(jt,gt)};ze(Ot,jt=>{e(Je),p(()=>e(Je).personel)&&jt(mr)})}c(gr,Lt)}),r(rr),r(nt),c(pt,nt)};ze(tr,pt=>{e(S),p(()=>e(S).personel_trip&&e(S).personel_trip.length>0)&&pt(zt)})}r(Pe),N(()=>{x(pr,(e(S),p(()=>e(S).trip_id))),x(Gt,`${e(S),p(()=>e(S).net_loading)??""} BBL`),x(Xt,`${e(S),p(()=>e(S).net_unloading)??""} BBL`),x(Zt,(e(S),p(()=>e(S).jam_loading))),x(Bt,(e(S),p(()=>e(S).jam_unloading))),x(Ht,(e(S),p(()=>e(S).no_segel)))}),c(Me,Pe)}),r(de),c(pe,de)},Wt=pe=>{var de=Ar();c(pe,de)};ze(Nt,pe=>{e(n),p(()=>e(n).trip_surat_jalan&&e(n).trip_surat_jalan.length>0)?pe(ur):pe(Wt,!1)})}r(St),r(Ae),r(he),r(me),N((pe,de,Me,S,Ne,Pe)=>{x(Re,`${pe??""} • ${de??""}`),x(vr,`${Me??""} • ${S??""}`),x(tt,(e(n),p(()=>e(n).supervisor.nama))),x(dt,`${e(n),p(()=>e(n).bbm)??""} Liter`),x(cr,` ${Ne??""}`),x(Et,` ${Pe??""}`),x(It,` Data Trip (${e(n),p(()=>e(n).trip_surat_jalan?.length||0)??""})`)},[()=>(e(n),p(()=>oe(e(n).time_out))),()=>(e(n),p(()=>G(e(n).time_out))),()=>(e(n),p(()=>oe(e(n).time_back))),()=>(e(n),p(()=>G(e(n).time_back))),()=>(e(n),p(()=>F(e(n).personel_surat_jalan,"driver1"))),()=>(e(n),p(()=>F(e(n).personel_surat_jalan,"helper1")))]),c(et,me)};ze(ir,et=>{e(w),e(n),p(()=>e(w).has(e(n).surat_jalan_id))&&et(dr)})}N((et,me,he)=>{nr(Y,"title",et),Pr(se,0,`w-5 h-5 text-gray-600 transition-transform duration-200 ${me??""}`),x(re,(e(n),p(()=>e(n).no_surat_jalan))),x(K,(e(n),p(()=>e(n).surat_jalan_id))),x(ne,he),x(_t,(e(n),p(()=>e(n).vt.no_vt))),x(Fe,(e(n),p(()=>e(n).vt.plat))),x($e,(e(n),p(()=>e(n).rute.nama_rute))),x(lr,`${e(n),p(()=>e(n).rute.jarak)??""} km`),x(Xe,`${e(n),p(()=>e(n).trip_surat_jalan?.length||0)??""} Trip`)},[()=>(e(w),e(n),p(()=>e(w).has(e(n).surat_jalan_id)?"Tutup detail":"Lihat detail")),()=>(e(w),e(n),p(()=>e(w).has(e(n).surat_jalan_id)?"rotate-90":"")),()=>(e(n),p(()=>oe(e(n).date)))]),mt("click",Y,()=>te(e(n).surat_jalan_id)),mt("click",Ze,()=>W()(e(n).surat_jalan_id)),c(h,U)}),r(E),r(M);var ue=s(M,2);{var y=h=>{var n=Jr();c(h,n)};ze(ue,h=>{br(j()),p(()=>j().length===0)&&h(y)})}r(R),r($),N(()=>x(V,`${br(j()),p(()=>j().length)??""} surat jalan ditemukan`)),c(ke,$),ft()}var Er=b("<!> <!>",1),Kr=b("<!> <!>",1),Nr=b("<!> <!>",1),Wr=b("<!> <!>",1),Gr=b("<!> <!>",1),Qr=b("<!> <!>",1),Xr=b('<div class="flex items-center gap-2"><!> <div class="text-2xl font-bold text-gray-400 select-none">:</div> <!></div>');function wr(ke,k){ht(k,!1);const j=m(),W=m();let w=ae(k,"value",12,"06:00"),te=ae(k,"minuteStep",8,5);const oe=yr(),G=f=>String(f).padStart(2,"0"),F=Array.from({length:24},(f,L)=>({value:G(L),label:G(L)})),H=f=>Array.from({length:Math.floor(60/f)},(L,Y)=>{const se=G(Y*f);return{value:se,label:se}});let I=m([]),$=m([]),A=m([]),C=m([]),z=m(""),J=m("");const V=()=>{const f=e(A)?.[0]??"00",L=e(C)?.[0]??"00";w(`${f}:${L}`),oe("change",w())};_r(()=>{const[f,L]=w().split(":");a(A,[f||"06"]),a(C,[L||"00"]),a(z,e(A)[0]),a(J,e(C)[0]),a(I,F),a($,H(te())),V()});const R=()=>{a(I,F)},M=()=>{a($,H(te()))},E=f=>{a(A,f.value),a(z,e(A)[0]),V()},ue=f=>{a(C,f.value),a(J,e(C)[0]),V()},y=f=>{a(z,f.inputValue??"");const L=e(z).toLowerCase();if(!L||L===e(A)?.[0]){a(I,F);return}a(I,F.filter(Y=>Y.label.includes(L)))},h=f=>{a(J,f.inputValue??"");const L=e(J).toLowerCase(),Y=H(te());if(!L||L===e(C)?.[0]){a($,Y);return}a($,Y.filter(se=>se.label.includes(L)))};Be(()=>e(I),()=>{a(j,He({items:e(I),itemToString:f=>f.label,itemToValue:f=>f.value}))}),Be(()=>e($),()=>{a(W,He({items:e($),itemToString:f=>f.label,itemToValue:f=>f.value}))}),kr(),xt();var n=Xr(),U=o(n);g(U,{class:"w-20",placeholder:"HH",get collection(){return e(j)},get value(){return e(A)},get inputValue(){return e(z)},onOpenChange:R,onInputValueChange:y,onValueChange:E,multiple:!1,selectionBehavior:"replace",inputBehavior:"autohighlight",openOnClick:!0,children:(f,L)=>{var Y=Nr(),se=_(Y);g.Control(se,{children:(X,re)=>{var P=Er(),K=_(P);g.Input(K,{class:"text-center font-mono focus:ring-2 focus:ring-blue-500"});var q=s(K,2);g.Trigger(q,{class:"hover:bg-gray-100 transition-colors"}),c(X,P)},$$slots:{default:!0}});var Le=s(se,2);xr(Le,{children:(X,re)=>{g.Positioner(X,{children:(P,K)=>{g.Content(P,{class:"bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto overscroll-contain z-50",children:(q,Oe)=>{var ne=ge(),le=_(ne);fe(le,1,()=>e(I),xe=>xe.value,(xe,_e)=>{g.Item(xe,{get item(){return e(_e)},class:"px-4 py-2 hover:bg-blue-50 cursor-pointer transition-colors text-center font-mono",children:(je,_t)=>{var Se=Kr(),Fe=_(Se);g.ItemText(Fe,{children:(Z,$e)=>{ee();var be=De();N(()=>x(be,(e(_e),p(()=>e(_e).label)))),c(Z,be)},$$slots:{default:!0}});var ie=s(Fe,2);g.ItemIndicator(ie,{}),c(je,Se)},$$slots:{default:!0}})}),c(q,ne)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),c(f,Y)},$$slots:{default:!0}});var Q=s(U,4);g(Q,{class:"w-20",placeholder:"MM",get collection(){return e(W)},get value(){return e(C)},get inputValue(){return e(J)},onOpenChange:M,onInputValueChange:h,onValueChange:ue,multiple:!1,selectionBehavior:"replace",inputBehavior:"autohighlight",openOnClick:!0,children:(f,L)=>{var Y=Qr(),se=_(Y);g.Control(se,{children:(X,re)=>{var P=Wr(),K=_(P);g.Input(K,{class:"text-center font-mono focus:ring-2 focus:ring-blue-500"});var q=s(K,2);g.Trigger(q,{class:"hover:bg-gray-100 transition-colors"}),c(X,P)},$$slots:{default:!0}});var Le=s(se,2);xr(Le,{children:(X,re)=>{g.Positioner(X,{children:(P,K)=>{g.Content(P,{class:"bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto overscroll-contain z-50",children:(q,Oe)=>{var ne=ge(),le=_(ne);fe(le,1,()=>e($),xe=>xe.value,(xe,_e)=>{g.Item(xe,{get item(){return e(_e)},class:"px-4 py-2 hover:bg-blue-50 cursor-pointer transition-colors text-center font-mono",children:(je,_t)=>{var Se=Gr(),Fe=_(Se);g.ItemText(Fe,{children:(Z,$e)=>{ee();var be=De();N(()=>x(be,(e(_e),p(()=>e(_e).label)))),c(Z,be)},$$slots:{default:!0}});var ie=s(Fe,2);g.ItemIndicator(ie,{}),c(je,Se)},$$slots:{default:!0}})}),c(q,ne)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),c(f,Y)},$$slots:{default:!0}}),r(n),c(ke,n),ft()}var Zr=b("<!> <!>",1),ea=b("<!> <!>",1);function Ge(ke,k){ht(k,!1);let j=ae(k,"collection",8),W=ae(k,"value",24,()=>[]),w=ae(k,"placeholder",8,""),te=ae(k,"onOpenChange",8,()=>{}),oe=ae(k,"onInputValueChange",8,()=>{}),G=ae(k,"onValueChange",8,()=>{}),F=ae(k,"contentClass",8,"bg-white border border-gray-200 rounded-lg shadow-lg max-h-64 overflow-y-auto"),H=ae(k,"className",8,""),I=ae(k,"disabled",8,!1);xt(),g(ke,{get class(){return`w-full ${H()??""}`},get placeholder(){return w()},get collection(){return j()},get onOpenChange(){return te()},get onInputValueChange(){return oe()},get onValueChange(){return G()},get value(){return W()},multiple:!1,inputBehavior:"autohighlight",openOnClick:!0,get disabled(){return I()},children:($,A)=>{var C=ea(),z=_(C);g.Control(z,{$$events:{click:()=>j()?.open?.()},children:(V,R)=>{var M=Zr(),E=_(M);g.Input(E,{class:"focus:ring-2 focus:ring-blue-500"});var ue=s(E,2);g.Trigger(ue,{}),c(V,M)},$$slots:{default:!0}});var J=s(z,2);xr(J,{children:(V,R)=>{g.Positioner(V,{children:(M,E)=>{g.Content(M,{get class(){return F()},children:(ue,y)=>{var h=ge(),n=_(h);Br(n,k,"default",{}),c(ue,h)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),c($,C)},$$slots:{default:!0}}),ft()}var ta=b("<!> <!>",1),ra=b("<!> <!>",1),aa=b("<!> <!>",1),oa=b("<!> <!>",1),sa=b("<!> <!>",1),na=b("<!> <!>",1),la=b("<!> <!>",1),ia=b("<!> <!>",1),da=$r('<svg class="animate-spin -ml-1 mr-2 h-5 w-5" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Menyimpan...',1),va=$r('<svg class="w-5 h-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Simpan Surat Jalan',1),ca=b('<div class="fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50"><!></div>'),ua=b('<div class="w-full max-w-4xl mx-auto px-4 py-6"><div class="bg-white rounded-2xl shadow-md p-6"><div class="mb-6"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-xl bg-linear-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h2 class="text-xl font-bold text-gray-900">Form Surat Jalan Baru</h2> <p class="text-sm text-gray-500">Lengkapi data untuk membuat surat jalan</p></div></div></div> <div class="space-y-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="flex flex-col gap-2"><label class="text-sm font-medium text-gray-700 flex items-center gap-2"><svg class="w-4 h-4 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg> Tanggal Surat Jalan <span class="text-red-500">*</span></label> <div class="relative"><input class="input w-full pr-10 cursor-pointer focus:ring-2 focus:ring-blue-500" placeholder="Pilih tanggal" readonly=""/> <svg class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></div> <div class="flex flex-col gap-2"><label class="text-sm font-medium text-gray-700 flex items-center gap-2"><svg class="w-4 h-4 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg> Vacuum Truck <span class="text-red-500">*</span></label> <!></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="flex flex-col gap-2"><label class="text-sm font-medium text-gray-700 flex items-center gap-2"><svg class="w-4 h-4 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg> Rute <span class="text-red-500">*</span></label> <!></div> <div class="flex flex-col gap-2"><label class="text-sm font-medium text-gray-700 flex items-center gap-2"><svg class="w-4 h-4 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> Supervisor <span class="text-red-500">*</span></label> <!></div></div> <div class="border-t border-gray-200 pt-6"><h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2"><svg class="w-5 h-5 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg> Shift 1</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="flex flex-col gap-2"><label class="text-sm font-medium text-gray-700 flex items-center gap-2"><svg class="w-4 h-4 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> Driver <span class="text-red-500">*</span></label> <!></div> <div class="flex flex-col gap-2"><label class="text-sm font-medium text-gray-700 flex items-center gap-2"><svg class="w-4 h-4 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> Helper <span class="text-red-500">*</span></label> <!></div></div></div> <div class="border-t border-gray-200 pt-6"><h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2"><svg class="w-5 h-5 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg> Shift 2</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="flex flex-col gap-2"><label class="text-sm font-medium text-gray-700 flex items-center gap-2"><svg class="w-4 h-4 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> Driver</label> <!></div> <div class="flex flex-col gap-2"><label class="text-sm font-medium text-gray-700 flex items-center gap-2"><svg class="w-4 h-4 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> Helper</label> <!></div></div></div> <div class="border-t border-gray-200 pt-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="flex flex-col gap-2"><label class="text-sm font-medium text-gray-700 flex items-center gap-2"><svg class="w-4 h-4 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"></path></svg> Kapasitas BBM</label> <div class="relative"><input type="text" inputmode="numeric" pattern="[0-9]*" class="input w-full pr-10 focus:ring-2 focus:ring-red-500" placeholder="0"/> <span class="absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500 pointer-events-none">L</span></div></div> <div class="flex flex-col gap-2"><label class="text-sm font-medium text-gray-700 flex items-center gap-2"><svg class="w-4 h-4 text-cyan-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> Dispatcher <span class="text-red-500">*</span></label> <!></div></div></div> <div class="border-t border-gray-200 pt-6"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="flex flex-col gap-2"><label class="text-sm font-medium text-gray-700 flex items-center gap-2"><svg class="w-4 h-4 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg> Waktu Keluar VT <span class="text-red-500">*</span></label> <div class="space-y-2"><div class="relative"><input class="input w-full pr-10 cursor-pointer focus:ring-2 focus:ring-green-500" placeholder="Pilih tanggal" readonly=""/> <svg class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div> <!></div></div> <div class="flex flex-col gap-2"><label class="text-sm font-medium text-gray-700 flex items-center gap-2"><svg class="w-4 h-4 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg> Waktu Kembali VT <span class="text-red-500">*</span></label> <div class="space-y-2"><div class="relative"><input class="input w-full pr-10 cursor-pointer focus:ring-2 focus:ring-orange-500" placeholder="Pilih tanggal" readonly=""/> <svg class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div> <!></div></div></div></div> <div class="flex justify-end pt-4 border-t border-gray-200"><!></div></div></div></div> <!>',1);function pa(ke,k){ht(k,!1);const j=m(),W=m(),w=m(),te=m(),oe=m(),G=m(),F=m();let H=m(!1);const I=yr();let $=m("");const A=t=>{const l=t.target.value;if(l===""){a($,"");return}/^\d+$/.test(l)&&a($,l)};let C=m("18:00"),z=m("16:00"),J=[],V=m([]),R=m([]),M=m([]),E=m([]);const ue=t=>t?.[0]??null,y=(t="")=>{const l=ue(e(E)),i=J.filter(d=>{const v=d.nama_personel.toLowerCase().includes(t),u=l&&String(d.personel_id)===String(l);return v&&!u});return it(i)},h=(t="")=>{const l=ue(e(M)),i=J.filter(d=>{const v=d.nama_personel.toLowerCase().includes(t),u=l&&String(d.personel_id)===String(l);return v&&!u});return it(i)},n=t=>{const l=(t.inputValue??"").toLowerCase();a(V,y(l))},U=t=>{const l=(t.inputValue??"").toLowerCase();a(R,h(l))},Q=t=>{a(M,t.value),a(R,h("")),se(e(M)?.[0],1)},f=t=>{a(E,t.value),a(V,y("")),se(e(E)?.[0],2)},L=()=>{a(V,y(""))},Y=()=>{a(R,h(""))},se=(t,l=1)=>{if(!t)return;const i=J.find(u=>String(u.personel_id)===String(t));if(!i)return;const d=i.def_helper;if(!d){l===1&&a(K,[]),l===2&&a(q,[]);return}X.find(u=>String(u.personel_id)===String(d))&&(l===1&&(a(K,[String(d)]),a(re,ne("")),a(P,le(""))),l===2&&(a(q,[String(d)]),a(P,le("")),a(re,ne(""))))},Le=(t,l)=>{if(!l||t.some(v=>String(v.personel_id)===String(l)))return t;const d=X.find(v=>String(v.personel_id)===String(l));return d?[d,...t]:t};let X=[],re=m([]),P=m([]),K=m([]),q=m([]);const Oe=t=>t?.[0]??null,ne=(t="")=>{const l=Oe(e(q));let i=X.filter(d=>{const v=d.nama_personel.toLowerCase().includes(t),u=l&&String(d.personel_id)===String(l);return v&&!u});return Le(i,Oe(e(K)))},le=(t="")=>{const l=Oe(e(K));let i=X.filter(d=>{const v=d.nama_personel.toLowerCase().includes(t),u=l&&String(d.personel_id)===String(l);return v&&!u});return Le(i,Oe(e(q)))},xe=t=>{const l=(t.inputValue??"").toLowerCase();a(re,ne(l))},_e=t=>{const l=(t.inputValue??"").toLowerCase();a(P,le(l))},je=t=>{a(K,t.value),a(P,le(""))},_t=t=>{a(q,t.value),a(re,ne(""))},Se=()=>{a(re,ne(""))},Fe=()=>{a(P,le(""))};let ie=[],Z=m([]),$e=m([]),be=!1;const lr=t=>{const l=(t.inputValue??"").toLowerCase();a(Z,ie.filter(i=>(i.nama??"").toLowerCase().includes(l)))},bt=t=>{be=!0,a($e,t.value),a(Z,ie)},At=()=>{a(Z,ie)};let Xe=[],Ie=m([]),Ze=m([]);const ir=t=>{const l=(t.inputValue??"").toLowerCase();a(Ie,Xe.filter(i=>i.nama.toLowerCase().includes(l)))},dr=t=>{a(Ze,t.value)},et=()=>{a(Ie,Xe)};let me=[],he=m([]),Ae=m([]);const wt=t=>{const l=(t.inputValue??"").toLowerCase();a(he,me.filter(i=>(i.nama_rute??"").toLowerCase().includes(l)))},yt=t=>{a(Ae,t.value),a(he,me);const l=e(Ae)?.[0];if(!l)return;const i=me.find(v=>String(v.rute_id)===String(l));if(!i)return;const d=i.user_id;d&&((!be||!e($e)?.length)&&a($e,[String(d)]),a(Z,ie))},Rt=()=>{a(he,me)};let we=[],Ce=m([]),Re=m([]),kt=m();const Ut=()=>{a(Ce,we)},vr=()=>{const t=e(Re)?.[0];return t?we.find(l=>String(l.vt_id)===String(t))??null:null},Jt=t=>{const l=(t.inputValue??"").toLowerCase().trim(),i=vr();if(!l){a(Ce,we);return}let d=we.filter(v=>`${v.no_vt??""} - ${v.plat??""} ${v.vt_id??""}`.toLowerCase().includes(l));i&&!d.some(v=>String(v.vt_id)===String(i.vt_id))&&(d=[i,...d]),a(Ce,d)},Yt=t=>{a(Re,t.value),a(V,y("")),a(R,h(""))},$t=()=>{const t=e(Re)?.[0];if(!t)return[];const l=we.find(i=>String(i.vt_id)===String(t));return l?(l.personels??[]).filter(i=>i.is_driver).map(i=>String(i.personel_id)):[]},it=t=>{const l=$t();return[...t].sort((i,d)=>{const v=l.includes(String(i.personel_id)),u=l.includes(String(d.personel_id));return v&&!u?-1:!v&&u?1:i.nama_personel.localeCompare(d.nama_personel)})};let Ye=m(),tt=m(),qe=m(),Ee="",dt="",Ke="";const qt=async()=>{a(H,!0);try{we=(await Qe.getVT()).vts??[],a(Ce,we),me=(await Qe.getRute()).rutes,a(he,me),ie=(await Qe.getSupervisor()).users,a(Z,ie),Xe=(await Qe.getDispatcher()).users,a(Ie,Xe),J=(await Qe.getDrivers()).drivers??[],a(V,y("")),a(R,h("")),X=(await Qe.getHelpers()).helpers??[],a(re,ne("")),a(P,le(""))}catch(t){console.error("Error fetching data:",t),Te?.error("Gagal memuat data")}a(H,!1)},Ct=()=>{const t=new Date,l=new Date(t);l.setDate(t.getDate()-1),Ee=ye(t),dt=ye(l),Ke=ye(t),a(C,"18:00"),a(z,"16:00"),a($,""),a(Re,[]),a(Ae,[]),a($e,[]),a(Ze,[]),a(M,[]),a(K,[]),a(E,[]),a(q,[]),be=!1,a(Ce,we),a(he,me),a(Z,ie),a(Ie,Xe),a(V,y("")),a(R,h("")),a(re,ne("")),a(P,le("")),e(Ye)?._flatpickr&&e(Ye)._flatpickr.setDate(t,!0),e(tt)?._flatpickr&&e(tt)._flatpickr.setDate(l,!0),e(qe)?._flatpickr&&e(qe)._flatpickr.setDate(t,!0)},cr=async()=>{if(!Ee){Te?.error("Pilih tanggal surat jalan");return}if(!e(Re).length){Te?.error("Pilih Vacuum Truck");return}if(!e(Ae).length){Te?.error("Pilih rute");return}if(!e($e).length){Te?.error("Pilih supervisor");return}if(!e(Ze).length){Te?.error("Pilih dispatcher");return}if(!e(M).length){Te?.error("Pilih driver shift pagi");return}if(!e(K).length){Te?.error("Pilih helper shift pagi");return}a(H,!0);const t=`${dt} ${e(C)}:00`,l=`${Ke} ${e(z)}:00`,i={date:Ee,vt_id:e(Re)[0],rute_id:e(Ae)[0],supervisor_id:e($e)[0],dispatcher_id:e(Ze)[0],driver1:e(M)[0],helper1:e(K)[0],driver2:e(E)[0]||null,helper2:e(q)[0]||null,time_out:t,time_back:l,bbm:e($)||"0"};try{await Qe.createSJ(i),Ct(),I("refresh"),Te?.success("Surat Jalan berhasil dibuat")}catch(d){console.error(d),Te?.error(d.message||"Gagal membuat Surat Jalan")}a(H,!1)};_r(()=>{const t=new Date;new Date(t).setDate(t.getDate()+1);const i=new Date(t);i.setDate(t.getDate()-1),sr(e(Ye),{mode:"single",dateFormat:"Y-m-d",altInput:!0,altFormat:"d-m-Y",defaultDate:t,onChange:([d])=>{d&&(Ee=ye(d))}}),sr(e(tt),{mode:"single",dateFormat:"Y-m-d",altInput:!0,altFormat:"d-m-Y",defaultDate:i,onChange:([d])=>{d&&(dt=ye(d))}}),sr(e(qe),{mode:"single",dateFormat:"Y-m-d",altInput:!0,altFormat:"d-m-Y",defaultDate:t,onChange:([d])=>{d&&(Ke=ye(d))}}),Ee=ye(t),dt=ye(i),Ke=ye(t),qt()});const ye=t=>t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0");Be(()=>e(V),()=>{a(j,He({items:e(V),itemToString:t=>t.nama_personel,itemToValue:t=>String(t.personel_id)}))}),Be(()=>e(R),()=>{a(W,He({items:e(R),itemToString:t=>t.nama_personel,itemToValue:t=>String(t.personel_id)}))}),Be(()=>e(re),()=>{a(w,He({items:e(re),itemToString:t=>t.nama_personel,itemToValue:t=>String(t.personel_id)}))}),Be(()=>e(P),()=>{a(te,He({items:e(P),itemToString:t=>t.nama_personel,itemToValue:t=>String(t.personel_id)}))}),Be(()=>e(Z),()=>{a(oe,He({items:e(Z),itemToString:t=>t.nama,itemToValue:t=>String(t.user_id)}))}),Be(()=>e(Ie),()=>{a(G,He({items:e(Ie),itemToString:t=>t.nama,itemToValue:t=>String(t.user_id)}))}),Be(()=>e(he),()=>{a(F,He({items:e(he),itemToString:t=>t.nama_rute,itemToValue:t=>String(t.rute_id)}))}),Be(()=>e(Ce),()=>{a(kt,He({items:e(Ce),itemToString:t=>`${t.no_vt} - ${t.plat}`,itemToValue:t=>String(t.vt_id)}))}),kr(),xt();var Et=ua(),Vt=_(Et),Kt=o(Vt),St=s(o(Kt),2),rt=o(St),It=o(rt),Nt=s(o(It),2),ur=o(Nt);or(ur,t=>a(Ye,t),()=>e(Ye)),ee(2),r(Nt),r(It);var Wt=s(It,2),pe=s(o(Wt),2);Ge(pe,{placeholder:"Cari VT...",get collection(){return e(kt)},onOpenChange:Ut,onInputValueChange:Jt,get value(){return e(Re)},onValueChange:Yt,children:(t,l)=>{var i=ge(),d=_(i);fe(d,1,()=>e(Ce),v=>v.vt_id,(v,u)=>{g.Item(v,{get item(){return e(u)},class:"px-4 py-2 hover:bg-blue-50 cursor-pointer transition-colors",children:(O,Ve)=>{var T=ta(),B=_(T);g.ItemText(B,{children:(ce,lt)=>{ee();var D=De();N(()=>x(D,`${e(u),p(()=>e(u).no_vt)??""} — ${e(u),p(()=>e(u).plat)??""}`)),c(ce,D)},$$slots:{default:!0}});var ve=s(B,2);g.ItemIndicator(ve,{}),c(O,T)},$$slots:{default:!0}})}),c(t,i)},$$slots:{default:!0}}),r(Wt),r(rt);var de=s(rt,2),Me=o(de),S=s(o(Me),2);Ge(S,{placeholder:"Cari Rute...",get collection(){return e(F)},onInputValueChange:wt,onValueChange:yt,onOpenChange:Rt,get value(){return e(Ae)},children:(t,l)=>{var i=ge(),d=_(i);fe(d,1,()=>e(he),v=>v.rute_id,(v,u)=>{g.Item(v,{get item(){return e(u)},class:"px-4 py-2 hover:bg-purple-50 cursor-pointer transition-colors",children:(O,Ve)=>{var T=ra(),B=_(T);g.ItemText(B,{children:(ce,lt)=>{ee();var D=De();N(()=>x(D,(e(u),p(()=>e(u).nama_rute)))),c(ce,D)},$$slots:{default:!0}});var ve=s(B,2);g.ItemIndicator(ve,{}),c(O,T)},$$slots:{default:!0}})}),c(t,i)},$$slots:{default:!0}}),r(Me);var Ne=s(Me,2),Pe=s(o(Ne),2);Ge(Pe,{placeholder:"Cari Supervisor...",get collection(){return e(oe)},onOpenChange:At,onInputValueChange:lr,onValueChange:bt,get value(){return e($e)},children:(t,l)=>{var i=ge(),d=_(i);fe(d,1,()=>e(Z),v=>v.user_id,(v,u)=>{g.Item(v,{get item(){return e(u)},class:"px-4 py-2 hover:bg-green-50 cursor-pointer transition-colors",children:(O,Ve)=>{var T=aa(),B=_(T);g.ItemText(B,{children:(ce,lt)=>{ee();var D=De();N(()=>x(D,(e(u),p(()=>e(u).nama)))),c(ce,D)},$$slots:{default:!0}});var ve=s(B,2);g.ItemIndicator(ve,{}),c(O,T)},$$slots:{default:!0}})}),c(t,i)},$$slots:{default:!0}}),r(Ne),r(de);var Ue=s(de,2),at=s(o(Ue),2),We=o(at),pr=s(o(We),2);Ge(pr,{placeholder:"Cari Driver...",get collection(){return e(j)},onOpenChange:L,onInputValueChange:n,onValueChange:Q,get value(){return e(M)},children:(t,l)=>{var i=ge(),d=_(i);fe(d,1,()=>e(V),v=>v.personel_id,(v,u)=>{g.Item(v,{get item(){return e(u)},class:"px-4 py-2 hover:bg-amber-50 cursor-pointer transition-colors",children:(O,Ve)=>{var T=oa(),B=_(T);g.ItemText(B,{children:(ce,lt)=>{ee();var D=De();N(()=>x(D,(e(u),p(()=>e(u).nama_personel)))),c(ce,D)},$$slots:{default:!0}});var ve=s(B,2);g.ItemIndicator(ve,{}),c(O,T)},$$slots:{default:!0}})}),c(t,i)},$$slots:{default:!0}}),r(We);var vt=s(We,2),Mt=s(o(vt),2);Ge(Mt,{placeholder:"Cari Helper...",get collection(){return e(w)},onOpenChange:Se,onInputValueChange:xe,onValueChange:je,get value(){return e(K)},children:(t,l)=>{var i=ge(),d=_(i);fe(d,1,()=>e(re),v=>v.personel_id,(v,u)=>{g.Item(v,{get item(){return e(u)},class:"px-4 py-2 hover:bg-amber-50 cursor-pointer transition-colors",children:(O,Ve)=>{var T=sa(),B=_(T);g.ItemText(B,{children:(ce,lt)=>{ee();var D=De();N(()=>x(D,(e(u),p(()=>e(u).nama_personel)))),c(ce,D)},$$slots:{default:!0}});var ve=s(B,2);g.ItemIndicator(ve,{}),c(O,T)},$$slots:{default:!0}})}),c(t,i)},$$slots:{default:!0}}),r(vt),r(at),r(Ue);var ct=s(Ue,2),Gt=s(o(ct),2),ot=o(Gt),Qt=s(o(ot),2);Ge(Qt,{placeholder:"Cari Driver...",get collection(){return e(W)},onOpenChange:Y,onInputValueChange:U,onValueChange:f,get value(){return e(E)},children:(t,l)=>{var i=ge(),d=_(i);fe(d,1,()=>e(R),v=>v.personel_id,(v,u)=>{g.Item(v,{get item(){return e(u)},class:"px-4 py-2 hover:bg-indigo-50 cursor-pointer transition-colors",children:(O,Ve)=>{var T=na(),B=_(T);g.ItemText(B,{children:(ce,lt)=>{ee();var D=De();N(()=>x(D,(e(u),p(()=>e(u).nama_personel)))),c(ce,D)},$$slots:{default:!0}});var ve=s(B,2);g.ItemIndicator(ve,{}),c(O,T)},$$slots:{default:!0}})}),c(t,i)},$$slots:{default:!0}}),r(ot);var Xt=s(ot,2),Pt=s(o(Xt),2);Ge(Pt,{placeholder:"Cari Helper...",get collection(){return e(te)},onOpenChange:Fe,onInputValueChange:_e,onValueChange:_t,get value(){return e(q)},children:(t,l)=>{var i=ge(),d=_(i);fe(d,1,()=>e(P),v=>v.personel_id,(v,u)=>{g.Item(v,{get item(){return e(u)},class:"px-4 py-2 hover:bg-indigo-50 cursor-pointer transition-colors",children:(O,Ve)=>{var T=la(),B=_(T);g.ItemText(B,{children:(ce,lt)=>{ee();var D=De();N(()=>x(D,(e(u),p(()=>e(u).nama_personel)))),c(ce,D)},$$slots:{default:!0}});var ve=s(B,2);g.ItemIndicator(ve,{}),c(O,T)},$$slots:{default:!0}})}),c(t,i)},$$slots:{default:!0}}),r(Xt),r(Gt),r(ct);var ut=s(ct,2),Zt=o(ut),st=o(Zt),Tt=s(o(st),2),Bt=o(Tt);Sr(Bt),ee(2),r(Tt),r(st);var Dt=s(st,2),er=s(o(Dt),2);Ge(er,{placeholder:"Cari Dispatcher...",get collection(){return e(G)},onOpenChange:et,onInputValueChange:ir,onValueChange:dr,get value(){return e(Ze)},children:(t,l)=>{var i=ge(),d=_(i);fe(d,1,()=>e(Ie),v=>v.user_id,(v,u)=>{g.Item(v,{get item(){return e(u)},class:"px-4 py-2 hover:bg-cyan-50 cursor-pointer transition-colors",children:(O,Ve)=>{var T=ia(),B=_(T);g.ItemText(B,{children:(ce,lt)=>{ee();var D=De();N(()=>x(D,(e(u),p(()=>e(u).nama)))),c(ce,D)},$$slots:{default:!0}});var ve=s(B,2);g.ItemIndicator(ve,{}),c(O,T)},$$slots:{default:!0}})}),c(t,i)},$$slots:{default:!0}}),r(Dt),r(Zt),r(ut);var Ht=s(ut,2),tr=o(Ht),zt=o(tr),pt=s(o(zt),2),nt=o(pt),rr=o(nt);or(rr,t=>a(tt,t),()=>e(tt)),ee(2),r(nt);var gr=s(nt,2);wr(gr,{get value(){return e(C)},set value(t){a(C,t)},$$legacy:!0}),r(pt),r(zt);var Je=s(zt,2),Lt=s(o(Je),2),Ot=o(Lt),mr=o(Ot);or(mr,t=>a(qe,t),()=>e(qe)),ee(2),r(Ot);var jt=s(Ot,2);wr(jt,{get value(){return e(z)},set value(t){a(z,t)},$$legacy:!0}),r(Lt),r(Je),r(tr),r(Ht);var gt=s(Ht,2),Ft=o(gt);Tr(Ft,{severity:"success",get disabled(){return e(H)},class:"px-8 py-3 text-base font-semibold",$$events:{click:cr},children:(t,l)=>{var i=ge(),d=_(i);{var v=O=>{var Ve=da();ee(),c(O,Ve)},u=O=>{var Ve=va();ee(),c(O,Ve)};ze(d,O=>{e(H)?O(v):O(u,!1)})}c(t,i)},$$slots:{default:!0}}),r(gt),r(St),r(Kt),r(Vt);var hr=s(Vt,2);{var ar=t=>{var l=ca(),i=o(l);Cr(i,{}),r(l),c(t,l)};ze(hr,t=>{e(H)&&t(ar)})}N(()=>Ir(Bt,e($))),mt("input",Bt,A),c(ke,Et),ft()}var ga=b('<div class="fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50"><div class="bg-white rounded-2xl p-8 shadow-2xl"><!></div></div>'),ma=b('<div class="space-y-6"><div class="bg-white rounded-xl shadow-sm p-6"><div class="flex items-center justify-between mb-6"><div class="flex items-center gap-3"><div class="w-12 h-12 rounded-xl bg-linear-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg"><svg class="w-7 h-7 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><h1 class="text-2xl font-bold text-gray-900">Surat Jalan</h1> <p class="text-sm text-gray-500">Kelola dan monitoring surat jalan vacuum truck</p></div></div></div> <div class="flex flex-col gap-2"><label class="text-sm font-medium text-gray-700 flex items-center gap-2"><svg class="w-4 h-4 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg> Filter Tanggal</label> <div class="relative w-full max-w-md"><input class="input w-full pr-10 cursor-pointer focus:ring-2 focus:ring-blue-500 transition-all" placeholder="Pilih range tanggal" readonly=""/> <svg class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></div></div> <!> <!> <!> <!></div>');function Ha(ke,k){ht(k,!1);let j=m(!1),W=m(),w=[],te=m(!1),oe=m(""),G=m([]);const F=async()=>{a(j,!0);try{const y=await Qe.getSJByDates({dates:w});a(G,y.surat_jalans)}catch(y){console.error(y)}a(j,!1)},H=y=>y.getFullYear()+"-"+String(y.getMonth()+1).padStart(2,"0")+"-"+String(y.getDate()).padStart(2,"0"),I=y=>{a(oe,`${Mr}/uploads/sj/${y}.pdf`),a(te,!0)};_r(()=>{const y=new Date;sr(e(W),{mode:"range",dateFormat:"Y-m-d",altInput:!0,altFormat:"d-m-Y",locale:{rangeSeparator:" sampai "},defaultDate:[y,y],onChange:(h,n)=>{if(h.length===1)w=[H(h[0])];else if(h.length===2){const U=H(h[0]),Q=H(h[1]);U===Q?w=[U]:w=[U,Q],F()}console.log("dateArray:",w)}}),w=[H(y)],F()}),xt();var $=ma(),A=o($),C=s(o(A),2),z=s(o(C),2),J=o(z);or(J,y=>a(W,y),()=>e(W)),ee(2),r(z),r(C),r(A);var V=s(A,2);qr(V,{get surjals(){return e(G)},onPreview:I});var R=s(V,2);pa(R,{$$events:{refresh:F}});var M=s(R,2);Hr(M,{get show(){return e(te)},get pdfUrl(){return e(oe)},onClose:()=>a(te,!1)});var E=s(M,2);{var ue=y=>{var h=ga(),n=o(h),U=o(n);Cr(U,{}),r(n),r(h),c(y,h)};ze(E,y=>{e(j)&&y(ue)})}r($),c(ke,$),ft()}export{Ha as component};
