import"../chunks/DsnmJJEf.js";import"../chunks/Dreri0Nc.js";import{c as yt,o as ft}from"../chunks/sDIuGG-g.js";import{f as _,c as d,s as l,r as u,t as ae,p as Be,b as Me,u as O,g as e,l as ve,a as Dt,d as r,m as p,n as K}from"../chunks/BA9zlQXs.js";import{c as oe,a as v,f as T,t as ie}from"../chunks/D2T3iFuq.js";import{i as ht}from"../chunks/5idYV8Eq.js";import{b as Ye}from"../chunks/5GlpX0Z2.js";import{i as Re}from"../chunks/DVSe7J_H.js";import{f as Je}from"../chunks/DIg2_NEP.js";import{a as $e,n as Tt,L as Ht,B as cr}from"../chunks/D4MCqZJT.js";import{e as mt}from"../chunks/DEKlhpFx.js";import{s as vr,r as pr,b as gr}from"../chunks/CN9_JMpm.js";import{p as te}from"../chunks/Bfv6g7Rn.js";import{s as M}from"../chunks/CxGsrVHP.js";import{e as ue,i as fr}from"../chunks/DHhalKro.js";import{C as c,P as gt,u as pe}from"../chunks/Xw1Er8YH.js";import{B as hr}from"../chunks/dm43JwH2.js";import{s as mr}from"../chunks/BTDnJLXo.js";var _r=T('<div class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center"><div class="bg-white rounded-xl w-[90vw] h-[90vh] flex flex-col"><div class="flex items-center justify-between px-4 py-3 border-b"><h2 class="font-semibold">Preview Surat Jalan</h2> <button class="text-gray-500 hover:text-black">✕</button></div> <div class="flex-1"><iframe class="w-full h-full border-none"></iframe></div></div></div>');function $r(se,m){let A=te(m,"show",8,!1),N=te(m,"pdfUrl",8,""),k=te(m,"onClose",8,()=>{});var R=oe(),re=_(R);{var g=y=>{var P=_r(),F=d(P),$=d(F),L=l(d($),2);u($);var b=l($,2),q=d(b);u(b),u(F),u(P),ae(()=>vr(q,"src",N())),mt("click",L,function(...C){k()?.apply(this,C)}),v(y,P)};ht(re,y=>{A()&&y(g)})}v(se,R)}var br=T('<tr><td><button class="text-blue-600 hover:underline font-medium">Klik untuk lihat</button></td><td> </td><td> </td><td> </td><td> </td><td> </td><td><div> </div> <div> </div></td><td><div> </div> <div> </div></td></tr>'),Cr=T('<table class="table caption-bottom"><thead><tr><th>Surat Jalan</th><th>Vacuum Truck</th><th>Tanggal</th><th>Nomor</th><th>Rute</th><th>Supervisor</th><th>Driver</th><th>Helper</th></tr></thead><tbody class="[&amp;>tr:hover:preset-tonal-primary]"></tbody></table>');function xr(se,m){Be(m,!1);let A=te(m,"surjals",24,()=>[]),N=te(m,"onPreview",8,()=>{});Re();var k=Cr(),R=l(d(k));ue(R,5,A,fr,(re,g)=>{var y=br(),P=d(y),F=d(P);u(P);var $=l(P),L=d($);u($);var b=l($),q=d(b,!0);u(b);var C=l(b),B=d(C,!0);u(C);var D=l(C),W=d(D,!0);u(D);var f=l(D),Y=d(f,!0);u(f);var J=l(f),z=d(J),de=d(z,!0);u(z);var be=l(z,2),ye=d(be,!0);u(be),u(J);var h=l(J),x=d(h),j=d(x,!0);u(x);var E=l(x,2),he=d(E,!0);u(E),u(h),u(y),ae((S,G,H,U)=>{M(L,`${e(g),O(()=>e(g).vt.no_vt)??""} - ${e(g),O(()=>e(g).vt.plat)??""}`),M(q,(e(g),O(()=>e(g).date))),M(B,(e(g),O(()=>e(g).no_surat_jalan))),M(W,(e(g),O(()=>e(g).rute.nama_rute))),M(Y,(e(g),O(()=>e(g).supervisor.nama))),M(de,S),M(ye,G),M(j,H),M(he,U)},[()=>(e(g),O(()=>e(g).personel_surat_jalan.find(S=>S.role==="driver1")?.personel.nama_personel)),()=>(e(g),O(()=>e(g).personel_surat_jalan.find(S=>S.role==="driver2")?.personel.nama_personel)),()=>(e(g),O(()=>e(g).personel_surat_jalan.find(S=>S.role==="helper1")?.personel.nama_personel)),()=>(e(g),O(()=>e(g).personel_surat_jalan.find(S=>S.role==="helper2")?.personel.nama_personel))]),mt("click",F,()=>N()(e(g).surat_jalan_id)),v(re,y)}),u(R),u(k),v(se,k),Me()}var Sr=T("<!> <!>",1),Vr=T("<!> <!>",1),Ir=T("<!> <!>",1),wr=T("<!> <!>",1),Pr=T('<div class="flex items-end gap-1"><!> <div class="text-lg pb-1">:</div> <!></div>');function kt(se,m){Be(m,!1);const A=p(),N=p();let k=te(m,"value",12,"06:00"),R=te(m,"minuteStep",8,5);const re=yt(),g=h=>String(h).padStart(2,"0"),y=Array.from({length:24},(h,x)=>({value:g(x),label:g(x)})),P=h=>Array.from({length:Math.floor(60/h)},(x,j)=>{const E=g(j*h);return{value:E,label:E}});let F=p([]),$=p([]),L=p([]),b=p([]),q=p(""),C=p("");const B=()=>{const h=e(L)?.[0]??"00",x=e(b)?.[0]??"00";k(`${h}:${x}`),re("change",k())};ft(()=>{const[h,x]=k().split(":");r(L,[h||"06"]),r(b,[x||"00"]),r(q,e(L)[0]),r(C,e(b)[0]),r(F,y),r($,P(R())),B()});const D=()=>{r(F,y)},W=()=>{r($,P(R()))},f=h=>{r(L,h.value),r(q,e(L)[0]),B()},Y=h=>{r(b,h.value),r(C,e(b)[0]),B()},J=h=>{r(q,h.inputValue??"");const x=e(q).toLowerCase();if(!x||x===e(L)?.[0]){r(F,y);return}r(F,y.filter(j=>j.label.includes(x)))},z=h=>{r(C,h.inputValue??"");const x=e(C).toLowerCase(),j=P(R());if(!x||x===e(b)?.[0]){r($,j);return}r($,j.filter(E=>E.label.includes(x)))};ve(()=>e(F),()=>{r(A,pe({items:e(F),itemToString:h=>h.label,itemToValue:h=>h.value}))}),ve(()=>e($),()=>{r(N,pe({items:e($),itemToString:h=>h.label,itemToValue:h=>h.value}))}),Dt(),Re();var de=Pr(),be=d(de);c(be,{class:"w-20",placeholder:"HH",get collection(){return e(A)},get value(){return e(L)},get inputValue(){return e(q)},onOpenChange:D,onInputValueChange:J,onValueChange:f,multiple:!1,selectionBehavior:"replace",children:(h,x)=>{var j=Vr(),E=_(j);c.Control(E,{children:(S,G)=>{var H=Sr(),U=_(H);c.Input(U,{});var Q=l(U,2);c.Trigger(Q,{}),v(S,H)},$$slots:{default:!0}});var he=l(E,2);gt(he,{children:(S,G)=>{c.Positioner(S,{children:(H,U)=>{c.Content(H,{class:`bg-white border shadow\r
                        max-h-40 overflow-y-auto overscroll-contain`,children:(Q,we)=>{var ne=oe(),ce=_(ne);ue(ce,1,()=>e(F),ge=>ge.value,(ge,fe)=>{c.Item(ge,{get item(){return e(fe)},children:(De,ze)=>{c.ItemText(De,{children:(He,Ue)=>{K();var le=ie();ae(()=>M(le,(e(fe),O(()=>e(fe).label)))),v(He,le)},$$slots:{default:!0}})},$$slots:{default:!0}})}),v(Q,ne)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),v(h,j)},$$slots:{default:!0}});var ye=l(be,4);c(ye,{class:"w-20",placeholder:"MM",get collection(){return e(N)},get value(){return e(b)},get inputValue(){return e(C)},onOpenChange:W,onInputValueChange:z,onValueChange:Y,multiple:!1,selectionBehavior:"replace",children:(h,x)=>{var j=wr(),E=_(j);c.Control(E,{children:(S,G)=>{var H=Ir(),U=_(H);c.Input(U,{});var Q=l(U,2);c.Trigger(Q,{}),v(S,H)},$$slots:{default:!0}});var he=l(E,2);gt(he,{children:(S,G)=>{c.Positioner(S,{children:(H,U)=>{c.Content(H,{class:`bg-white border shadow\r
                        max-h-40 overflow-y-auto overscroll-contain`,children:(Q,we)=>{var ne=oe(),ce=_(ne);ue(ce,1,()=>e($),ge=>ge.value,(ge,fe)=>{c.Item(ge,{get item(){return e(fe)},children:(De,ze)=>{c.ItemText(De,{children:(He,Ue)=>{K();var le=ie();ae(()=>M(le,(e(fe),O(()=>e(fe).label)))),v(He,le)},$$slots:{default:!0}})},$$slots:{default:!0}})}),v(Q,ne)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),v(h,j)},$$slots:{default:!0}}),u(de),v(se,de),Me()}var Tr=T("<!> <!>",1),kr=T("<!> <!>",1);function _e(se,m){Be(m,!1);let A=te(m,"collection",8),N=te(m,"value",24,()=>[]),k=te(m,"placeholder",8,""),R=te(m,"onOpenChange",8,()=>{}),re=te(m,"onInputValueChange",8,()=>{}),g=te(m,"onValueChange",8,()=>{}),y=te(m,"contentClass",8,"bg-white border border-gray-300 shadow-lg max-h-64 overflow-y-auto"),P=te(m,"className",8,"w-72");Re(),c(se,{get class(){return P()},get placeholder(){return k()},get collection(){return A()},get onOpenChange(){return R()},get onInputValueChange(){return re()},get onValueChange(){return g()},get value(){return N()},multiple:!1,inputBehavior:"autohighlight",openOnClick:!0,children:(F,$)=>{var L=kr(),b=_(L);c.Control(b,{$$events:{click:()=>A()?.open?.()},children:(C,B)=>{var D=Tr(),W=_(D);c.Input(W,{});var f=l(W,2);c.Trigger(f,{}),v(C,D)},$$slots:{default:!0}});var q=l(b,2);gt(q,{children:(C,B)=>{c.Positioner(C,{children:(D,W)=>{c.Content(D,{get class(){return y()},children:(f,Y)=>{var J=oe(),z=_(J);mr(z,m,"default",{}),v(f,J)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),v(F,L)},$$slots:{default:!0}}),Me()}var yr=T("<!> <!>",1),Dr=T("<!> <!>",1),Hr=T("<!> <!>",1),Or=T("<!> <!>",1),Lr=T("<!> <!>",1),Br=T("<!> <!>",1),Mr=T("<!> <!>",1),Rr=T("<!> <!>",1),Fr=T('<div class="fixed inset-0 bg-white/70 flex items-center justify-center z-50"><!></div>'),qr=T(`<div class="flex flex-col gap-2 mb-8"><div class="flex gap-4"><div class="flex flex-col gap-1"><label for="">Pilih Tanggal:</label> <div class="relative inline-block w-72"><input class="input w-full pr-10 cursor-pointer" placeholder="Pilih tanggal" readonly=""/> <svg class="absolute right-3 top-1/2 -translate-y-1/2
                        w-5 h-5 text-black pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></div> <div class="flex flex-col gap-1"><label for="">Pilih VT:</label> <!></div></div> <div class="flex gap-4"><div class="flex flex-col gap-1"><label for="">Pilih Rute:</label> <!></div> <div class="flex flex-col gap-1"><label for="">Pilih Supervisor:</label> <!></div></div> <div class="flex gap-4"><div class="flex flex-col gap-1"><label for="">Pilih Driver Shift Pagi:</label> <!></div> <div class="flex flex-col gap-1"><label for="">Pilih Helper Shift Pagi:</label> <!></div></div> <div class="flex gap-4"><div class="flex flex-col gap-1"><label for="">Pilih Driver Shift Malam:</label> <!></div> <div class="flex flex-col gap-1"><label for="">Pilih Helper Shift Malam:</label> <!></div></div> <div class="flex gap-4"><div class="flex flex-col gap-1"><label for="">Kapasitas BBM:</label> <div class="relative w-72"><input type="text" inputmode="numeric" pattern="[0-9]*" class="input w-full pr-10" placeholder="0"/> <span class="absolute right-3 top-1/2 -translate-y-1/2
                        text-sm opacity-70 pointer-events-none">L</span></div></div> <div class="flex flex-col gap-1"><label for="">Pilih Dispatcher:</label> <!></div></div> <div class="flex gap-4 items-end"><div class="flex flex-col gap-1"><label for="">Pilih Waktu Keluar VT:</label> <div class="relative inline-block w-44"><input class="input w-43 cursor-pointer" placeholder="Pilih tanggal" readonly=""/> <svg class="absolute right-3 top-1/2 -translate-y-1/2
                        w-5 h-5 text-black pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div> <!></div> <div class="flex flex-col gap-1"><label for="">Pilih Waktu Kembali VT:</label> <div class="relative inline-block w-44"><input class="input w-43 cursor-pointer" placeholder="Pilih tanggal" readonly=""/> <svg class="absolute right-3 top-1/2 -translate-y-1/2
                        w-5 h-5 text-black pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div> <!></div> <!></div> <!></div>`);function Yr(se,m){Be(m,!1);const A=p(),N=p(),k=p(),R=p(),re=p(),g=p(),y=p();let P=p(!1);const F=yt();let $=p("");const L=t=>{const n=t.target.value;if(n===""){r($,"");return}/^\d+$/.test(n)&&r($,n)};let b=p("18:00"),q=p("16:00"),C=[],B=p([]),D=p([]),W=p([]),f=p([]);const Y=t=>t?.[0]??null,J=(t="")=>{const n=Y(e(f)),a=C.filter(s=>{const o=s.nama_personel.toLowerCase().includes(t),i=n&&String(s.personel_id)===String(n);return o&&!i});return bt(a)},z=(t="")=>{const n=Y(e(W)),a=C.filter(s=>{const o=s.nama_personel.toLowerCase().includes(t),i=n&&String(s.personel_id)===String(n);return o&&!i});return bt(a)},de=t=>{const n=(t.inputValue??"").toLowerCase();r(B,J(n))},be=t=>{const n=(t.inputValue??"").toLowerCase();r(D,z(n))},ye=t=>{r(W,t.value),r(D,z("")),E(e(W)?.[0],1)},h=t=>{r(f,t.value),r(B,J("")),E(e(f)?.[0],2)},x=()=>{r(B,J(""))},j=()=>{r(D,z(""))},E=(t,n=1)=>{if(!t)return;const a=C.find(i=>String(i.personel_id)===String(t));if(!a)return;const s=a.def_helper;if(!s){n===1&&r(U,[]),n===2&&r(Q,[]);return}S.find(i=>String(i.personel_id)===String(s))&&(n===1&&(r(U,[String(s)]),r(G,ne("")),r(H,ce(""))),n===2&&(r(Q,[String(s)]),r(H,ce("")),r(G,ne(""))))},he=(t,n)=>{if(!n||t.some(o=>String(o.personel_id)===String(n)))return t;const s=S.find(o=>String(o.personel_id)===String(n));return s?[s,...t]:t};let S=[],G=p([]),H=p([]),U=p([]),Q=p([]);const we=t=>t?.[0]??null,ne=(t="")=>{const n=we(e(Q));let a=S.filter(s=>{const o=s.nama_personel.toLowerCase().includes(t),i=n&&String(s.personel_id)===String(n);return o&&!i});return he(a,we(e(U)))},ce=(t="")=>{const n=we(e(U));let a=S.filter(s=>{const o=s.nama_personel.toLowerCase().includes(t),i=n&&String(s.personel_id)===String(n);return o&&!i});return he(a,we(e(Q)))},ge=t=>{const n=(t.inputValue??"").toLowerCase();r(G,ne(n))},fe=t=>{const n=(t.inputValue??"").toLowerCase();r(H,ce(n))},De=t=>{r(U,t.value),r(H,ce(""))},ze=t=>{r(Q,t.value),r(G,ne(""))},He=()=>{r(G,ne(""))},Ue=()=>{r(H,ce(""))};let le=[],me=p([]),Oe=p([]),_t=!1;const Ot=t=>{const n=(t.inputValue??"").toLowerCase();r(me,le.filter(a=>(a.nama??"").toLowerCase().includes(n)))},Lt=t=>{_t=!0,r(Oe,t.value),r(me,le)},Bt=()=>{r(me,le)};let Fe=[],Pe=p([]),Ae=p([]);const Mt=t=>{const n=(t.inputValue??"").toLowerCase();r(Pe,Fe.filter(a=>a.nama.toLowerCase().includes(n)))},Rt=t=>{r(Ae,t.value)},Ft=()=>{r(Pe,Fe)};let Te=[],Ce=p([]),qe=p([]);const qt=t=>{const n=(t.inputValue??"").toLowerCase();r(Ce,Te.filter(a=>(a.nama_rute??"").toLowerCase().includes(n)))},Yt=t=>{r(qe,t.value),r(Ce,Te);const n=e(qe)?.[0];if(!n)return;const a=Te.find(o=>String(o.rute_id)===String(n));if(!a)return;const s=a.user_id;s&&((!_t||!e(Oe)?.length)&&r(Oe,[String(s)]),r(me,le))},Jt=()=>{r(Ce,Te)};let xe=[],Se=p([]),Le=p([]),$t=p();const zt=()=>{r(Se,xe)},Ut=()=>{const t=e(Le)?.[0];return t?xe.find(n=>String(n.vt_id)===String(t))??null:null},At=t=>{const n=(t.inputValue??"").toLowerCase().trim(),a=Ut();if(!n){r(Se,xe);return}let s=xe.filter(o=>`${o.no_vt??""} - ${o.plat??""} ${o.vt_id??""}`.toLowerCase().includes(n));a&&!s.some(o=>String(o.vt_id)===String(a.vt_id))&&(s=[a,...s]),r(Se,s)},jt=t=>{r(Le,t.value),r(B,J("")),r(D,z(""))},Et=()=>{const t=e(Le)?.[0];if(!t)return[];const n=xe.find(a=>String(a.vt_id)===String(t));return n?(n.personels??[]).filter(a=>a.is_driver).map(a=>String(a.personel_id)):[]},bt=t=>{const n=Et();return[...t].sort((a,s)=>{const o=n.includes(String(a.personel_id)),i=n.includes(String(s.personel_id));return o&&!i?-1:!o&&i?1:a.nama_personel.localeCompare(s.nama_personel)})};let je=p(),Ee=p(),Ke=p(),Ne="",We="",Ge="";const Kt=async()=>{xe=(await $e.getVT()).vts??[],r(Se,xe),Te=(await $e.getRute()).rutes,r(Ce,Te),le=(await $e.getSupervisor()).users,r(me,le),Fe=(await $e.getDispatcher()).users,r(Pe,Fe),C=(await $e.getDrivers()).drivers??[],r(B,J("")),r(D,z("")),S=(await $e.getHelpers()).helpers??[],r(G,ne("")),r(H,ce(""))},Nt=async()=>{r(P,!0);const t=`${We} ${e(b)}:00`,n=`${Ge} ${e(q)}:00`,a={date:Ne,vt_id:e(Le)[0],rute_id:e(qe)[0],supervisor_id:e(Oe)[0],dispatcher_id:e(Ae)[0],driver1:e(W)[0],helper1:e(U)[0],driver2:e(f)[0],helper2:e(Q)[0],time_out:t,time_back:n,bbm:e($)};try{const s=await $e.createSJ(a);F("refresh"),Tt?.success("Surat Jalan berhasil dibuat")}catch(s){console.error(s),Tt?.error(s.message||"Gagal membuat Surat Jalan")}r(P,!1)};ft(()=>{const t=new Date,n=new Date(t);n.setDate(t.getDate()+1),Je(e(je),{mode:"single",dateFormat:"Y-m-d",altInput:!0,altFormat:"d-m-Y",defaultDate:t,onChange:([a])=>{a&&(Ne=ke(a))}}),Je(e(Ee),{mode:"single",dateFormat:"Y-m-d",altInput:!0,altFormat:"d-m-Y",defaultDate:t,onChange:([a])=>{a&&(We=ke(a))}}),Je(e(Ke),{mode:"single",dateFormat:"Y-m-d",altInput:!0,altFormat:"d-m-Y",defaultDate:n,onChange:([a])=>{a&&(Ge=ke(a))}}),Ne=ke(t),We=ke(t),Ge=ke(n),Kt()});const ke=t=>t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0");ve(()=>e(B),()=>{r(A,pe({items:e(B),itemToString:t=>t.nama_personel,itemToValue:t=>String(t.personel_id)}))}),ve(()=>e(D),()=>{r(N,pe({items:e(D),itemToString:t=>t.nama_personel,itemToValue:t=>String(t.personel_id)}))}),ve(()=>e(G),()=>{r(k,pe({items:e(G),itemToString:t=>t.nama_personel,itemToValue:t=>String(t.personel_id)}))}),ve(()=>e(H),()=>{r(R,pe({items:e(H),itemToString:t=>t.nama_personel,itemToValue:t=>String(t.personel_id)}))}),ve(()=>e(me),()=>{r(re,pe({items:e(me),itemToString:t=>t.nama,itemToValue:t=>String(t.user_id)}))}),ve(()=>e(Pe),()=>{r(g,pe({items:e(Pe),itemToString:t=>t.nama,itemToValue:t=>String(t.user_id)}))}),ve(()=>e(Ce),()=>{r(y,pe({items:e(Ce),itemToString:t=>t.nama_rute,itemToValue:t=>String(t.rute_id)}))}),ve(()=>e(Se),()=>{r($t,pe({items:e(Se),itemToString:t=>`${t.no_vt} - ${t.plat}`,itemToValue:t=>String(t.vt_id)}))}),Dt(),Re();var Qe=qr(),Xe=d(Qe),Ze=d(Xe),Ct=l(d(Ze),2),Wt=d(Ct);Ye(Wt,t=>r(je,t),()=>e(je)),K(2),u(Ct),u(Ze);var xt=l(Ze,2),Gt=l(d(xt),2);_e(Gt,{placeholder:"Cari VT...",get collection(){return e($t)},onOpenChange:zt,onInputValueChange:At,get value(){return e(Le)},onValueChange:jt,children:(t,n)=>{var a=oe(),s=_(a);ue(s,1,()=>e(Se),o=>o.vt_id,(o,i)=>{c.Item(o,{get item(){return e(i)},children:(X,Ve)=>{var V=yr(),I=_(V);c.ItemText(I,{children:(ee,Ie)=>{K();var w=ie();ae(()=>M(w,`${e(i),O(()=>e(i).no_vt)??""} — ${e(i),O(()=>e(i).plat)??""}`)),v(ee,w)},$$slots:{default:!0}});var Z=l(I,2);c.ItemIndicator(Z,{}),v(X,V)},$$slots:{default:!0}})}),v(t,a)},$$slots:{default:!0}}),u(xt),u(Xe);var et=l(Xe,2),tt=d(et),Qt=l(d(tt),2);_e(Qt,{placeholder:"Cari Rute...",get collection(){return e(y)},onInputValueChange:qt,onValueChange:Yt,onOpenChange:Jt,get value(){return e(qe)},children:(t,n)=>{var a=oe(),s=_(a);ue(s,1,()=>e(Ce),o=>o.rute_id,(o,i)=>{c.Item(o,{get item(){return e(i)},children:(X,Ve)=>{var V=Dr(),I=_(V);c.ItemText(I,{children:(ee,Ie)=>{K();var w=ie();ae(()=>M(w,(e(i),O(()=>e(i).nama_rute)))),v(ee,w)},$$slots:{default:!0}});var Z=l(I,2);c.ItemIndicator(Z,{}),v(X,V)},$$slots:{default:!0}})}),v(t,a)},$$slots:{default:!0}}),u(tt);var St=l(tt,2),Xt=l(d(St),2);_e(Xt,{placeholder:"Cari Supervisor...",get collection(){return e(re)},onOpenChange:Bt,onInputValueChange:Ot,onValueChange:Lt,get value(){return e(Oe)},children:(t,n)=>{var a=oe(),s=_(a);ue(s,1,()=>e(me),o=>o.user_id,(o,i)=>{c.Item(o,{get item(){return e(i)},children:(X,Ve)=>{var V=Hr(),I=_(V);c.ItemText(I,{children:(ee,Ie)=>{K();var w=ie();ae(()=>M(w,(e(i),O(()=>e(i).nama)))),v(ee,w)},$$slots:{default:!0}});var Z=l(I,2);c.ItemIndicator(Z,{}),v(X,V)},$$slots:{default:!0}})}),v(t,a)},$$slots:{default:!0}}),u(St),u(et);var rt=l(et,2),at=d(rt),Zt=l(d(at),2);_e(Zt,{placeholder:"Cari Driver...",get collection(){return e(A)},onOpenChange:x,onInputValueChange:de,onValueChange:ye,get value(){return e(W)},children:(t,n)=>{var a=oe(),s=_(a);ue(s,1,()=>e(B),o=>o.personel_id,(o,i)=>{c.Item(o,{get item(){return e(i)},children:(X,Ve)=>{var V=Or(),I=_(V);c.ItemText(I,{children:(ee,Ie)=>{K();var w=ie();ae(()=>M(w,(e(i),O(()=>e(i).nama_personel)))),v(ee,w)},$$slots:{default:!0}});var Z=l(I,2);c.ItemIndicator(Z,{}),v(X,V)},$$slots:{default:!0}})}),v(t,a)},$$slots:{default:!0}}),u(at);var Vt=l(at,2),er=l(d(Vt),2);_e(er,{placeholder:"Cari Helper...",get collection(){return e(k)},onOpenChange:He,onInputValueChange:ge,onValueChange:De,get value(){return e(U)},children:(t,n)=>{var a=oe(),s=_(a);ue(s,1,()=>e(G),o=>o.personel_id,(o,i)=>{c.Item(o,{get item(){return e(i)},children:(X,Ve)=>{var V=Lr(),I=_(V);c.ItemText(I,{children:(ee,Ie)=>{K();var w=ie();ae(()=>M(w,(e(i),O(()=>e(i).nama_personel)))),v(ee,w)},$$slots:{default:!0}});var Z=l(I,2);c.ItemIndicator(Z,{}),v(X,V)},$$slots:{default:!0}})}),v(t,a)},$$slots:{default:!0}}),u(Vt),u(rt);var nt=l(rt,2),lt=d(nt),tr=l(d(lt),2);_e(tr,{placeholder:"Cari Driver...",get collection(){return e(N)},onOpenChange:j,onInputValueChange:be,onValueChange:h,get value(){return e(f)},children:(t,n)=>{var a=oe(),s=_(a);ue(s,1,()=>e(D),o=>o.personel_id,(o,i)=>{c.Item(o,{get item(){return e(i)},children:(X,Ve)=>{var V=Br(),I=_(V);c.ItemText(I,{children:(ee,Ie)=>{K();var w=ie();ae(()=>M(w,(e(i),O(()=>e(i).nama_personel)))),v(ee,w)},$$slots:{default:!0}});var Z=l(I,2);c.ItemIndicator(Z,{}),v(X,V)},$$slots:{default:!0}})}),v(t,a)},$$slots:{default:!0}}),u(lt);var It=l(lt,2),rr=l(d(It),2);_e(rr,{placeholder:"Cari Helper...",get collection(){return e(R)},onOpenChange:Ue,onInputValueChange:fe,onValueChange:ze,get value(){return e(Q)},children:(t,n)=>{var a=oe(),s=_(a);ue(s,1,()=>e(H),o=>o.personel_id,(o,i)=>{c.Item(o,{get item(){return e(i)},children:(X,Ve)=>{var V=Mr(),I=_(V);c.ItemText(I,{children:(ee,Ie)=>{K();var w=ie();ae(()=>M(w,(e(i),O(()=>e(i).nama_personel)))),v(ee,w)},$$slots:{default:!0}});var Z=l(I,2);c.ItemIndicator(Z,{}),v(X,V)},$$slots:{default:!0}})}),v(t,a)},$$slots:{default:!0}}),u(It),u(nt);var ot=l(nt,2),st=d(ot),wt=l(d(st),2),it=d(wt);pr(it),K(2),u(wt),u(st);var Pt=l(st,2),ar=l(d(Pt),2);_e(ar,{placeholder:"Cari Dispatcher...",get collection(){return e(g)},onOpenChange:Ft,onInputValueChange:Mt,onValueChange:Rt,get value(){return e(Ae)},children:(t,n)=>{var a=oe(),s=_(a);ue(s,1,()=>e(Pe),o=>o.user_id,(o,i)=>{c.Item(o,{get item(){return e(i)},children:(X,Ve)=>{var V=Rr(),I=_(V);c.ItemText(I,{children:(ee,Ie)=>{K();var w=ie();ae(()=>M(w,(e(i),O(()=>e(i).nama)))),v(ee,w)},$$slots:{default:!0}});var Z=l(I,2);c.ItemIndicator(Z,{}),v(X,V)},$$slots:{default:!0}})}),v(t,a)},$$slots:{default:!0}}),u(Pt),u(ot);var ut=l(ot,2),dt=d(ut),ct=l(d(dt),2),nr=d(ct);Ye(nr,t=>r(Ee,t),()=>e(Ee)),K(2),u(ct);var lr=l(ct,2);kt(lr,{get value(){return e(b)},set value(t){r(b,t)},$$legacy:!0}),u(dt);var vt=l(dt,2),pt=l(d(vt),2),or=d(pt);Ye(or,t=>r(Ke,t),()=>e(Ke)),K(2),u(pt);var sr=l(pt,2);kt(sr,{get value(){return e(q)},set value(t){r(q,t)},$$legacy:!0}),u(vt);var ir=l(vt,2);hr(ir,{severity:"success",$$events:{click:Nt},children:(t,n)=>{K();var a=ie("Simpan");v(t,a)},$$slots:{default:!0}}),u(ut);var ur=l(ut,2);{var dr=t=>{var n=Fr(),a=d(n);Ht(a,{}),u(n),v(t,n)};ht(ur,t=>{e(P)&&t(dr)})}u(Qe),ae(()=>gr(it,e($))),mt("input",it,L),v(se,Qe),Me()}var Jr=T('<div class="fixed inset-0 bg-white/70 flex items-center justify-center z-50"><!></div>'),zr=T(`<div><h1 class="text-2xl font-semibold mb-3">Surat Jalan</h1> <label for="" class="text-sm text-gray-600">Pilih Tanggal:</label> <div class="relative ml-2 mt-2 inline-block w-72"><input class="input w-full pr-10 cursor-pointer" placeholder="Pilih range tanggal" readonly=""/> <svg class="absolute right-3 top-1/2 -translate-y-1/2
                w-5 h-5 text-black pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div> <!> <h1 class="text-xl font-semibold mb-3 mt-8">Buat Surat Jalan</h1> <!> <!> <!></div>`);function sa(se,m){Be(m,!1);let A=p(!1),N=p(),k=[],R=p(!1),re=p(""),g=p([]);const y=async()=>{r(A,!0);try{const f=await $e.getSJByDates({dates:k});r(g,f.surat_jalans)}catch(f){console.error(f)}r(A,!1)},P=f=>f.getFullYear()+"-"+String(f.getMonth()+1).padStart(2,"0")+"-"+String(f.getDate()).padStart(2,"0"),F=f=>{r(re,`${cr}/uploads/sj/${f}.pdf`),r(R,!0)};ft(()=>{const f=new Date;Je(e(N),{mode:"range",dateFormat:"Y-m-d",altInput:!0,altFormat:"d-m-Y",locale:{rangeSeparator:" sampai "},defaultDate:[f,f],onChange:(Y,J)=>{if(Y.length===1)k=[P(Y[0])];else if(Y.length===2){const z=P(Y[0]),de=P(Y[1]);z===de?k=[z]:k=[z,de],y()}console.log("dateArray:",k)}}),k=[P(f)],y()}),Re();var $=zr(),L=l(d($),4),b=d(L);Ye(b,f=>r(N,f),()=>e(N)),K(2),u(L);var q=l(L,2);xr(q,{get surjals(){return e(g)},onPreview:F});var C=l(q,4);Yr(C,{$$events:{refresh:y}});var B=l(C,2);$r(B,{get show(){return e(R)},get pdfUrl(){return e(re)},onClose:()=>r(R,!1)});var D=l(B,2);{var W=f=>{var Y=Jr(),J=d(Y);Ht(J,{}),u(Y),v(f,Y)};ht(D,f=>{e(A)&&f(W)})}u($),v(se,$),Me()}export{sa as component};
