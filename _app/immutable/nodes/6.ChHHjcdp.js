import"../chunks/DsnmJJEf.js";import"../chunks/B-aUsau7.js";import{o as Ze}from"../chunks/D6pxDlqU.js";import{p as et,b as tt,c as a,s as l,g as e,m as E,r,d,f as Ce,n as V,t as Q,h as z}from"../chunks/DZj3V7hs.js";import{s as k}from"../chunks/6nlo_wlY.js";import{i as j}from"../chunks/C_Z-GkL4.js";import{e as at,i as rt}from"../chunks/DUh4gHIz.js";import{f as h,a as u,t as M}from"../chunks/Cmeh_zQv.js";import{a as ue,r as X,L as st,n as _e,s as Se,B as lt}from"../chunks/BwiHho8M.js";import{s as Le}from"../chunks/zgFPYRNL.js";import{e as _}from"../chunks/H2sK6pkz.js";import{b as Z}from"../chunks/CBjS0z1u.js";import{b as be}from"../chunks/BAXbHwTh.js";import{s as it,b as nt}from"../chunks/wx1cnYVi.js";import{i as ot}from"../chunks/B2kuW2zI.js";import{c as pt}from"../chunks/P9oBW4u-.js";import{B as F}from"../chunks/BjJbZ4yg.js";var dt=h(`<td><input class="input w-full"/></td> <td><input class="input w-full"/></td> <td><label class="inline-flex items-center gap-2 px-3 py-1.5
                                border rounded-lg cursor-pointer
                                text-sm text-gray-600 hover:bg-gray-100"><span> </span> <input type="file" accept="image/*" class="hidden"/></label></td> <td><label class="inline-flex items-center gap-2 px-3 py-1.5
                                border rounded-lg cursor-pointer
                                text-sm text-gray-600 hover:bg-gray-100"><span> </span> <input type="file" accept="image/*,.pdf" class="hidden"/></label></td> <td><label class="inline-flex items-center gap-2 px-3 py-1.5 mb-1
                                border rounded-lg cursor-pointer
                                text-sm text-gray-600 hover:bg-gray-100"><span> </span> <input type="file" accept="image/*,.pdf" class="hidden"/></label> <div class="relative"><input type="date" class="input w-full pr-10 cursor-pointer svelte-mp6tia"/> <svg class="absolute right-3 top-1/2 -translate-y-1/2
                                        w-5 h-5 text-black cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></td> <td><label class="inline-flex items-center gap-2 px-3 py-1.5 mb-1
                                border rounded-lg cursor-pointer
                                text-sm text-gray-600 hover:bg-gray-100"><span> </span> <input type="file" accept="image/*,.pdf" class="hidden"/></label> <div class="relative"><input type="date" class="input w-full pr-10 cursor-pointer svelte-mp6tia"/> <svg class="absolute right-3 top-1/2 -translate-y-1/2
                                        w-5 h-5 text-black cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></td> <td class="space-x-2 whitespace-nowrap"><!> <!></td>`,1),ct=h('<button class="text-blue-600 hover:underline text-left">Show</button>'),vt=h("<span>-</span>"),ut=h("<span> </span>"),_t=h("<span>-</span>"),ft=h("<span> </span>"),mt=h('<td> </td> <td> </td> <td><!></td> <td><!></td> <td><div class="flex flex-col gap-1"><!> <!></div></td> <td><div class="flex flex-col gap-1"><!> <!></div></td> <td class="space-x-2"><!> <!></td>',1),ht=h("<tr><!></tr>"),xt=h(`<tr><td><input class="input w-full"/></td><td><input class="input w-full"/></td><td><label class="inline-flex items-center gap-2 px-3 py-1.5
                            border rounded-lg cursor-pointer
                            text-sm text-gray-600 hover:bg-gray-100"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M12 12v9M8 12l4-4 4 4"></path></svg> <span> </span> <input type="file" accept="image/*" class="hidden"/></label></td><td><label class="inline-flex items-center gap-2 px-3 py-1.5
                            border rounded-lg cursor-pointer
                            text-sm text-gray-600 hover:bg-gray-100"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M12 12v9M8 12l4-4 4 4"></path></svg> <span> </span> <input type="file" accept="image/*,.pdf" class="hidden"/></label></td><td><label class="inline-flex items-center gap-2 px-3 py-1.5 mb-1
                            border rounded-lg cursor-pointer
                            text-sm text-gray-600 hover:bg-gray-100"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M12 12v9M8 12l4-4 4 4"></path></svg> <span> </span> <input type="file" accept="image/*,.pdf" class="hidden"/></label> <div class="relative"><input type="date" class="input w-full pr-10 cursor-pointer svelte-mp6tia"/> <svg class="absolute right-3 top-1/2 -translate-y-1/2
                                    w-5 h-5 text-black cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></td><td><label class="inline-flex items-center gap-2 px-3 py-1.5 mb-1
                            border rounded-lg cursor-pointer
                            text-sm text-gray-600 hover:bg-gray-100"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M12 12v9M8 12l4-4 4 4"></path></svg> <span> </span> <input type="file" accept="image/*,.pdf" class="hidden"/></label> <div class="relative"><input type="date" class="input w-full pr-10 cursor-pointer svelte-mp6tia"/> <svg class="absolute right-3 top-1/2 -translate-y-1/2
                                    w-5 h-5 text-black cursor-pointer" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10m-11 8h12a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div></td><td class="space-x-2 whitespace-nowrap"><!> <!></td></tr>`),gt=h('<tr><td colspan="7"><!></td></tr>'),bt=h('<iframe class="w-full h-full rounded-xl border"></iframe>'),yt=h('<img class="max-w-full max-h-full object-contain rounded-xl"/>'),kt=h('<div class="fixed inset-0 bg-black/60 flex items-center justify-center z-50"><div class="bg-white rounded-2xl w-[70vw] h-[70vh] p-4 flex flex-col"><div class="flex justify-between items-center mb-3"><h2 class="font-semibold text-lg"> </h2> <button class="text-xl hover:opacity-70">âœ•</button></div> <div class="flex-1 overflow-auto flex items-center justify-center"><!></div></div></div>'),$t=h('<div class="fixed inset-0 bg-white/70 flex items-center justify-center z-50"><!></div>'),wt=h('<div class="table-wrap"><p class="text-3xl font-semibold mb-4">Helper</p> <table class="table caption-bottom"><thead><tr><th>Nama</th><th>No. Handphone</th><th>Foto</th><th>KTP</th><th>SIM</th><th>SIML</th><th>Action</th></tr></thead><tbody class="[&amp;>tr:hover:preset-tonal-primary]"><!><!></tbody></table> <!> <!></div>');function Ut(Ge,Be){et(Be,!1);let P=E(!1),A=E([]),ye=E(!1),fe=E(""),he=E("");const Te=async()=>{d(P,!0);try{const t=await ue.getHelpers();d(A,t.helpers)}catch(t){console.error("Error fetching helpers:",t)}d(P,!1)},ze=async()=>{d(P,!0);try{const t=await ue.getLastHelper();d(A,[...e(A),t.helper])}catch(t){console.error("Error fetching last helper:",t)}d(P,!1)},Ae=async t=>{d(P,!0);try{const s=await ue.getHelperByID({personel_id:t});d(A,e(A).map(o=>o.personel_id===t?s.helper:o))}catch(s){console.error("Error fetching helper by ID:",s)}d(P,!1)};function xe(t,s){d(fe,`${lt}/${t}`),d(he,s),d(ye,!0)}function He(){d(ye,!1),d(fe,""),d(he,"")}function Ie(t){if(!t)return null;const s=new Date(t),o=String(s.getDate()).padStart(2,"0"),$=String(s.getMonth()+1).padStart(2,"0"),g=s.getFullYear();return`${o}-${$}-${g}`}function ge(t){if(!t)return null;const s=new Date(t),o=new Date;return o.setHours(0,0,0,0),s>=o?{text:`Aktif sampai ${Ie(t)}`,class:"text-green-600"}:{text:`Nonaktif sejak ${Ie(t)}`,class:"text-red-600"}}let ee=E(null),ke=E(null),n=E({nama_personel:"",no_hp:"",foto:"",ktp:"",sim:"",siml:"",sim_expired_at:"",siml_expired_at:"",is_driver:0});function je(){d(n,{nama_personel:"",no_hp:"",foto:"",ktp:"",sim:"",siml:"",sim_expired_at:"",siml_expired_at:"",is_driver:0})}function Ue(){je(),d(ee,"add")}function Ke(t){d(ee,"edit"),d(ke,t.personel_id),d(n,{...t})}function $e(){d(ee,null),d(ke,null),je()}async function De(){if(d(P,!0),e(ee)==="add")try{await ue.createPersonel(e(n)),await ze()}catch(t){console.error("Error creating personel:",t),_e?.error("Gagal menambahkan helper")}finally{_e?.success("Helper berhasil ditambahkan")}if(e(ee)==="edit")try{const t={...e(n)};t.foto instanceof File||delete t.foto,t.ktp instanceof File||delete t.ktp,t.sim instanceof File||delete t.sim,t.siml instanceof File||delete t.siml;const s=await ue.updatePersonel(t);await Ae(e(n).personel_id)}catch(t){console.error("Error updating personel:",t),_e?.error("Gagal memperbarui helper")}finally{_e?.success("Helper berhasil diperbarui")}$e(),d(P,!1)}async function Ne(t){if(await pt("Hapus data ini?")){d(P,!0);try{await ue.deletePersonel({personel_id:t}),d(A,e(A).filter(o=>o.personel_id!==t))}catch(o){console.error("Error deleting personel:",o),_e?.error("Gagal menghapus helper")}finally{_e?.success("helper berhasil dihapus")}d(P,!1)}}function U(t,s){const o=t.target.files[0];o&&z(n,e(n)[s]=o)}let K=E(),N=E();function R(t){t?.showPicker?.(),t?.focus()}function Re(t){return t?t.toLowerCase().endsWith(".pdf"):!1}Ze(()=>{Te()}),ot();var we=wt(),Me=l(a(we),2),Ee=l(a(Me)),Ve=a(Ee);at(Ve,1,()=>e(A),rt,(t,s)=>{var o=ht(),$=a(o);{var g=x=>{var S=dt(),b=Ce(S),W=a(b);X(W),r(b);var B=l(b,2),f=a(B);X(f),r(B);var m=l(B,2),Y=a(m),ae=a(Y),me=a(ae,!0);r(ae);var C=l(ae,2);r(Y),r(m);var L=l(m,2),q=a(L),re=a(q),se=a(re,!0);r(re);var le=l(re,2);r(q),r(L);var w=l(L,2),ie=a(w),G=a(ie),ne=a(G,!0);r(G);var oe=l(G,2);r(ie);var J=l(ie,2),D=a(J);X(D),be(D,v=>d(K,v),()=>e(K));var pe=l(D,2);r(J),r(w);var H=l(w,2),de=a(H),O=a(de),ce=a(O,!0);r(O);var ve=l(O,2);r(de);var c=l(de,2),T=a(c);X(T),be(T,v=>d(N,v),()=>e(N));var i=l(T,2);r(c),r(H);var p=l(H,2),y=a(p);F(y,{severity:"success",$$events:{click:De},children:(v,Xe)=>{V();var Pe=M("Simpan");u(v,Pe)},$$slots:{default:!0}});var I=l(y,2);F(I,{severity:"danger",$$events:{click:$e},children:(v,Xe)=>{V();var Pe=M("Batal");u(v,Pe)},$$slots:{default:!0}}),r(p),Q(()=>{k(me,e(n).foto?.name??"Ganti Foto"),k(se,e(n).ktp?.name??"Ganti KTP"),k(ne,e(n).sim?.name??"Ganti SIM"),k(ce,e(n).siml?.name??"Ganti SIML")}),Z(W,()=>e(n).nama_personel,v=>z(n,e(n).nama_personel=v)),Z(f,()=>e(n).no_hp,v=>z(n,e(n).no_hp=v)),_("change",C,v=>U(v,"foto")),_("change",le,v=>U(v,"ktp")),_("change",oe,v=>U(v,"sim")),Z(D,()=>e(n).sim_expired_at,v=>z(n,e(n).sim_expired_at=v)),_("click",D,()=>R(e(K))),_("click",pe,()=>R(e(K))),_("change",ve,v=>U(v,"siml")),Z(T,()=>e(n).siml_expired_at,v=>z(n,e(n).siml_expired_at=v)),_("click",T,()=>R(e(N))),_("click",i,()=>R(e(N))),u(x,S)},te=x=>{var S=mt(),b=Ce(S),W=a(b,!0);r(b);var B=l(b,2),f=a(B,!0);r(B);var m=l(B,2),Y=a(m);{var ae=i=>{F(i,{severity:"primary",$$events:{click:()=>xe(e(s).foto,"Foto")},children:(p,y)=>{V();var I=M("Show");u(p,I)},$$slots:{default:!0}})},me=i=>{var p=M("-");u(i,p)};j(Y,i=>{e(s).foto?i(ae):i(me,!1)})}r(m);var C=l(m,2),L=a(C);{var q=i=>{F(i,{severity:"primary",$$events:{click:()=>xe(e(s).ktp,"KTP")},children:(p,y)=>{V();var I=M("Show");u(p,I)},$$slots:{default:!0}})},re=i=>{var p=M("-");u(i,p)};j(L,i=>{e(s).ktp?i(q):i(re,!1)})}r(C);var se=l(C,2),le=a(se),w=a(le);{var ie=i=>{var p=ct();_("click",p,()=>xe(e(s).sim,"SIM")),u(i,p)},G=i=>{var p=vt();u(i,p)};j(w,i=>{e(s).sim?i(ie):i(G,!1)})}var ne=l(w,2);{var oe=i=>{var p=ut(),y=a(p,!0);r(p),Q((I,v)=>{Le(p,1,`text-xs ${I??""}`),k(y,v)},[()=>ge(e(s).sim_expired_at).class,()=>ge(e(s).sim_expired_at).text]),u(i,p)};j(ne,i=>{e(s).sim_expired_at&&i(oe)})}r(le),r(se);var J=l(se,2),D=a(J),pe=a(D);{var H=i=>{F(i,{severity:"primary",$$events:{click:()=>xe(e(s).siml,"SIML")},children:(p,y)=>{V();var I=M("Show");u(p,I)},$$slots:{default:!0}})},de=i=>{var p=_t();u(i,p)};j(pe,i=>{e(s).siml?i(H):i(de,!1)})}var O=l(pe,2);{var ce=i=>{var p=ft(),y=a(p,!0);r(p),Q((I,v)=>{Le(p,1,`text-xs ${I??""}`),k(y,v)},[()=>ge(e(s).siml_expired_at).class,()=>ge(e(s).siml_expired_at).text]),u(i,p)};j(O,i=>{e(s).siml_expired_at&&i(ce)})}r(D),r(J);var ve=l(J,2),c=a(ve);F(c,{severity:"success",$$events:{click:()=>Ke(e(s))},children:(i,p)=>{V();var y=M("Edit");u(i,y)},$$slots:{default:!0}});var T=l(c,2);F(T,{severity:"danger",$$events:{click:()=>Ne(e(s).personel_id)},children:(i,p)=>{V();var y=M("Hapus");u(i,y)},$$slots:{default:!0}}),r(ve),Q(()=>{k(W,e(s).nama_personel),k(f,e(s).no_hp)}),u(x,S)};j($,x=>{e(ee)==="edit"&&e(ke)===e(s).personel_id?x(g):x(te,!1)})}r(o),u(t,o)});var We=l(Ve);{var Ye=t=>{var s=xt(),o=a(s),$=a(o);X($),r(o);var g=l(o),te=a(g);X(te),r(g);var x=l(g),S=a(x),b=l(a(S),2),W=a(b,!0);r(b);var B=l(b,2);r(S),r(x);var f=l(x),m=a(f),Y=l(a(m),2),ae=a(Y,!0);r(Y);var me=l(Y,2);r(m),r(f);var C=l(f),L=a(C),q=l(a(L),2),re=a(q,!0);r(q);var se=l(q,2);r(L);var le=l(L,2),w=a(le);X(w),be(w,c=>d(K,c),()=>e(K));var ie=l(w,2);r(le),r(C);var G=l(C),ne=a(G),oe=l(a(ne),2),J=a(oe,!0);r(oe);var D=l(oe,2);r(ne);var pe=l(ne,2),H=a(pe);X(H),be(H,c=>d(N,c),()=>e(N));var de=l(H,2);r(pe),r(G);var O=l(G),ce=a(O);F(ce,{severity:"success",$$events:{click:De},children:(c,T)=>{V();var i=M("Simpan");u(c,i)},$$slots:{default:!0}});var ve=l(ce,2);F(ve,{severity:"danger",$$events:{click:$e},children:(c,T)=>{V();var i=M("Batal");u(c,i)},$$slots:{default:!0}}),r(O),r(s),Q(()=>{k(W,e(n).foto?.name??"Upload Foto"),k(ae,e(n).ktp?.name??"Upload KTP"),k(re,e(n).sim?.name??"Upload SIM"),k(J,e(n).siml?.name??"Upload SIML")}),Z($,()=>e(n).nama_personel,c=>z(n,e(n).nama_personel=c)),Z(te,()=>e(n).no_hp,c=>z(n,e(n).no_hp=c)),_("change",B,c=>U(c,"foto")),_("change",me,c=>U(c,"ktp")),_("change",se,c=>U(c,"sim")),Z(w,()=>e(n).sim_expired_at,c=>z(n,e(n).sim_expired_at=c)),_("click",w,()=>R(e(K))),_("click",ie,()=>R(e(K))),_("change",D,c=>U(c,"siml")),Z(H,()=>e(n).siml_expired_at,c=>z(n,e(n).siml_expired_at=c)),_("click",H,()=>R(e(N))),_("click",de,()=>R(e(N))),u(t,s)},qe=t=>{var s=gt(),o=a(s),$=a(o);F($,{severity:"success",$$events:{click:Ue},children:(g,te)=>{V();var x=M("+ Tambah");u(g,x)},$$slots:{default:!0}}),r(o),r(s),u(t,s)};j(We,t=>{e(ee)==="add"?t(Ye):t(qe,!1)})}r(Ee),r(Me);var Fe=l(Me,2);{var Je=t=>{var s=kt(),o=a(s),$=a(o),g=a($),te=a(g,!0);r(g);var x=l(g,2);r($);var S=l($,2),b=a(S);{var W=f=>{var m=bt();Q(()=>Se(m,"src",e(fe))),u(f,m)},B=f=>{var m=yt();Q(()=>{Se(m,"src",e(fe)),Se(m,"alt",e(he))}),u(f,m)};j(b,f=>{Re(e(fe))?f(W):f(B,!1)})}r(S),r(o),r(s),Q(()=>k(te,e(he))),_("click",x,He),_("click",o,it(function(f){nt.call(this,Be,f)})),_("click",s,He),u(t,s)};j(Fe,t=>{e(ye)&&t(Je)})}var Oe=l(Fe,2);{var Qe=t=>{var s=$t(),o=a(s);st(o,{}),r(s),u(t,s)};j(Oe,t=>{e(P)&&t(Qe)})}r(we),u(Ge,we),tt()}export{Ut as component};
