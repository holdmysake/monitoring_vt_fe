import"../chunks/DsnmJJEf.js";import"../chunks/B-aUsau7.js";import{o as ce}from"../chunks/D6pxDlqU.js";import{p as pe,l as H,a as ue,s as n,f as Pt,t as P,c as r,g as t,b as me,m as p,d as i,u as x,r as s,i as ge,n as j,h as I}from"../chunks/DZj3V7hs.js";import{s as C}from"../chunks/6nlo_wlY.js";import{i as D}from"../chunks/C_Z-GkL4.js";import{e as It,i as fe}from"../chunks/DUh4gHIz.js";import{f as k,a as u,c as he,b as at}from"../chunks/Cmeh_zQv.js";import{b as _e,a as N,r as R,L as xe,n as W}from"../chunks/71aaOmZ7.js";import{s as Dt}from"../chunks/zgFPYRNL.js";import{e as U}from"../chunks/H2sK6pkz.js";import{b as q}from"../chunks/CBjS0z1u.js";import{i as ke}from"../chunks/B2kuW2zI.js";import{B as et}from"../chunks/ltPLFC_K.js";import{c as we}from"../chunks/P9oBW4u-.js";import{S as ye,T as be}from"../chunks/C-Q09ChZ.js";var Te=k("<option> </option>"),Ve=k(`<button class="px-3 py-1.5 rounded-lg text-sm font-medium
                        bg-gray-100 hover:bg-gray-200 text-gray-700
                        transition-colors duration-200 flex items-center gap-1"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Reset Filter</button>`),$e=k('<div class="flex items-center gap-2 flex-wrap"><span class="text-xs text-gray-600">Filter aktif:</span> <span><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg> </span></div>'),Me=k('<span class="text-xs"> </span>'),Be=k('<span class="text-xs"> </span>'),je=at('<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Simpan',1),Ce=at('<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Batal',1),Le=k('<tr class="bg-emerald-50"><td class="px-6 py-4"><input class="input w-full focus:ring-2 focus:ring-emerald-500" type="text" placeholder="Masukkan plat nomor"/></td><td class="px-6 py-4"><input class="input w-full focus:ring-2 focus:ring-emerald-500" type="text" placeholder="Masukkan no VT"/></td><td class="px-6 py-4"><div class="relative"><input class="input w-full pr-8 focus:ring-2 focus:ring-emerald-500" type="text" inputmode="numeric" placeholder="0"/> <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm">L</span></div></td><td class="px-6 py-4"><div class="flex items-center justify-center gap-2"><!> <!></div></td></tr>'),Se=k(`<tr class="hover:bg-gray-50 transition-colors duration-150"><td class="px-6 py-4"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-lg bg-linear-to-br from-emerald-100 to-green-200 flex items-center justify-center"><svg class="w-5 h-5 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></div> <span class="font-medium text-gray-900"> </span></div></td><td class="px-6 py-4 text-gray-700"> </td><td class="px-6 py-4"><span><svg class="w-3 h-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg> </span></td><td class="px-6 py-4"><div class="flex items-center justify-center gap-2"><button class="px-3 py-1.5 rounded-lg
                                            bg-emerald-500 hover:bg-emerald-600
                                            text-white text-sm font-medium
                                            shadow-sm hover:shadow-md
                                            transition-all duration-200
                                            transform hover:scale-105
                                            flex items-center gap-1"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> Edit</button> <button class="px-3 py-1.5 rounded-lg
                                            bg-red-500 hover:bg-red-600
                                            text-white text-sm font-medium
                                            shadow-sm hover:shadow-md
                                            transition-all duration-200
                                            transform hover:scale-105
                                            flex items-center gap-1"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> Hapus</button></div></td></tr>`),Ke=at('<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Simpan',1),Ae=at('<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> Batal',1),ze=k('<tr class="bg-green-50"><td class="px-6 py-4"><input class="input w-full focus:ring-2 focus:ring-emerald-500" type="text" placeholder="Masukkan plat nomor"/></td><td class="px-6 py-4"><input class="input w-full focus:ring-2 focus:ring-emerald-500" type="text" placeholder="Masukkan no VT"/></td><td class="px-6 py-4"><div class="relative"><input class="input w-full pr-8 focus:ring-2 focus:ring-emerald-500" type="text" inputmode="numeric" placeholder="0"/> <span class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm">L</span></div></td><td class="px-6 py-4"><div class="flex items-center justify-center gap-2"><!> <!></div></td></tr>'),He=k(`<tr><td colspan="4" class="px-6 py-4"><button class="w-full py-3 rounded-lg
                                    bg-linear-to-r from-emerald-500 to-green-600
                                    hover:from-emerald-600 hover:to-green-700
                                    text-white font-medium
                                    shadow-md hover:shadow-lg
                                    transition-all duration-200
                                    transform hover:scale-[1.01]
                                    flex items-center justify-center gap-2"><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> Tambah VT Baru</button></td></tr>`),Pe=k('<div class="fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50"><!></div>'),Ie=k('<div class="mb-6"><div class="flex items-center gap-3 mb-2"><div class="w-10 h-10 rounded-xl bg-linear-to-br from-emerald-500 to-green-600 flex items-center justify-center shadow-lg"><svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg></div> <div><h1 class="text-2xl font-bold text-gray-900">Manajemen Vacuum Truck</h1> <p class="text-sm text-gray-500">Kelola data kendaraan vacuum truck</p></div></div></div> <div class="bg-white rounded-2xl shadow-md p-4 mb-4"><div class="flex flex-col gap-4"><div class="flex items-center justify-between gap-4"><!> <div class="flex items-center gap-2 text-sm text-gray-600"><svg class="w-5 h-5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg> <span>Total VT: <strong class="text-gray-900"> </strong></span></div></div> <div class="flex items-center gap-3 flex-wrap"><span class="text-sm font-medium text-gray-700">Filter Kapasitas:</span> <div class="relative"><select class="input pr-8 text-sm focus:ring-2 focus:ring-emerald-500 cursor-pointer"><option>Semua Kapasitas</option><option>Tanpa Kapasitas</option><!></select> <svg class="absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div> <!></div> <!></div></div> <div class="bg-white rounded-2xl shadow-md overflow-hidden"><div class="overflow-x-auto"><table class="w-full"><thead class="bg-linear-to-r from-emerald-500 to-green-600 text-white"><tr><th class="px-6 py-4 text-left text-sm font-semibold cursor-pointer select-none hover:bg-emerald-600 transition-colors"><div class="flex items-center gap-2">Plat Nomor <!></div></th><th class="px-6 py-4 text-left text-sm font-semibold cursor-pointer select-none hover:bg-emerald-600 transition-colors"><div class="flex items-center gap-2">No. VT <!></div></th><th class="px-6 py-4 text-left text-sm font-semibold">Kapasitas</th><th class="px-6 py-4 text-center text-sm font-semibold">Aksi</th></tr></thead><tbody class="divide-y divide-gray-100"><!><!></tbody></table></div> <div class="border-t border-gray-100 p-4"><!></div></div> <!>',1);function ea(Ft,Et){pe(Et,!1);const rt=p(),L=p(),st=p(),Y=p(),ot=p(),kt=p();let S=p(!1),$=p(""),J=p(1),F=p(10),E=p("plat"),K=p("asc"),d=p("all");const wt=e=>{t(E)===e?i(K,t(K)==="asc"?"desc":"asc"):(i(E,e),i(K,"asc"))},Gt=(e,a,o="asc")=>[...e].sort((c,g)=>{let f,v;return a==="kapasitas"?(f=parseFloat(c?.kapasitas??0),v=parseFloat(g?.kapasitas??0)):(f=(c?.[a]??"").toString().toLowerCase(),v=(g?.[a]??"").toString().toLowerCase()),f<v?o==="asc"?-1:1:f>v?o==="asc"?1:-1:0}),Nt=()=>{i(d,"all"),i($,"")};let l=p({vt_id:"",plat:"",no_vt:"",kapasitas:""}),A=p(null),G=p("");const Rt=e=>{i(A,"edit"),i(G,e.vt_id),i(l,{vt_id:e.vt_id,plat:e.plat,no_vt:e.no_vt,kapasitas:e.kapasitas})},yt=async()=>{i(S,!0);try{if(t(A)==="edit"){await N.updateVT(t(l));const a=(await N.getVTByID({vt_id:t(G)})).vt,o=t(h).findIndex(c=>c.vt_id===t(G));I(h,t(h)[o]=a),W?.success("Data VT berhasil diperbarui")}else{await N.createVT(t(l));const a=(await N.getLastVT()).vt;i(h,[...t(h),a]),W?.success("Data VT berhasil ditambahkan")}}catch(e){console.error(e),W?.error("Gagal menyimpan data VT")}i(S,!1),nt()},nt=()=>{i(A,null),i(G,""),i(l,{vt_id:"",plat:"",no_vt:"",kapasitas:""})},Ut=()=>{i(A,"add"),i(l,{vt_id:"",plat:"",no_vt:"",kapasitas:""})},qt=async e=>{if(await we("Yakin ingin menghapus data VT ini?","danger")){i(S,!0);try{await N.deleteVT({vt_id:e}),i(h,t(h).filter(o=>o.vt_id!==e)),W?.success("Data VT berhasil dihapus")}catch(o){console.error(o),W?.error("Gagal menghapus data VT")}i(S,!1)}};let h=p([]);const Yt=async()=>{i(S,!0);const e=await N.getVT();i(h,e.vts),i(S,!1)};ce(()=>{Yt()});const it=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."),bt=e=>e>=1e4?"bg-purple-100 text-purple-700":e>=5e3?"bg-blue-100 text-blue-700":e>=3e3?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700";H(()=>t(h),()=>{i(rt,[...new Set(t(h).map(e=>e.kapasitas))].sort((e,a)=>e-a))}),H(()=>(t(h),t($),t(d)),()=>{i(L,t(h).filter(e=>{const a=t($).toLowerCase(),o=(e?.plat??"").toLowerCase().includes(a)||(e?.no_vt??"").toLowerCase().includes(a)||(e?.kapasitas??"").toString().includes(a),c=t(d)==="all"||t(d)==="none"&&!e.kapasitas||String(e.kapasitas)===t(d);return o&&c}))}),H(()=>(t(L),t(E),t(K)),()=>{i(st,Gt(t(L),t(E),t(K)))}),H(()=>(t($),t(d)),()=>{(t($)!==void 0||t(d)!==void 0)&&i(J,1)}),H(()=>(t(J),t(F)),()=>{i(Y,(t(J)-1)*t(F))}),H(()=>(t(Y),t(F)),()=>{i(ot,t(Y)+t(F))}),H(()=>(t(st),t(Y),t(ot)),()=>{i(kt,t(st).slice(t(Y),t(ot)))}),ue(),ke();var Tt=Ie(),lt=n(Pt(Tt),2),Vt=r(lt),dt=r(Vt),$t=r(dt);ye($t,{placeholder:"Cari plat, no VT, kapasitas...",get value(){return t($)},set value(e){i($,e)},$$legacy:!0});var Mt=n($t,2),Bt=n(r(Mt),2),jt=n(r(Bt)),Jt=r(jt,!0);s(jt),s(Bt),s(Mt),s(dt);var vt=n(dt,2),ct=n(r(vt),2),pt=r(ct);P(()=>{t(d),ge(()=>{t(rt)})});var ut=r(pt);ut.value=ut.__value="all";var mt=n(ut);mt.value=mt.__value="none";var Ot=n(mt);It(Ot,1,()=>t(rt),fe,(e,a)=>{var o=Te(),c=r(o);s(o);var g={};P((f,v)=>{C(c,`${f??""} L`),g!==(g=v)&&(o.value=(o.__value=v)??"")},[()=>(t(a),x(()=>it(t(a)))),()=>(t(a),x(()=>String(t(a))))]),u(e,o)}),s(pt),j(2),s(ct);var Qt=n(ct,2);{var Wt=e=>{var a=Ve();U("click",a,Nt),u(e,a)};D(Qt,e=>{(t(d)!=="all"||t($)!=="")&&e(Wt)})}s(vt);var Xt=n(vt,2);{var Zt=e=>{var a=$e(),o=n(r(a),2),c=n(r(o));s(o),s(a),P((g,f)=>{Dt(o,1,`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${g??""}`),C(c,` ${f??""}`)},[()=>(t(d),x(()=>t(d)==="none"?"bg-gray-100 text-gray-700":bt(parseInt(t(d))))),()=>(t(d),x(()=>t(d)==="none"?"Tanpa Kapasitas":`${it(parseInt(t(d)))} L`))]),u(e,a)};D(Xt,e=>{t(d)!=="all"&&e(Zt)})}s(Vt),s(lt);var gt=n(lt,2),ft=r(gt),Ct=r(ft),ht=r(Ct),Lt=r(ht),X=r(Lt),St=r(X),te=n(r(St));{var ee=e=>{var a=Me(),o=r(a,!0);s(a),P(()=>C(o,t(K)==="asc"?"▲":"▼")),u(e,a)};D(te,e=>{t(E)==="plat"&&e(ee)})}s(St),s(X);var _t=n(X),Kt=r(_t),ae=n(r(Kt));{var re=e=>{var a=Be(),o=r(a,!0);s(a),P(()=>C(o,t(K)==="asc"?"▲":"▼")),u(e,a)};D(ae,e=>{t(E)==="no_vt"&&e(re)})}s(Kt),s(_t),j(2),s(Lt),s(ht);var At=n(ht),zt=r(At);It(zt,1,()=>t(kt),e=>e.vt_id,(e,a)=>{var o=he(),c=Pt(o);{var g=v=>{var w=Le(),y=r(w),M=r(y);R(M),s(y);var T=n(y),z=r(T);R(z),s(T);var V=n(T),m=r(V),B=r(m);R(B),j(2),s(m),s(V);var b=n(V),Z=r(b),O=r(Z);et(O,{severity:"success",size:"sm",$$events:{click:yt},children:(_,xt)=>{var Q=je();j(),u(_,Q)},$$slots:{default:!0}});var tt=n(O,2);et(tt,{severity:"ghost",size:"sm",$$events:{click:nt},children:(_,xt)=>{var Q=Ce();j(),u(_,Q)},$$slots:{default:!0}}),s(Z),s(b),s(w),q(M,()=>t(l).plat,_=>I(l,t(l).plat=_)),q(z,()=>t(l).no_vt,_=>I(l,t(l).no_vt=_)),q(B,()=>t(l).kapasitas,_=>I(l,t(l).kapasitas=_)),u(v,w)},f=v=>{var w=Se(),y=r(w),M=r(y),T=n(r(M),2),z=r(T,!0);s(T),s(M),s(y);var V=n(y),m=r(V,!0);s(V);var B=n(V),b=r(B),Z=n(r(b));s(b),s(B);var O=n(B),tt=r(O),_=r(tt),xt=n(_,2);s(tt),s(O),s(w),P((Q,ve)=>{C(z,(t(a),x(()=>t(a).plat))),C(m,(t(a),x(()=>t(a).no_vt))),Dt(b,1,`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Q??""}`),C(Z,` ${ve??""} L`)},[()=>(t(a),x(()=>bt(t(a).kapasitas))),()=>(t(a),x(()=>it(t(a).kapasitas)))]),U("click",_,()=>Rt(t(a))),U("click",xt,()=>qt(t(a).vt_id)),u(v,w)};D(c,v=>{t(A),t(G),t(a),x(()=>t(A)==="edit"&&t(G)===t(a).vt_id)?v(g):v(f,!1)})}u(e,o)});var se=n(zt);{var oe=e=>{var a=ze(),o=r(a),c=r(o);R(c),s(o);var g=n(o),f=r(g);R(f),s(g);var v=n(g),w=r(v),y=r(w);R(y),j(2),s(w),s(v);var M=n(v),T=r(M),z=r(T);et(z,{severity:"success",size:"sm",$$events:{click:yt},children:(m,B)=>{var b=Ke();j(),u(m,b)},$$slots:{default:!0}});var V=n(z,2);et(V,{severity:"ghost",size:"sm",$$events:{click:nt},children:(m,B)=>{var b=Ae();j(),u(m,b)},$$slots:{default:!0}}),s(T),s(M),s(a),q(c,()=>t(l).plat,m=>I(l,t(l).plat=m)),q(f,()=>t(l).no_vt,m=>I(l,t(l).no_vt=m)),q(y,()=>t(l).kapasitas,m=>I(l,t(l).kapasitas=m)),u(e,a)},ne=e=>{var a=He(),o=r(a),c=r(o);s(o),s(a),U("click",c,Ut),u(e,a)};D(se,e=>{t(A)==="add"?e(oe):e(ne,!1)})}s(At),s(Ct),s(ft);var Ht=n(ft,2),ie=r(Ht);be(ie,{get totalItems(){return t(L),x(()=>t(L).length)},get page(){return t(J)},set page(e){i(J,e)},get perPage(){return t(F)},set perPage(e){i(F,e)},$$legacy:!0}),s(Ht),s(gt);var le=n(gt,2);{var de=e=>{var a=Pe(),o=r(a);xe(o,{}),s(a),u(e,a)};D(le,e=>{t(S)&&e(de)})}P(()=>C(Jt,(t(L),x(()=>t(L).length)))),_e(pt,()=>t(d),e=>i(d,e)),U("click",X,()=>wt("plat")),U("click",_t,()=>wt("no_vt")),u(Ft,Tt),me()}export{ea as component};
